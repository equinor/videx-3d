<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>architecture | videx-3d</title><meta name="description" content="Documentation for videx-3d"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">videx-3d</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">videx-3d</a></li><li><a href="architecture.html">architecture</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="architecture" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Architecture<a href="#architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>The diagram below illustrates the dependency chain of this library. It is devided into two boundaries, where everything in the blue half is running on the main thread and where the remaining parts may be externalized and executed as separate scripts using web workers if desired.</p>
<p>The cross-boundary communication is then handled by Comlink through Proxy classes and remote procedure calls.</p>
<p><img src="../media/architecture.png" alt="Architecture"></p>
<p>There are two essential React context provider components, which link data and factory methods to other components:</p>
<ul>
<li>DataProvider</li>
<li>GeneratorsProvider</li>
</ul>
<a id="dataprovider" class="tsd-anchor"></a><h3 class="tsd-anchor-link">DataProvider<a href="#dataprovider" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Provides a data store from which generators or components can access data. The data provider expects an implementation of a store adhering to the <code>Store</code> interface:</p>
<pre><code class="ts"><span class="hl-5">type</span><span class="hl-1"> </span><span class="hl-8">KeyType</span><span class="hl-1"> = </span><span class="hl-8">string</span><span class="hl-1"> | </span><span class="hl-8">number</span><br/><br/><span class="hl-5">interface</span><span class="hl-1"> </span><span class="hl-8">Store</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">get</span><span class="hl-1">: &lt;</span><span class="hl-8">T</span><span class="hl-1">&gt;(</span><span class="hl-0">dataType</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-0">key</span><span class="hl-1">: </span><span class="hl-8">KeyType</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">T</span><span class="hl-1"> | </span><span class="hl-8">null</span><span class="hl-1">&gt;</span><br/><span class="hl-1">  </span><span class="hl-7">set</span><span class="hl-1">: &lt;</span><span class="hl-8">T</span><span class="hl-1">&gt;(</span><span class="hl-0">dataType</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-0">key</span><span class="hl-1">: </span><span class="hl-8">KeyType</span><span class="hl-1">, </span><span class="hl-0">value</span><span class="hl-1">: </span><span class="hl-8">T</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">boolean</span><span class="hl-1">&gt;</span><br/><span class="hl-1">  </span><span class="hl-7">all</span><span class="hl-1">: &lt;</span><span class="hl-8">T</span><span class="hl-1">&gt;(</span><span class="hl-0">dataType</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">T</span><span class="hl-1">[] | </span><span class="hl-8">null</span><span class="hl-1">&gt;</span><br/><span class="hl-1">  </span><span class="hl-7">query</span><span class="hl-1">: &lt;</span><span class="hl-8">T</span><span class="hl-1">&gt;(</span><span class="hl-0">dataType</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-0">queryString</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">T</span><span class="hl-1">[]&gt;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Data needs to be organized as named <em>data sets</em> indexed by a key, which may be either a string or a number (typically the id of a data record).</p>
<p>As an example, consider a data set named 'wellbore-headers'. You would then retrieve a wellbore header record from the store by invoking the async <code>get</code> function:</p>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">header</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">store</span><span class="hl-1">.</span><span class="hl-7">get</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">&#39;wellbore-headers&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">&#39;abcd-1234-efgh-5678-ijkl-9000&#39;</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<p>Specify types are declared for common data types used throughout this library. These are defined in <code>/src/sdk/data/types</code> and can be imported from <code>videx-3d/sdk</code>.</p>
<p>Some examples:</p>
<ul>
<li>WellboreHeader</li>
<li>PositionLog</li>
<li>Casing</li>
<li>CompletionTool</li>
<li>Pick</li>
<li>StratColumn</li>
</ul>
<p><strong>NOTE:</strong> It is important that your source data is mapped properly to these types! All depth data are typically in meters and referenced by MSL (mean sea level).</p>
<a id="generatorsprovider" class="tsd-anchor"></a><h3 class="tsd-anchor-link">GeneratorsProvider<a href="#generatorsprovider" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Provides a factory for processing/generating data required in the render loop. This is typically geometry data which it builds based on simple arguments passed by a component depeneding on the generator (such as an id, radius, scale and other option values). The generator code will typically access the store itself to retrieve the data it needs from the data provider.</p>
<p>The components available in this library already have generator functions created that expects certain data sets to be accessable from the store. These can be imported from <code>videx-3d/generators</code>.</p>
<p>Generator functions are registered in the <code>GeneratorRegistry</code> by adding them to the instance along with a key:</p>
<p>See: <a href="generators.html">generators</a></p>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">registry</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">GeneratorRegistry</span><span class="hl-1">()</span><br/><br/><span class="hl-0">registry</span><span class="hl-1">.</span><span class="hl-7">add</span><span class="hl-1">(</span><span class="hl-4">&#39;generator name&#39;</span><span class="hl-1">, </span><span class="hl-0">myGeneratorFunction</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<p>Generators are typically dependant on the data context, and the <code>GeneratorsProvider</code> must therfore be added as a child of the <code>DataProvider</code>:</p>
<pre><code class="tsx"><span class="hl-1">&lt;...&gt;</span><br/><span class="hl-9">&lt;</span><span class="hl-8">DataProvider</span><span class="hl-1"> </span><span class="hl-11">store</span><span class="hl-1">=</span><span class="hl-5">{</span><span class="hl-0">store</span><span class="hl-5">}</span><span class="hl-9">&gt;</span><br/><span class="hl-1">  </span><span class="hl-9">&lt;</span><span class="hl-8">GeneratorsProvider</span><span class="hl-1"> </span><span class="hl-11">registry</span><span class="hl-1">=</span><span class="hl-5">{</span><span class="hl-0">registry</span><span class="hl-5">}</span><span class="hl-9">&gt;</span><br/><span class="hl-1">    </span><span class="hl-5">{</span><span class="hl-2">/* Add any components depending on data/generators here */</span><span class="hl-5">}</span><br/><span class="hl-1">  </span><span class="hl-9">&lt;/</span><span class="hl-8">GeneratorsProvider</span><span class="hl-9">&gt;</span><br/><span class="hl-9">&lt;/</span><span class="hl-8">DataProvider</span><span class="hl-9">&gt;</span><br/><span class="hl-1">&lt;/...&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Where <code>store</code> is an implementation of the <code>Store</code> interface and <code>registry</code> is an instance of the <code>GeneratorRegistry</code> class.</p>
<p>As with data set names, existing components depends on generators available in the registry with specific key names. For example, the <code>BasicTrajectory</code> component will depend on a generator named <code>'basicTrajectory'</code>. These names are declared and exported with the components, and you will find which dependencies each component have in the api docs.</p>
<a id="sdk" class="tsd-anchor"></a><h3 class="tsd-anchor-link">SDK<a href="#sdk" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The SDK (software development kit) contains supporting functions and classes, which can be imported from <code>videx-3d/sdk</code>. This contains data type definitions, utility functions and other shared code, which may be used across boundaries.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#architecture"><span>Architecture</span></a><ul><li><a href="#dataprovider"><span>Data<wbr/>Provider</span></a></li><li><a href="#generatorsprovider"><span>Generators<wbr/>Provider</span></a></li><li><a href="#sdk"><span>SDK</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">videx-3d</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

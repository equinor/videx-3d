<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>generators | videx-3d</title><meta name="description" content="Documentation for videx-3d"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">videx-3d</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">videx-3d</a></li><li><a href="generators.html">generators</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="generators" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Generators<a href="#generators" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Generators are special factory functions that can be used by components to externalize data fetching and processing.</p>
<p>The following table gives an overview of the generators required for each component. The generator function needs to be added to the <code>GeneratorRegistry</code> with the generator key listed here for the component to work!</p>
<p>The generator keys are exported as variables, named according to the generator key column, and can be imported from <code>videx-3d</code>.</p>
<p>The generator functions can be imported from <code>videx-3d/generators</code> (default implementations).</p>
<p><strong>Note:</strong> The default generators have data dependencies. Please see <a href="data.html">data docs</a> for more information.</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Key</th>
<th>Default generator function</th>
<th>Data dependencies</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>BasicTrajectory</strong></td>
<td>basicTrajectory</td>
<td>generateBasicTrajectory</td>
<td>- position-logs</td>
</tr>
<tr>
<td><strong>CasingAnnotations</strong></td>
<td>casingToolAnnotations</td>
<td>generateCasingAnnotations</td>
<td>- position-logs<br/>- casings</td>
</tr>
<tr>
<td><strong>Casings</strong></td>
<td>casings</td>
<td>generateCasings</td>
<td>- position-logs<br/>- casings</td>
</tr>
<tr>
<td><strong>CompletionAnnotations</strong></td>
<td>completionToolAnnotations</td>
<td>generateCompletionToolAnnotations</td>
<td>- position-logs<br/>- completion-tools</td>
</tr>
<tr>
<td><strong>CompletionTools</strong></td>
<td>completionTools</td>
<td>generateCompletionTools</td>
<td>- position-logs<br/>- completion-tools</td>
</tr>
<tr>
<td><strong>DepthMarkers</strong></td>
<td>depthMarkers</td>
<td>generateDepthMarkers</td>
<td>- position-logs</td>
</tr>
<tr>
<td><strong>Perforations</strong></td>
<td>perforationSymbols</td>
<td>generatePerforations</td>
<td>- position-logs<br/>- perforations</td>
</tr>
<tr>
<td><strong>Perimeter</strong></td>
<td>perimeterGeometry</td>
<td>generatePerimeterGeometry</td>
<td>- position-logs</td>
</tr>
<tr>
<td><strong>Picks</strong></td>
<td>pickSymbols</td>
<td>generatePicks</td>
<td>- position-logs<br/>- picks</td>
</tr>
<tr>
<td><strong>Shoes</strong></td>
<td>shoeSymbols</td>
<td>generateShoes</td>
<td>- position-logs<br/>- casings</td>
</tr>
<tr>
<td><strong>Surface</strong></td>
<td>surfaceGeometry</td>
<td>generateSurfaceGeometry</td>
<td>- surface-meta<br/>- surface-values</td>
</tr>
<tr>
<td><strong>TubeTrajectory</strong></td>
<td>tubeTrajectory</td>
<td>generateTubeTrajectory</td>
<td>- position-logs</td>
</tr>
<tr>
<td><strong>WellboreBounds</strong></td>
<td>wellboreBounds</td>
<td>calculateWellboreBounds</td>
<td>- position-logs</td>
</tr>
<tr>
<td><strong>WellboreLabel</strong></td>
<td>wellboreLabel</td>
<td>generateWellboreLabel</td>
<td>- position-logs<br/>- wellbore-headers</td>
</tr>
</tbody>
</table>
<a id="generator-function" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Generator function<a href="#generator-function" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>A generator function is simply an async function that will have a all the read methods from the <code>store</code> interface available in its scope (accessed using the <code>this</code> keyword):</p>
<pre><code class="ts"><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-5">function</span><span class="hl-1"> </span><span class="hl-7">myGeneratorFunction</span><span class="hl-1">(</span><span class="hl-5">this</span><span class="hl-1">: </span><span class="hl-8">ReadonlyStore</span><span class="hl-1">, </span><span class="hl-0">id</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-2">// get data</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">data</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-5">this</span><span class="hl-1">.</span><span class="hl-7">get</span><span class="hl-1">(</span><span class="hl-4">&#39;data-set&#39;</span><span class="hl-1">, </span><span class="hl-0">id</span><span class="hl-1">)</span><br/><br/><span class="hl-1">  </span><span class="hl-2">// use the data to generate geometry or whatever is required by the component</span><br/><br/><span class="hl-1">  </span><span class="hl-2">// return processed data </span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Note that if the generators are run in a web worker context, you need to be aware of how data is moved from one thread to another (see <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm">The structured clone algorithm</a>).</p>
<p>As data is serialized and copied when passed across threads, you should take advantage of data types that are <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Transferable_objects"><em>transferable</em></a>. This can be done using the <a href="https://github.com/GoogleChromeLabs/comlink?tab=readme-ov-file#comlinktransfervalue-transferables-and-comlinkproxyvalue"><code>transfer</code></a> function with <code>comlink</code> in the return statement:</p>
<pre><code class="ts"><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-7">transfer</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">, [</span><span class="hl-0">buffers</span><span class="hl-1">])</span>
</code><button type="button">Copy</button></pre>

<a id="generatorregistry" class="tsd-anchor"></a><h2 class="tsd-anchor-link">GeneratorRegistry<a href="#generatorregistry" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>GeneratorRegistry</code> class is used to inject the generator functions you need in your project. It is a simple key-value store that maps a generator function to a key:</p>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">registry</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">GeneratorRegistry</span><span class="hl-1">()</span><br/><br/><span class="hl-2">// add the generators required</span><br/><span class="hl-0">registry</span><span class="hl-1">.</span><span class="hl-7">add</span><span class="hl-1">(</span><span class="hl-0">basicTrajectory</span><span class="hl-1">, </span><span class="hl-0">generateBasicTrajectory</span><span class="hl-1">)</span><br/><span class="hl-1">...</span><br/><br/><span class="hl-2">// if you want to run the generators in a web worker, use comlink to expose the</span><br/><span class="hl-2">// instance as an endpoint</span><br/><span class="hl-7">expose</span><span class="hl-1">(</span><span class="hl-0">registry</span><span class="hl-1">)</span><br/>
</code><button type="button">Copy</button></pre>

<a id="generatorsprovider" class="tsd-anchor"></a><h2 class="tsd-anchor-link">GeneratorsProvider<a href="#generatorsprovider" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Components access the generator registry with the <code>useGenerator</code> hook (see below). This hook uses the context provided by the <code>GeneratorsProvider</code>, which must be added as a child of the <code>DataProvider</code>:</p>
<pre><code class="tsx"><span class="hl-9">&lt;&gt;</span><br/><span class="hl-1">  </span><span class="hl-9">&lt;</span><span class="hl-8">DataProvider</span><span class="hl-1"> </span><span class="hl-11">store</span><span class="hl-1">=</span><span class="hl-5">{</span><span class="hl-0">store</span><span class="hl-5">}</span><span class="hl-9">&gt;</span><br/><span class="hl-1">    </span><span class="hl-9">&lt;</span><span class="hl-8">GeneratorsProvider</span><span class="hl-1"> </span><span class="hl-11">registry</span><span class="hl-1">=</span><span class="hl-5">{</span><span class="hl-0">registry</span><span class="hl-5">}</span><span class="hl-9">&gt;</span><br/><span class="hl-1">      </span><span class="hl-5">{</span><span class="hl-10"> </span><span class="hl-2">/* components */</span><span class="hl-10"> </span><span class="hl-5">}</span><span class="hl-1"> </span><br/><span class="hl-1">    </span><span class="hl-9">&lt;/</span><span class="hl-8">GeneratorsProvider</span><span class="hl-9">&gt;</span><br/><span class="hl-1">  </span><span class="hl-9">&lt;/</span><span class="hl-8">DataProvider</span><span class="hl-9">&gt;</span><br/><span class="hl-9">&lt;/&gt;</span>
</code><button type="button">Copy</button></pre>

<a id="usegenerator" class="tsd-anchor"></a><h2 class="tsd-anchor-link">useGenerator<a href="#usegenerator" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>A component can request a generator function using the React hook <code>useGenerator&lt;TReturnType&gt;({key})</code>. This will return an async function that can be used within the component to  invoke the registered generator function.</p>
<p>In typescript, add the return type expected using the generic.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#generators"><span>Generators</span></a><ul><li><a href="#generator-function"><span>Generator function</span></a></li><li><a href="#generatorregistry"><span>Generator<wbr/>Registry</span></a></li><li><a href="#generatorsprovider"><span>Generators<wbr/>Provider</span></a></li><li><a href="#usegenerator"><span>use<wbr/>Generator</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">videx-3d</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

import{j as E}from"./jsx-runtime-CmIOflP4.js";import{r as M}from"./index-KqYmeiyw.js";import{a as bt}from"./data-provider-decorator-BF4MaAx0.js";import{c as de}from"./numbers-DM6OWwIG.js";import"./index.esm-BMr5xbKZ.js";import"./CameraManager-BuezL_By.js";import"./index-BsNHLAmC.js";import"./uv-material-DyQCcDTL.js";import"./limiter-DhBcc_yH.js";import{c as Ut}from"./react-Mgt78q4a.js";function Xt(e,t,n){const r=new Map,i={};t.sort((o,s)=>o.id===n?-1:s.id===n?1:o.drilled&&s.drilled?s.drilled.getTime()-o.drilled.getTime():o.name.localeCompare(s.name));for(let o=0;o<t.length;o++){const s=t[o];if(!s)continue;let a=s.parent&&s.kickoffDepthMsl!==null?s.kickoffDepthMsl:-s.depthReferenceElevation;if(r.has(s.id))a=r.get(s.id);else{let u=s.parent;for(;u;){const l=e[u];if(!l)break;if(r.has(l.id)){const f=r.get(l.id);a>=f&&(r.set(l.id,a),a=f);break}else r.set(l.id,a),a=l.parent&&l.kickoffDepthMsl!==null?l.kickoffDepthMsl:-l.depthReferenceElevation;u=l.parent}}i[s.id]=[a,o],r.set(s.id,s.depthMdMsl)}return i}function Xe(e,t,n){if(e.length===0)return[];e.sort((o,s)=>t(o)-t(s));const r=[];let i={start:t(e[0]),end:n(e[0])};for(let o=1;o<e.length;o+=1)t(e[o])===i.end?i.end=n(e[o]):(r.push(i),i={start:t(e[o]),end:n(e[o])});return r.push(i),r}function Ye(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function Yt({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,s]=M.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=M.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),u=e?typeof e=="number"?e:e.scroll:null,l=e?typeof e=="number"?e:e.resize:null,f=M.useRef(!1);M.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[m,h,w]=M.useMemo(()=>{const x=()=>{if(!a.current.element)return;const{left:y,top:k,width:c,height:d,bottom:_,right:p,x:S,y:T}=a.current.element.getBoundingClientRect(),C={left:y,top:k,width:c,height:d,bottom:_,right:p,x:S,y:T};a.current.element instanceof HTMLElement&&r&&(C.height=a.current.element.offsetHeight,C.width=a.current.element.offsetWidth),Object.freeze(C),f.current&&!Qt(a.current.lastBounds,C)&&s(a.current.lastBounds=C)};return[x,l?Ye(x,l):x,u?Ye(x,u):x]},[s,r,u,l]);function b(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",w,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function $(){a.current.element&&(a.current.resizeObserver=new i(w),a.current.resizeObserver.observe(a.current.element),t&&a.current.scrollContainers&&a.current.scrollContainers.forEach(x=>x.addEventListener("scroll",w,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{w()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const v=x=>{!x||x===a.current.element||(b(),a.current.element=x,a.current.scrollContainers=_t(x),$())};return Kt(w,!!t),Gt(h),M.useEffect(()=>{b(),$()},[t,w,h]),M.useEffect(()=>b,[]),[v,o,m]}function Gt(e){M.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function Kt(e,t){M.useEffect(()=>{if(t){const n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[e,t])}function _t(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some(o=>o==="auto"||o==="scroll")&&t.push(e),[...t,..._t(e.parentElement)]}const Zt=["x","y","top","bottom","left","right","width","height"],Qt=(e,t)=>Zt.every(n=>e[n]===t[n]);function ce(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Jt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function vt(e){let t,n,r;e.length!==2?(t=ce,n=(a,u)=>ce(e(a),u),r=(a,u)=>e(a)-u):(t=e===ce||e===Jt?e:en,n=e,r=e);function i(a,u,l=0,f=a.length){if(l<f){if(t(u,u)!==0)return f;do{const m=l+f>>>1;n(a[m],u)<0?l=m+1:f=m}while(l<f)}return l}function o(a,u,l=0,f=a.length){if(l<f){if(t(u,u)!==0)return f;do{const m=l+f>>>1;n(a[m],u)<=0?l=m+1:f=m}while(l<f)}return l}function s(a,u,l=0,f=a.length){const m=i(a,u,l,f-1);return m>l&&r(a[m-1],u)>-r(a[m],u)?m-1:m}return{left:i,center:s,right:o}}function en(){return 0}function tn(e){return e===null?NaN:+e}const nn=vt(ce),rn=nn.right;vt(tn).center;class Ge extends Map{constructor(t,n=an){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Ke(this,t))}has(t){return super.has(Ke(this,t))}set(t,n){return super.set(on(this,t),n)}delete(t){return super.delete(sn(this,t))}}function Ke({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function on({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function sn({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function an(e){return e!==null&&typeof e=="object"?e.valueOf():e}const ln=Math.sqrt(50),un=Math.sqrt(10),cn=Math.sqrt(2);function he(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=ln?10:o>=un?5:o>=cn?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*s,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?he(e,t,n*2):[a,u,l]}function fn(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?he(t,e,n):he(e,t,n);if(!(o>=i))return[];const a=o-i+1,u=new Array(a);if(r)if(s<0)for(let l=0;l<a;++l)u[l]=(o-l)/-s;else for(let l=0;l<a;++l)u[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)u[l]=(i+l)/-s;else for(let l=0;l<a;++l)u[l]=(i+l)*s;return u}function Se(e,t,n){return t=+t,e=+e,n=+n,he(e,t,n)[2]}function dn(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Se(t,e,n):Se(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function hn(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function pn(e){return e}var mn=4,Ze=1e-6;function gn(e){return"translate(0,"+e+")"}function yn(e){return t=>+e(t)}function xn(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function wn(){return!this.__axis}function bn(e,t){var n=[],r=null,i=null,o=6,s=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=-1,f="x",m=gn;function h(w){var b=r??(t.ticks?t.ticks.apply(t,n):t.domain()),$=i??(t.tickFormat?t.tickFormat.apply(t,n):pn),v=Math.max(o,0)+a,x=t.range(),y=+x[0]+u,k=+x[x.length-1]+u,c=(t.bandwidth?xn:yn)(t.copy(),u),d=w.selection?w.selection():w,_=d.selectAll(".domain").data([null]),p=d.selectAll(".tick").data(b,t).order(),S=p.exit(),T=p.enter().append("g").attr("class","tick"),C=p.select("line"),g=p.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),p=p.merge(T),C=C.merge(T.append("line").attr("stroke","currentColor").attr(f+"2",l*o)),g=g.merge(T.append("text").attr("fill","currentColor").attr(f,l*v).attr("dy","0.32em")),w!==d&&(_=_.transition(w),p=p.transition(w),C=C.transition(w),g=g.transition(w),S=S.transition(w).attr("opacity",Ze).attr("transform",function(A){return isFinite(A=c(A))?m(A+u):this.getAttribute("transform")}),T.attr("opacity",Ze).attr("transform",function(A){var D=this.parentNode.__axis;return m((D&&isFinite(D=D(A))?D:c(A))+u)})),S.remove(),_.attr("d",s?"M"+l*s+","+y+"H"+u+"V"+k+"H"+l*s:"M"+u+","+y+"V"+k),p.attr("opacity",1).attr("transform",function(A){return m(c(A)+u)}),C.attr(f+"2",l*o),g.attr(f,l*v).text($),d.filter(wn).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","end"),d.each(function(){this.__axis=c})}return h.scale=function(w){return arguments.length?(t=w,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(w){return arguments.length?(n=w==null?[]:Array.from(w),h):n.slice()},h.tickValues=function(w){return arguments.length?(r=w==null?null:Array.from(w),h):r&&r.slice()},h.tickFormat=function(w){return arguments.length?(i=w,h):i},h.tickSize=function(w){return arguments.length?(o=s=+w,h):o},h.tickSizeInner=function(w){return arguments.length?(o=+w,h):o},h.tickSizeOuter=function(w){return arguments.length?(s=+w,h):s},h.tickPadding=function(w){return arguments.length?(a=+w,h):a},h.offset=function(w){return arguments.length?(u=+w,h):u},h}function Qe(e){return bn(mn,e)}var Ae="http://www.w3.org/1999/xhtml";const Je={svg:"http://www.w3.org/2000/svg",xhtml:Ae,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kt(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Je.hasOwnProperty(t)?{space:Je[t],local:e}:e}function _n(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ae&&t.documentElement.namespaceURI===Ae?t.createElement(e):t.createElementNS(n,e)}}function vn(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Mt(e){var t=kt(e);return(t.local?vn:_n)(t)}function kn(){}function $t(e){return e==null?kn:function(){return this.querySelector(e)}}function Mn(e){typeof e!="function"&&(e=$t(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,l,f=0;f<s;++f)(u=o[f])&&(l=e.call(u,u.__data__,f,o))&&("__data__"in u&&(l.__data__=u.__data__),a[f]=l);return new B(r,this._parents)}function $n(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Sn(){return[]}function An(e){return e==null?Sn:function(){return this.querySelectorAll(e)}}function Nn(e){return function(){return $n(e.apply(this,arguments))}}function En(e){typeof e=="function"?e=Nn(e):e=An(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(r.push(e.call(u,u.__data__,l,s)),i.push(u));return new B(r,i)}function Cn(e){return function(){return this.matches(e)}}function St(e){return function(t){return t.matches(e)}}var Tn=Array.prototype.find;function In(e){return function(){return Tn.call(this.children,e)}}function Dn(){return this.firstElementChild}function Wn(e){return this.select(e==null?Dn:In(typeof e=="function"?e:St(e)))}var Pn=Array.prototype.filter;function Rn(){return Array.from(this.children)}function qn(e){return function(){return Pn.call(this.children,e)}}function Vn(e){return this.selectAll(e==null?Rn:qn(typeof e=="function"?e:St(e)))}function Bn(e){typeof e!="function"&&(e=Cn(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new B(r,this._parents)}function At(e){return new Array(e.length)}function zn(){return new B(this._enter||this._groups.map(At),this._parents)}function pe(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}pe.prototype={constructor:pe,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Fn(e){return function(){return e}}function Hn(e,t,n,r,i,o){for(var s=0,a,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new pe(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function On(e,t,n,r,i,o,s){var a,u,l=new Map,f=t.length,m=o.length,h=new Array(f),w;for(a=0;a<f;++a)(u=t[a])&&(h[a]=w=s.call(u,u.__data__,a,t)+"",l.has(w)?i[a]=u:l.set(w,u));for(a=0;a<m;++a)w=s.call(e,o[a],a,o)+"",(u=l.get(w))?(r[a]=u,u.__data__=o[a],l.delete(w)):n[a]=new pe(e,o[a]);for(a=0;a<f;++a)(u=t[a])&&l.get(h[a])===u&&(i[a]=u)}function jn(e){return e.__data__}function Ln(e,t){if(!arguments.length)return Array.from(this,jn);var n=t?On:Hn,r=this._parents,i=this._groups;typeof e!="function"&&(e=Fn(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var f=r[l],m=i[l],h=m.length,w=Un(e.call(f,f&&f.__data__,l,r)),b=w.length,$=a[l]=new Array(b),v=s[l]=new Array(b),x=u[l]=new Array(h);n(f,m,$,v,x,w,t);for(var y=0,k=0,c,d;y<b;++y)if(c=$[y]){for(y>=k&&(k=y+1);!(d=v[k])&&++k<b;);c._next=d||null}}return s=new B(s,r),s._enter=a,s._exit=u,s}function Un(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Xn(){return new B(this._exit||this._groups.map(At),this._parents)}function Yn(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Gn(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l=n[u],f=r[u],m=l.length,h=a[u]=new Array(m),w,b=0;b<m;++b)(w=l[b]||f[b])&&(h[b]=w);for(;u<i;++u)a[u]=n[u];return new B(a,this._parents)}function Kn(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Zn(e){e||(e=Qn);function t(m,h){return m&&h?e(m.__data__,h.__data__):!m-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),l,f=0;f<a;++f)(l=s[f])&&(u[f]=l);u.sort(t)}return new B(i,this._parents).order()}function Qn(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Jn(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function er(){return Array.from(this)}function tr(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function nr(){let e=0;for(const t of this)++e;return e}function rr(){return!this.node()}function ir(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function or(e){return function(){this.removeAttribute(e)}}function sr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ar(e,t){return function(){this.setAttribute(e,t)}}function lr(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ur(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function cr(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function fr(e,t){var n=kt(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?sr:or:typeof t=="function"?n.local?cr:ur:n.local?lr:ar)(n,t))}function Nt(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function dr(e){return function(){this.style.removeProperty(e)}}function hr(e,t,n){return function(){this.style.setProperty(e,t,n)}}function pr(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function mr(e,t,n){return arguments.length>1?this.each((t==null?dr:typeof t=="function"?pr:hr)(e,t,n??"")):gr(this.node(),e)}function gr(e,t){return e.style.getPropertyValue(t)||Nt(e).getComputedStyle(e,null).getPropertyValue(t)}function yr(e){return function(){delete this[e]}}function xr(e,t){return function(){this[e]=t}}function wr(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function br(e,t){return arguments.length>1?this.each((t==null?yr:typeof t=="function"?wr:xr)(e,t)):this.node()[e]}function Et(e){return e.trim().split(/^|\s+/)}function Fe(e){return e.classList||new Ct(e)}function Ct(e){this._node=e,this._names=Et(e.getAttribute("class")||"")}Ct.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Tt(e,t){for(var n=Fe(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function It(e,t){for(var n=Fe(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function _r(e){return function(){Tt(this,e)}}function vr(e){return function(){It(this,e)}}function kr(e,t){return function(){(t.apply(this,arguments)?Tt:It)(this,e)}}function Mr(e,t){var n=Et(e+"");if(arguments.length<2){for(var r=Fe(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?kr:t?_r:vr)(n,t))}function $r(){this.textContent=""}function Sr(e){return function(){this.textContent=e}}function Ar(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Nr(e){return arguments.length?this.each(e==null?$r:(typeof e=="function"?Ar:Sr)(e)):this.node().textContent}function Er(){this.innerHTML=""}function Cr(e){return function(){this.innerHTML=e}}function Tr(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ir(e){return arguments.length?this.each(e==null?Er:(typeof e=="function"?Tr:Cr)(e)):this.node().innerHTML}function Dr(){this.nextSibling&&this.parentNode.appendChild(this)}function Wr(){return this.each(Dr)}function Pr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Rr(){return this.each(Pr)}function qr(e){var t=typeof e=="function"?e:Mt(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Vr(){return null}function Br(e,t){var n=typeof e=="function"?e:Mt(e),r=t==null?Vr:typeof t=="function"?t:$t(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function zr(){var e=this.parentNode;e&&e.removeChild(this)}function Fr(){return this.each(zr)}function Hr(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Or(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function jr(e){return this.select(e?Or:Hr)}function Lr(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ur(e){return function(t){e.call(this,t,this.__data__)}}function Xr(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Yr(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Gr(e,t,n){return function(){var r=this.__on,i,o=Ur(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Kr(e,t,n){var r=Xr(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,f;u<l;++u)for(i=0,f=a[u];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(a=t?Gr:Yr,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function Dt(e,t,n){var r=Nt(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Zr(e,t){return function(){return Dt(this,e,t)}}function Qr(e,t){return function(){return Dt(this,e,t.apply(this,arguments))}}function Jr(e,t){return this.each((typeof t=="function"?Qr:Zr)(e,t))}function*ei(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var ti=[null];function B(e,t){this._groups=e,this._parents=t}function ni(){return this}B.prototype={constructor:B,select:Mn,selectAll:En,selectChild:Wn,selectChildren:Vn,filter:Bn,data:Ln,enter:zn,exit:Xn,join:Yn,merge:Gn,selection:ni,order:Kn,sort:Zn,call:Jn,nodes:er,node:tr,size:nr,empty:rr,each:ir,attr:fr,style:mr,property:br,classed:Mr,text:Nr,html:Ir,raise:Wr,lower:Rr,append:qr,insert:Br,remove:Fr,clone:jr,datum:Lr,on:Kr,dispatch:Jr,[Symbol.iterator]:ei};function U(e){return typeof e=="string"?new B([[document.querySelector(e)]],[document.documentElement]):new B([[e]],ti)}function ri(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ne(e,t){if(e=ri(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ee=Math.PI,Ce=2*Ee,O=1e-6,ii=Ce-O;function Wt(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function oi(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Wt;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Pt{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Wt:oi(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,u=r-t,l=i-n,f=s-t,m=a-n,h=f*f+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>O)if(!(Math.abs(m*u-l*f)>O)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let w=r-s,b=i-a,$=u*u+l*l,v=w*w+b*b,x=Math.sqrt($),y=Math.sqrt(h),k=o*Math.tan((Ee-Math.acos(($+h-v)/(2*x*y)))/2),c=k/y,d=k/x;Math.abs(c-1)>O&&this._append`L${t+c*f},${n+c*m}`,this._append`A${o},${o},0,0,${+(m*w>f*b)},${this._x1=t+d*u},${this._y1=n+d*l}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,f=n+u,m=1^s,h=s?i-o:o-i;this._x1===null?this._append`M${l},${f}`:(Math.abs(this._x1-l)>O||Math.abs(this._y1-f)>O)&&this._append`L${l},${f}`,r&&(h<0&&(h=h%Ce+Ce),h>ii?this._append`A${r},${r},0,1,${m},${t-a},${n-u}A${r},${r},0,1,${m},${this._x1=l},${this._y1=f}`:h>O&&this._append`A${r},${r},0,${+(h>=Ee)},${m},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Q(){return new Pt}Q.prototype=Pt.prototype;function Rt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const et=Symbol("implicit");function si(){var e=new Ge,t=[],n=[],r=et;function i(o){let s=e.get(o);if(s===void 0){if(r!==et)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Ge;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return si(t,n).unknown(r)},Rt.apply(i,arguments),i}function He(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qt(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ie(){}var ee=.7,me=1/ee,G="\\s*([+-]?\\d+)\\s*",te="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",F="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ai=/^#([0-9a-f]{3,8})$/,li=new RegExp(`^rgb\\(${G},${G},${G}\\)$`),ui=new RegExp(`^rgb\\(${F},${F},${F}\\)$`),ci=new RegExp(`^rgba\\(${G},${G},${G},${te}\\)$`),fi=new RegExp(`^rgba\\(${F},${F},${F},${te}\\)$`),di=new RegExp(`^hsl\\(${te},${F},${F}\\)$`),hi=new RegExp(`^hsla\\(${te},${F},${F},${te}\\)$`),tt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};He(ie,ne,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nt,formatHex:nt,formatHex8:pi,formatHsl:mi,formatRgb:rt,toString:rt});function nt(){return this.rgb().formatHex()}function pi(){return this.rgb().formatHex8()}function mi(){return Vt(this).formatHsl()}function rt(){return this.rgb().formatRgb()}function ne(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ai.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?it(t):n===3?new V(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?se(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?se(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=li.exec(e))?new V(t[1],t[2],t[3],1):(t=ui.exec(e))?new V(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ci.exec(e))?se(t[1],t[2],t[3],t[4]):(t=fi.exec(e))?se(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=di.exec(e))?at(t[1],t[2]/100,t[3]/100,1):(t=hi.exec(e))?at(t[1],t[2]/100,t[3]/100,t[4]):tt.hasOwnProperty(e)?it(tt[e]):e==="transparent"?new V(NaN,NaN,NaN,0):null}function it(e){return new V(e>>16&255,e>>8&255,e&255,1)}function se(e,t,n,r){return r<=0&&(e=t=n=NaN),new V(e,t,n,r)}function gi(e){return e instanceof ie||(e=ne(e)),e?(e=e.rgb(),new V(e.r,e.g,e.b,e.opacity)):new V}function Te(e,t,n,r){return arguments.length===1?gi(e):new V(e,t,n,r??1)}function V(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}He(V,Te,qt(ie,{brighter(e){return e=e==null?me:Math.pow(me,e),new V(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ee:Math.pow(ee,e),new V(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new V(L(this.r),L(this.g),L(this.b),ge(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ot,formatHex:ot,formatHex8:yi,formatRgb:st,toString:st}));function ot(){return`#${j(this.r)}${j(this.g)}${j(this.b)}`}function yi(){return`#${j(this.r)}${j(this.g)}${j(this.b)}${j((isNaN(this.opacity)?1:this.opacity)*255)}`}function st(){const e=ge(this.opacity);return`${e===1?"rgb(":"rgba("}${L(this.r)}, ${L(this.g)}, ${L(this.b)}${e===1?")":`, ${e})`}`}function ge(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function L(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function j(e){return e=L(e),(e<16?"0":"")+e.toString(16)}function at(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new z(e,t,n,r)}function Vt(e){if(e instanceof z)return new z(e.h,e.s,e.l,e.opacity);if(e instanceof ie||(e=ne(e)),!e)return new z;if(e instanceof z)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new z(s,a,u,e.opacity)}function xi(e,t,n,r){return arguments.length===1?Vt(e):new z(e,t,n,r??1)}function z(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}He(z,xi,qt(ie,{brighter(e){return e=e==null?me:Math.pow(me,e),new z(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ee:Math.pow(ee,e),new z(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new V(ke(e>=240?e-240:e+120,i,r),ke(e,i,r),ke(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new z(lt(this.h),ae(this.s),ae(this.l),ge(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ge(this.opacity);return`${e===1?"hsl(":"hsla("}${lt(this.h)}, ${ae(this.s)*100}%, ${ae(this.l)*100}%${e===1?")":`, ${e})`}`}}));function lt(e){return e=(e||0)%360,e<0?e+360:e}function ae(e){return Math.max(0,Math.min(1,e||0))}function ke(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const _e=e=>()=>e;function Bt(e,t){return function(n){return e+n*t}}function wi(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ko(e,t){var n=t-e;return n?Bt(e,n>180||n<-180?n-360*Math.round(n/360):n):_e(isNaN(e)?t:e)}function bi(e){return(e=+e)==1?zt:function(t,n){return n-t?wi(t,n,e):_e(isNaN(t)?n:t)}}function zt(e,t){var n=t-e;return n?Bt(e,n):_e(isNaN(e)?t:e)}const ut=function e(t){var n=bi(t);function r(i,o){var s=n((i=Te(i)).r,(o=Te(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=zt(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=u(f),i.opacity=l(f),i+""}}return r.gamma=e,r}(1);function _i(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function vi(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ki(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Oe(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function Mi(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ye(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function $i(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Oe(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Ie=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Me=new RegExp(Ie.source,"g");function Si(e){return function(){return e}}function Ai(e){return function(t){return e(t)+""}}function Ni(e,t){var n=Ie.lastIndex=Me.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Ie.exec(e))&&(i=Me.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:ye(r,i)})),n=Me.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?Ai(u[0].x):Si(t):(t=u.length,function(l){for(var f=0,m;f<t;++f)a[(m=u[f]).i]=m.x(l);return a.join("")})}function Oe(e,t){var n=typeof t,r;return t==null||n==="boolean"?_e(t):(n==="number"?ye:n==="string"?(r=ne(t))?(t=r,ut):Ni:t instanceof ne?ut:t instanceof Date?Mi:vi(t)?_i:Array.isArray(t)?ki:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?$i:ye)(e,t)}function Ei(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ci(e){return function(){return e}}function Ti(e){return+e}var ct=[0,1];function Y(e){return e}function De(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ci(isNaN(t)?NaN:.5)}function Ii(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Di(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=De(i,r),o=n(s,o)):(r=De(r,i),o=n(o,s)),function(a){return o(r(a))}}function Wi(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=De(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var u=rn(e,a,1,r)-1;return o[u](i[u](a))}}function Pi(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ri(){var e=ct,t=ct,n=Oe,r,i,o,s=Y,a,u,l;function f(){var h=Math.min(e.length,t.length);return s!==Y&&(s=Ii(e[0],e[h-1])),a=h>2?Wi:Di,u=l=null,m}function m(h){return h==null||isNaN(h=+h)?o:(u||(u=a(e.map(r),t,n)))(r(s(h)))}return m.invert=function(h){return s(i((l||(l=a(t,e.map(r),ye)))(h)))},m.domain=function(h){return arguments.length?(e=Array.from(h,Ti),f()):e.slice()},m.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},m.rangeRound=function(h){return t=Array.from(h),n=Ei,f()},m.clamp=function(h){return arguments.length?(s=h?!0:Y,f()):s!==Y},m.interpolate=function(h){return arguments.length?(n=h,f()):n},m.unknown=function(h){return arguments.length?(o=h,m):o},function(h,w){return r=h,i=w,f()}}function qi(){return Ri()(Y,Y)}function Vi(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xe(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Z(e){return e=xe(Math.abs(e)),e?e[1]:NaN}function Bi(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function zi(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Fi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function we(e){if(!(t=Fi.exec(e)))throw new Error("invalid format: "+e);var t;return new je({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}we.prototype=je.prototype;function je(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}je.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Hi(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Ft;function Oi(e,t){var n=xe(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Ft=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+xe(e,Math.max(0,t+o-1))[0]}function ft(e,t){var n=xe(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const dt={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Vi,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ft(e*100,t),r:ft,s:Oi,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ht(e){return e}var pt=Array.prototype.map,mt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ji(e){var t=e.grouping===void 0||e.thousands===void 0?ht:Bi(pt.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?ht:zi(pt.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(m){m=we(m);var h=m.fill,w=m.align,b=m.sign,$=m.symbol,v=m.zero,x=m.width,y=m.comma,k=m.precision,c=m.trim,d=m.type;d==="n"?(y=!0,d="g"):dt[d]||(k===void 0&&(k=12),c=!0,d="g"),(v||h==="0"&&w==="=")&&(v=!0,h="0",w="=");var _=$==="$"?n:$==="#"&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",p=$==="$"?r:/[%p]/.test(d)?s:"",S=dt[d],T=/[defgprs%]/.test(d);k=k===void 0?6:/[gprs]/.test(d)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function C(g){var A=_,D=p,R,H,N;if(d==="c")D=S(g)+D,g="";else{g=+g;var I=g<0||1/g<0;if(g=isNaN(g)?u:S(Math.abs(g),k),c&&(g=Hi(g)),I&&+g==0&&b!=="+"&&(I=!1),A=(I?b==="("?b:a:b==="-"||b==="("?"":b)+A,D=(d==="s"?mt[8+Ft/3]:"")+D+(I&&b==="("?")":""),T){for(R=-1,H=g.length;++R<H;)if(N=g.charCodeAt(R),48>N||N>57){D=(N===46?i+g.slice(R+1):g.slice(R))+D,g=g.slice(0,R);break}}}y&&!v&&(g=t(g,1/0));var P=A.length+g.length+D.length,W=P<x?new Array(x-P+1).join(h):"";switch(y&&v&&(g=t(W+g,W.length?x-D.length:1/0),W=""),w){case"<":g=A+g+D+W;break;case"=":g=A+W+g+D;break;case"^":g=W.slice(0,P=W.length>>1)+A+g+D+W.slice(P);break;default:g=W+A+g+D;break}return o(g)}return C.toString=function(){return m+""},C}function f(m,h){var w=l((m=we(m),m.type="f",m)),b=Math.max(-8,Math.min(8,Math.floor(Z(h)/3)))*3,$=Math.pow(10,-b),v=mt[8+b/3];return function(x){return w($*x)+v}}return{format:l,formatPrefix:f}}var le,Le,Ht;Li({thousands:",",grouping:[3],currency:["$",""]});function Li(e){return le=ji(e),Le=le.format,Ht=le.formatPrefix,le}function Ui(e){return Math.max(0,-Z(Math.abs(e)))}function Xi(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Z(t)/3)))*3-Z(Math.abs(e)))}function Yi(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Z(t)-Z(e))+1}function Gi(e,t,n,r){var i=dn(e,t,n),o;switch(r=we(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=Xi(i,s))&&(r.precision=o),Ht(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Yi(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Ui(i))&&(r.precision=o-(r.type==="%")*2);break}}return Le(r)}function Ki(e){var t=e.domain;return e.ticks=function(n){var r=t();return fn(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Gi(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,f=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);f-- >0;){if(l=Se(s,a,n),l===u)return r[i]=s,r[o]=a,t(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function X(){var e=qi();return e.copy=function(){return Pi(e,X())},Rt.apply(e,arguments),Ki(e)}const Ot=M.createContext(null),J=()=>{const e=M.useContext(Ot);if(!e)throw Error("WellMapState can only be used by children of the WellMap component!");return e},We=({wellboreId:e,slot:t,isSelected:n,setSelected:r,setDepth:i,interactive:o,color:s="white"})=>{const a=J(),u=a(N=>N.wellboresById),l=a(N=>N.wellboresByName),f=a(N=>N.measures.ratio),m=a(N=>N.domain),h=a(N=>N.measures.range),w=a(N=>N.activeDepths),b=a(N=>N.slotsById),$=a(N=>N.styles),v=a(N=>N.measures.getSlotPosition),x=M.useMemo(()=>u[e]||null,[e,u]),y=M.useMemo(()=>{var N;if(x&&x.parent){const I=(N=l[x.parent])==null?void 0:N.id;return I?b[I]:0}return null},[x,l,b]),k=M.useMemo(()=>X().domain(m).range(h),[m,h]),[c,d]=M.useMemo(()=>[v(y!==null?y:t),v(t)],[t,y,v]),_=M.useMemo(()=>f?Math.min(15,f*24):0,[f]),p=M.useMemo(()=>f>0?f*10:0,[f]),S=M.useCallback((N,I,P,W)=>{const q=Q();if(q.moveTo(N,P),N!==I)if(W-P>p){const oe=P+p;q.arcTo(I,P,I,oe,p)}else q.lineTo(I,P);return q.lineTo(I,W),q.toString()},[p]),{active:T,inactive:C,kickoff:g,termination:A}=M.useMemo(()=>{let N=null,I=null,P=0,W=0,q=null;if(x){const oe=w[x.id];let Ue=-x.depthReferenceElevation;if(x.kickoffDepthMsl!==null&&(Ue=x.kickoffDepthMsl,q=k(x.kickoffDepthMsl)),W=k(Ue),P=k(x.depthMdMsl),oe!==void 0){const ve=k(oe);N=[c,d,W,ve],ve>W&&(I=[d,d,ve,P])}else I=[c,d,W,P]}return{active:N,inactive:I,kickoff:q,termination:P}},[k,x,w,c,d]),D=M.useMemo(()=>{const N=$.darkMode?0:240;return`rgba(${N}, ${N}, ${N}, .9)`},[$.darkMode]);if(!x)return null;const R=p/2,H=`${R},${R/2}`;return E.jsxs("g",{className:`track ${n?"selected":""} ${o?"interactive":""}`,style:{pointerEvents:"painted",opacity:!o||n?1:.75},onClick:o?N=>{let I=0;if(i&&N&&N.clientY){const[,P]=Ne(N),W=de(P,h[0],h[1]);I=k.invert(W),i(I)}r&&!n&&r(e,I)}:void 0,children:[E.jsx("title",{children:x.name}),T&&E.jsx(E.Fragment,{children:E.jsx("path",{d:S(...T),stroke:s,strokeWidth:p,fill:"none",style:{filter:`drop-shadow( 1px 1px 2px ${D})`}})}),C&&E.jsxs(E.Fragment,{children:[E.jsx("path",{d:S(...C),stroke:s,strokeWidth:p,fill:"none",strokeDasharray:H,style:{filter:`drop-shadow( 1px 1px 2px ${D})`,pointerEvents:"none"}}),E.jsx("path",{d:S(...C),stroke:s,strokeWidth:p,strokeOpacity:0,fill:"none"})]}),g&&E.jsx("circle",{cx:c,cy:g,r:p*.8,fill:s,stroke:"#00000080",strokeWidth:.5,style:{filter:`drop-shadow( 1px 1px 1px ${D})`}}),_>=8&&E.jsx("text",{x:d,y:A+_,fontSize:`${_-2}px`,fill:$.textColor,fillOpacity:n?1:.75,textAnchor:"middle",dominantBaseline:"middle",fontFamily:"monospace",fontWeight:"bold",style:{textDecoration:n?"underline":""},children:x.name.replace(x.well,"")||"Main"}),f>=.5&&E.jsxs("text",{x:d,y:A+_*2,fontSize:`${_*.75-2}px`,fill:$.textColor,fillOpacity:n?1:.75,textAnchor:"middle",dominantBaseline:"top",fontFamily:"monospace",children:[x.depthMdMsl,"m"]})]})};try{We.displayName="Track",We.__docgenInfo={description:"",displayName:"Track",props:{wellboreId:{defaultValue:null,description:"",name:"wellboreId",required:!0,type:{name:"string"}},slot:{defaultValue:null,description:"",name:"slot",required:!0,type:{name:"number"}},isSelected:{defaultValue:null,description:"",name:"isSelected",required:!0,type:{name:"boolean"}},setSelected:{defaultValue:null,description:"",name:"setSelected",required:!1,type:{name:"((wellbore: string, depth: number) => void) | undefined"}},setDepth:{defaultValue:null,description:"",name:"setDepth",required:!1,type:{name:"((depth: number) => void) | undefined"}},interactive:{defaultValue:null,description:"",name:"interactive",required:!0,type:{name:"boolean"}},color:{defaultValue:{value:"white"},description:"",name:"color",required:!1,type:{name:"string | undefined"}}}}}catch{}var Zi={value:()=>{}};function jt(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new fe(n)}function fe(e){this._=e}function Qi(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}fe.prototype=jt.prototype={constructor:fe,on:function(e,t){var n=this._,r=Qi(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Ji(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=gt(n[i],e.name,t);else if(t==null)for(i in n)n[i]=gt(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new fe(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Ji(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function gt(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Zi,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}const eo={passive:!1},re={capture:!0,passive:!1};function $e(e){e.stopImmediatePropagation()}function K(e){e.preventDefault(),e.stopImmediatePropagation()}function to(e){var t=e.document.documentElement,n=U(e).on("dragstart.drag",K,re);"onselectstart"in t?n.on("selectstart.drag",K,re):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function no(e,t){var n=e.document.documentElement,r=U(e).on("dragstart.drag",null);t&&(r.on("click.drag",K,re),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ue=e=>()=>e;function Pe(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:u,dy:l,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:f}})}Pe.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ro(e){return!e.ctrlKey&&!e.button}function io(){return this.parentNode}function oo(e,t){return t??{x:e.x,y:e.y}}function so(){return navigator.maxTouchPoints||"ontouchstart"in this}function ao(){var e=ro,t=io,n=oo,r=so,i={},o=jt("start","drag","end"),s=0,a,u,l,f,m=0;function h(c){c.on("mousedown.drag",w).filter(r).on("touchstart.drag",v).on("touchmove.drag",x,eo).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(c,d){if(!(f||!e.call(this,c,d))){var _=k(this,t.call(this,c,d),c,d,"mouse");_&&(U(c.view).on("mousemove.drag",b,re).on("mouseup.drag",$,re),to(c.view),$e(c),l=!1,a=c.clientX,u=c.clientY,_("start",c))}}function b(c){if(K(c),!l){var d=c.clientX-a,_=c.clientY-u;l=d*d+_*_>m}i.mouse("drag",c)}function $(c){U(c.view).on("mousemove.drag mouseup.drag",null),no(c.view,l),K(c),i.mouse("end",c)}function v(c,d){if(e.call(this,c,d)){var _=c.changedTouches,p=t.call(this,c,d),S=_.length,T,C;for(T=0;T<S;++T)(C=k(this,p,c,d,_[T].identifier,_[T]))&&($e(c),C("start",c,_[T]))}}function x(c){var d=c.changedTouches,_=d.length,p,S;for(p=0;p<_;++p)(S=i[d[p].identifier])&&(K(c),S("drag",c,d[p]))}function y(c){var d=c.changedTouches,_=d.length,p,S;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),p=0;p<_;++p)(S=i[d[p].identifier])&&($e(c),S("end",c,d[p]))}function k(c,d,_,p,S,T){var C=o.copy(),g=Ne(T||_,d),A,D,R;if((R=n.call(c,new Pe("beforestart",{sourceEvent:_,target:h,identifier:S,active:s,x:g[0],y:g[1],dx:0,dy:0,dispatch:C}),p))!=null)return A=R.x-g[0]||0,D=R.y-g[1]||0,function H(N,I,P){var W=g,q;switch(N){case"start":i[S]=H,q=s++;break;case"end":delete i[S],--s;case"drag":g=Ne(P||I,d),q=s;break}C.call(N,c,new Pe(N,{sourceEvent:I,subject:R,target:h,identifier:S,active:q,x:g[0]+A,y:g[1]+D,dx:g[0]-W[0],dy:g[1]-W[1],dispatch:C}),p)}}return h.filter=function(c){return arguments.length?(e=typeof c=="function"?c:ue(!!c),h):e},h.container=function(c){return arguments.length?(t=typeof c=="function"?c:ue(c),h):t},h.subject=function(c){return arguments.length?(n=typeof c=="function"?c:ue(c),h):n},h.touchable=function(c){return arguments.length?(r=typeof c=="function"?c:ue(!!c),h):r},h.on=function(){var c=o.on.apply(o,arguments);return c===o?h:c},h.clickDistance=function(c){return arguments.length?(m=(c=+c)*c,h):Math.sqrt(m)},h}const Re=({depth:e,setDepth:t,ruler:n=!0,rulerWidth:r=4.5})=>{const i=M.useRef(null),o=J(),s=o(x=>x.domain),a=o(x=>x.measures.range),u=o(x=>x.measures.tracksWidth),l=o(x=>x.styles),[f,m]=M.useState(!1),h=M.useMemo(()=>X().domain(s).range(a),[s,a]),w=M.useMemo(()=>{const x=l.depthAxisWidth*.65,y=Q();return y.moveTo(0,-x/2),y.lineTo(l.depthAxisWidth/2,-x/2),y.lineTo(l.depthAxisWidth,0),y.lineTo(l.depthAxisWidth/2,x/2),y.lineTo(0,x/2),y.lineTo(0,-x/2),y.toString()},[l.depthAxisWidth]),b=M.useMemo(()=>h(e),[e,h]),$=M.useMemo(()=>{const x=l.darkMode?0:240;return`rgba(${x}, ${x}, ${x}, .7)`},[l.darkMode]);M.useEffect(()=>{function x(c){if(!i.current)return;const d=h.range(),_=de(c.y,d[0],d[1]),p=h.invert(_);t&&t(p)}function y(){m(!0),document.body.style.cursor="grab"}function k(){m(!1),document.body.style.cursor=""}if(i.current&&t){const c=ao();c.on("drag",x),c.on("start",y),c.on("end",k),U(i.current).call(c)}},[t,h]);const v=M.useCallback(x=>{if(t)if(x.key==="ArrowDown"||x.key==="ArrowUp"){const y=e!==void 0?e:s[0];let k=1;x.shiftKey?k*=25:x.ctrlKey&&(k*=.1);const c=x.key==="ArrowDown"?y+k:y-k;t(de(c,s[0],s[1]))}else x.key==="End"?t(s[1]):x.key==="Home"&&t(s[0])},[e,t,s]);return E.jsxs("g",{ref:i,tabIndex:0,onKeyDown:v,style:{pointerEvents:"painted",cursor:"grab",transform:`translate(0,${b}px)`,outline:"none"},children:[E.jsx("path",{d:w,stroke:l.cursorColor,strokeWidth:2,fill:"rgba(256,256,256,0.25)",filter:`drop-shadow( 1px 1px 2px ${$})`,opacity:.9}),n&&E.jsxs(E.Fragment,{children:[E.jsx("line",{x1:l.depthAxisWidth,y1:0,x2:l.depthAxisWidth+u,y2:0,stroke:l.rulerColor,strokeWidth:r,strokeOpacity:.25}),f&&E.jsx("text",{x:l.depthAxisWidth+u,textAnchor:"end",fontFamily:"monospace",fill:l.cursorColor,children:e.toFixed(1)})]})]})};try{Re.displayName="DepthCursor",Re.__docgenInfo={description:"",displayName:"DepthCursor",props:{depth:{defaultValue:null,description:"",name:"depth",required:!0,type:{name:"number"}},setDepth:{defaultValue:null,description:"",name:"setDepth",required:!1,type:{name:"((depth: number) => void) | undefined"}},ruler:{defaultValue:{value:"true"},description:"",name:"ruler",required:!1,type:{name:"boolean | undefined"}},rulerWidth:{defaultValue:{value:"4.5"},description:"",name:"rulerWidth",required:!1,type:{name:"number | undefined"}}}}}catch{}const qe=({wellboreId:e,opacity:t=.75,width:n=3,dashed:r=!1})=>{const i=J(),o=i(d=>d.wellboresById),s=i(d=>d.wellboresByName),a=i(d=>d.measures.ratio),u=i(d=>d.domain),l=i(d=>d.measures.range),f=i(d=>d.slotsById),m=i(d=>d.styles),h=i(d=>d.measures.getSlotPosition),w=M.useMemo(()=>o[e]||null,[e,o]),b=M.useMemo(()=>X().domain(u).range(l),[u,l]),$=M.useMemo(()=>a>0?a*10:0,[a]),v=M.useMemo(()=>{const d=[];if(w){let _=f[w.id],p=w;const S=h(_),T=b(w.depthMdMsl);for(d.push([S,T]);p;){const C=p.parent?s[p.parent]:void 0,g=p.kickoffDepthMsl!==null?p.kickoffDepthMsl:-p.depthReferenceElevation,A=C?f[C.id]:_,D=h(A),R=b(g);d.push([D,R]),_=A,p=C}}return d.reverse()},[w,b,h,f,s]),x=M.useMemo(()=>{if(w){const d=w.kickoffDepthMsl!==null?w.kickoffDepthMsl:-w.depthReferenceElevation;return b(d)}return null},[w,b]),y=M.useCallback(d=>{const _=Q();if(d.length<2)return"";let p=d[0][0],S=d[0][1];_.moveTo(p,S);for(let T=1;T<d.length;T++){const C=d[T][0],g=d[T][1];if(_.lineTo(p,S),p!==C)if(g-S>$){const A=S+$;_.arcTo(C,S,C,A,$)}else _.lineTo(C,S);_.lineTo(C,g),p=C,S=g}return _.toString()},[$]),k=$/2,c=`${k},${k/2}`;return v.length<2?null:E.jsxs("g",{style:{filter:"drop-shadow( 0px 0px 1px rgba(0,0,0,0.7))",pointerEvents:"none"},children:[E.jsx("path",{d:y(v),stroke:m.activeTrackColor,strokeWidth:a*n,fill:"none",strokeDasharray:r?c:"",strokeOpacity:t}),E.jsx("line",{x1:v[v.length-1][0]-$*.5,x2:v[v.length-1][0]+$*.5,y1:v[v.length-1][1],y2:v[v.length-1][1],stroke:m.activeTrackColor,strokeWidth:a*n*.75,strokeOpacity:t}),x!==null&&E.jsx("circle",{cx:v[v.length-2][0],cy:v[v.length-2][1],r:$*1,fill:"none",stroke:m.activeTrackColor,strokeWidth:a,strokeOpacity:t}),E.jsx("line",{x1:v[0][0]-$*.5,x2:v[0][0]+$*.5,y1:v[0][1],y2:v[0][1],stroke:m.activeTrackColor,strokeWidth:a*n*.75,strokeOpacity:t})]})};try{qe.displayName="ActiveTrack",qe.__docgenInfo={description:"",displayName:"ActiveTrack",props:{wellboreId:{defaultValue:null,description:"",name:"wellboreId",required:!0,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string | undefined"}},opacity:{defaultValue:{value:"0.75"},description:"",name:"opacity",required:!1,type:{name:"number | undefined"}},width:{defaultValue:{value:"3"},description:"",name:"width",required:!1,type:{name:"number | undefined"}},dashed:{defaultValue:{value:"false"},description:"",name:"dashed",required:!1,type:{name:"boolean | undefined"}}}}}catch{}const Ve=({selected:e,setSelected:t,depth:n,setDepth:r,color:i,colorMap:o,interactive:s,depthCursor:a,children:u})=>{const[l,f]=Yt(),m=J(),h=m(g=>g.wellboreIds),w=m(g=>g.wellboresById),b=m(g=>g.setMeasure),$=m(g=>g.domain),v=m(g=>g.measures.range),x=m(g=>g.measures.trackWidth),y=m(g=>g.slotsById),k=m(g=>g.styles),c=M.useRef(null),d=M.useRef(null),_=M.useRef(null);M.useEffect(()=>{b(f.width,f.height)},[f,b,h]);const p=M.useMemo(()=>X().domain($).range(v),[$,v]),S=M.useMemo(()=>{const g=Math.floor(p.domain()[0]/100)*100,A=Math.ceil((p.domain()[1]-g)/100);return Qe(p).tickValues(hn(0,A).map(R=>R*100+g)).tickSizeInner(k.depthAxisWidth)},[p,k]),T=M.useMemo(()=>{const g=new Set;h.forEach(N=>{const I=w[N];I&&I.kickoffDepthMsl&&g.add(I.kickoffDepthMsl)});const A=5.5,D=Array.from(g).sort((N,I)=>N-I),R=new Set;return D.forEach((N,I)=>{const P=I>0?D[I-1]:null;if(P){const W=p(P),q=p(N);Math.abs(q-W)<A&&R.add(N)}}),Qe(p).tickValues(D).tickSizeInner(-f.width).tickSizeOuter(2).offset(0).tickPadding(4).tickFormat(N=>R.has(N.valueOf())?"":Le(",.0f")(N))},[p,h,f.width,w]),C=M.useMemo(()=>h.map(g=>({wellboreId:g,slot:y[g]})).sort((g,A)=>(g.wellboreId===e?1/0:0)-(A.wellboreId===e?1/0:0)||g.slot-A.slot),[h,y,e]);return M.useEffect(()=>{if(d.current){const g=U(d.current);g.call(S),g.selectAll(".tick>text").remove(),g.selectAll("path.domain").remove(),g.selectAll(".tick>line").attr("stroke",k.depthAxisColor)}},[S,k]),M.useEffect(()=>{if(_.current){const g=U(_.current);g.call(T),g.selectAll(".tick").attr("stroke-width",.5),g.selectAll("path.domain").attr("stroke",k.kickoffAxisColor)}},[T,k]),E.jsx("svg",{ref:l,style:{flex:"1 1 auto",width:"100%",height:"100%"},className:"well-map",children:x>0&&f.height>0&&E.jsxs(E.Fragment,{children:[E.jsx("g",{className:"data-layer",transform:`translate(${k.depthAxisWidth}, 0)`,children:u}),E.jsx("g",{ref:d,transform:`translate(${k.depthAxisWidth}, 0)`}),E.jsx("g",{ref:_,transform:`translate(${k.depthAxisWidth}, 0)`}),E.jsx("g",{ref:c,className:"tracks",transform:`translate(${k.depthAxisWidth}, 0)`,children:C.map(g=>E.jsx(We,{wellboreId:g.wellboreId,slot:g.slot,color:o&&o[g.wellboreId]||i||"silver",isSelected:!!(e&&e===g.wellboreId),setSelected:t,interactive:!!s,setDepth:r},g.wellboreId))}),E.jsx("g",{className:"active-track",transform:`translate(${k.depthAxisWidth}, 0)`,children:e&&E.jsx(qe,{wellboreId:e,opacity:.8})}),s&&a&&n!==void 0&&E.jsx(Re,{depth:n,setDepth:r})]})})};try{Ve.displayName="Schematic",Ve.__docgenInfo={description:"",displayName:"Schematic",props:{selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"string | undefined"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string | undefined"}},setSelected:{defaultValue:null,description:"",name:"setSelected",required:!1,type:{name:"((wellbore: string, depth: number) => void) | undefined"}},depth:{defaultValue:null,description:"",name:"depth",required:!1,type:{name:"number | undefined"}},setDepth:{defaultValue:null,description:"",name:"setDepth",required:!1,type:{name:"((depth: number) => void) | undefined"}},colorMap:{defaultValue:null,description:"",name:"colorMap",required:!1,type:{name:"Record<string, string> | undefined"}},interactive:{defaultValue:null,description:"",name:"interactive",required:!1,type:{name:"boolean | undefined"}},depthCursor:{defaultValue:null,description:"",name:"depthCursor",required:!1,type:{name:"boolean | undefined"}}}}}catch{}const Be=({depth:e,color:t})=>E.jsxs("div",{style:{textAlign:"center",fontSize:"90%",fontFamily:"monospace",color:t},children:[e.toFixed(1)," mD MSL"]});try{Be.displayName="DepthReadout",Be.__docgenInfo={description:"",displayName:"DepthReadout",props:{depth:{defaultValue:null,description:"",name:"depth",required:!0,type:{name:"number"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"string"}}}}}catch{}const Lt={depthAxisWidth:30,depthAxisColor:"#555",kickoffAxisColor:"#aaa",cursorColor:"white",readoutColor:"orange",rulerColor:"red",activeTrackColor:"white",textColor:"white",darkMode:!0},lo=50,uo=30,co=()=>Ut((e,t)=>({_allWellbores:[],wellbores:[],wellboreIds:[],wellboresByName:{},wellboresById:{},segments:{},slotsById:{},activeDepths:{},tracksOrder:[],depth:0,domain:[0,0],styles:Lt,setStyles:n=>e({styles:n}),measures:{padding:{top:0,bottom:0,left:0,right:0},ratio:0,svgWidth:0,svgHeight:0,tracksWidth:0,trackWidth:0,range:[0,0],getSlotPosition:()=>0},setDepth:n=>{e({depth:n})},setMeasure:(n,r)=>{const i=t().wellbores.length,o=n,s=r,a=n-uo,u=i>0?a/i:0,l=Math.min(1,u/lo),f={top:20*l+5,bottom:20*l+20,left:0,right:0},m=[0+f.top,r-(f.top+f.bottom)];e({measures:{padding:f,ratio:l,svgWidth:o,svgHeight:s,tracksWidth:a,trackWidth:u,range:m,getSlotPosition:b=>b*u+u/2}})},setWellbores:n=>{const r=n,i=r.filter(b=>b.drilled),o=i.map(b=>b.id),s=r.reduce((b,$)=>({...b,[$.id]:$}),{}),a=r.reduce((b,$)=>({...b,[$.name]:$}),{}),u=Xt(a,i),l=Object.keys(u).map(b=>({sq:u[b][1],id:b})).sort((b,$)=>$.sq-b.sq).map(b=>b.id),f={};for(let b=0;b<l.length;b++){const $=l[b];if(f[$]!==void 0)continue;const v=s[$];if(v&&(v.status==="operating"||v.status==="drilling")){f[$]=v.depthMdMsl;let x=v;for(;x&&x.kickoffDepthMsl!==null&&x.parent;){const y=a[x.parent];if(!y)break;f[y.id]?f[y.id]=Math.max(f[y.id],x.kickoffDepthMsl):f[y.id]=x.kickoffDepthMsl,x=y}}}const m=l.reduce((b,$,v)=>({...b,[$]:v}),{}),h=o.reduce((b,$)=>{const v=s[$];if(v){let x=-v.depthReferenceElevation;v.kickoffDepthMsl&&(x=v.kickoffDepthMsl),x<b[0]&&(b[0]=x),v.depthMdMsl>b[1]&&(b[1]=v.depthMdMsl)}return b},[1/0,-1/0]);e({_allWellbores:r,wellbores:i,wellboreIds:o,wellboresById:s,wellboresByName:a,segments:u,tracksOrder:l,slotsById:m,activeDepths:f,domain:h})}})),yt=({wellIdentifier:e,selected:t,onSelect:n,depth:r,onDepthChanged:i,color:o,colors:s,interactive:a=!0,headless:u=!1,depthCursor:l=!0,theme:f={...Lt},children:m})=>{const h=M.useContext(bt),w=M.useMemo(()=>co(),[]),b=w(p=>p.setWellbores),$=w(p=>p.wellbores),v=w(p=>p.slotsById),x=w(p=>p.measures.svgWidth),y=w(p=>p.domain),k=w(p=>p.setStyles),c=w(p=>p.setDepth),d=M.useMemo(()=>{let p=r;return p!==void 0&&(p=de(p,y[0],y[1])),p},[r,y]);M.useEffect(()=>{k(f)},[f,k]),M.useEffect(()=>{c(d)},[d,c]),M.useEffect(()=>{if(h){const p=h.connect();p&&p.query("wellbore-headers",{well:e}).then(S=>{S&&Array.isArray(S)&&b(S)})}},[h,e,b]);const _=M.useMemo(()=>{if(s)return typeof s=="function"?$.reduce((p,S)=>({...p,[S.id]:s(S,v[S.id])}),{}):s},[$,v,s]);return E.jsx("div",{style:{flex:"1 1 auto",display:"flex",flexDirection:"column",userSelect:"none",boxSizing:"border-box",height:"100%",fontFamily:"sans-serif",color:f.textColor,zIndex:10},children:E.jsxs(Ot.Provider,{value:w,children:[!u&&E.jsxs("div",{style:{textAlign:"center",fontSize:`${Math.min(15,.15*x)}px`},children:[E.jsx("div",{style:{textTransform:"uppercase",fontSize:"9pt",textAlign:"left",opacity:.5},children:"Well Map"}),E.jsx("div",{children:e}),a&&d!==void 0&&E.jsx(Be,{depth:d,color:f.readoutColor})]}),E.jsx(Ve,{selected:t,setSelected:n,depth:d,setDepth:i,color:o,colorMap:_,interactive:a,depthCursor:l,children:m})]})})};try{yt.displayName="WellMap",yt.__docgenInfo={description:`This HTML component visualizes the trajectories of a well side-by-side according to the measured depth. It shows
each wellbore from its kickoff depth to the terminal end point.

The well map supports various interactions, which can be used to control selection and camera position/focus.
You can customize colors by providing a color dictionary or color selection function via the \`colors\` prop.

For other colors, use the \`theme\` prop.`,displayName:"WellMap",props:{wellIdentifier:{defaultValue:null,description:"",name:"wellIdentifier",required:!0,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"string | undefined"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"((wellbore: string, depth: number) => void) | undefined"}},depth:{defaultValue:null,description:"",name:"depth",required:!1,type:{name:"number | undefined"}},onDepthChanged:{defaultValue:null,description:"",name:"onDepthChanged",required:!1,type:{name:"((depth: number) => void) | undefined"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string | undefined"}},colors:{defaultValue:null,description:"",name:"colors",required:!1,type:{name:"Record<string, string> | ((wellbore: WellboreHeader, slot: number) => string) | undefined"}},interactive:{defaultValue:{value:"true"},description:"",name:"interactive",required:!1,type:{name:"boolean | undefined"}},headless:{defaultValue:{value:"false"},description:"",name:"headless",required:!1,type:{name:"boolean | undefined"}},depthCursor:{defaultValue:{value:"true"},description:"",name:"depthCursor",required:!1,type:{name:"boolean | undefined"}},theme:{defaultValue:{value:"{ ...DarkTheme }"},description:"",name:"theme",required:!1,type:{name:"WellMapStyles | undefined"}}}}}catch{}const be=()=>{const e=M.useContext(bt),[t,n]=M.useState(null);return M.useEffect(()=>{if(e){const r=e.connect();n(()=>r)}},[e]),t};try{be.displayName="useData",be.__docgenInfo={description:"Access the store from the `DataProvider` within a component to retrieve data.",displayName:"useData",props:{}}}catch{}const fo="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ze=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=fo[n[e]&63];return t};const xt=({colorScreen:e="gray",colorPerforation:t="orange"})=>{const n=be(),[r,i]=M.useState(null),[o,s]=M.useState(null),a=J(),u=a(c=>c.wellboreIds),l=a(c=>c.wellboresById),f=a(c=>c.domain),m=a(c=>c.measures.range),h=a(c=>c.measures.ratio),w=a(c=>c.slotsById),b=a(c=>c.styles),$=a(c=>c.measures.getSlotPosition),v=M.useMemo(()=>X().domain(f).range(m),[f,m]);M.useEffect(()=>{if(n){const c=u.map(_=>n.get("completion-tools",_)),d=u.map(_=>n.get("perforations",_));Promise.all(c).then(_=>{if(_){const p=_.reduce((S,T,C)=>({...S,[u[C]]:T!==null?T.filter(g=>g.category==="screen"):[]}),{});i(p)}}),Promise.all(d).then(_=>{const p=_.reduce((S,T,C)=>({...S,[u[C]]:T||[]}),{});s(p)})}},[u,n]);const x=M.useMemo(()=>{const c=[];return r&&o&&u.forEach(d=>{const _=l[d],p=_.kickoffDepthMsl!==null?_.kickoffDepthMsl:_.depthReferenceElevation,S=w[d],T=$(S);(r[d]?Xe(r[d].filter(A=>p===void 0||A.mdBottomMsl>p),A=>A.mdTopMsl,A=>A.mdBottomMsl):[]).forEach(A=>{c.push({id:ze(),type:"screen",x:T,y1:v(A.start),y2:v(A.end)})}),(o[d]?Xe(o[d].filter(A=>A.status==="Open"&&(p===void 0||A.mdBottomMsl>p)),A=>A.mdTopMsl,A=>A.mdBottomMsl):[]).forEach(A=>{c.push({id:ze(),type:"perforation",x:T,y1:v(A.start),y2:v(A.end)})})}),c},[r,o,v,$,w,u,l]),y=M.useCallback(c=>{if(h){const d=10*h,_=18*h,p=Q();return p.moveTo(c.x-_,c.y1),p.lineTo(c.x-d,c.y1),p.lineTo(c.x-d,c.y2),p.lineTo(c.x-_,c.y2),p.moveTo(c.x+_,c.y1),p.lineTo(c.x+d,c.y1),p.lineTo(c.x+d,c.y2),p.lineTo(c.x+_,c.y2),p.toString()}return""},[h]),k=M.useMemo(()=>{const c=b.darkMode?0:240;return`rgba(${c}, ${c}, ${c}, .9)`},[b.darkMode]);return x?E.jsx("g",{children:x.map(c=>E.jsxs("g",{style:{cursor:"help",filter:`drop-shadow( 1px 1px 2px ${k})`,pointerEvents:"bounding-box"},children:[E.jsx("title",{children:c.type}),E.jsx("path",{d:y(c),stroke:c.type==="perforation"?t:e,strokeWidth:1.5,fill:"none"})]},c.id))}):null};try{xt.displayName="WellMapCompletionIntervals",xt.__docgenInfo={description:"Completion intervals display addon for `WellMap`",displayName:"WellMapCompletionIntervals",props:{colorScreen:{defaultValue:{value:"gray"},description:"",name:"colorScreen",required:!1,type:{name:"string | undefined"}},colorPerforation:{defaultValue:{value:"orange"},description:"",name:"colorPerforation",required:!1,type:{name:"string | undefined"}}}}}catch{}const wt=({color:e="#ccc"})=>{const t=be(),[n,r]=M.useState(null),i=J(),o=i(y=>y.wellboreIds),s=i(y=>y.wellboresById),a=i(y=>y.domain),u=i(y=>y.measures.range),l=i(y=>y.measures.ratio),f=i(y=>y.measures.tracksWidth),m=i(y=>y.slotsById),h=i(y=>y.styles),w=i(y=>y.measures.getSlotPosition),b=M.useMemo(()=>X().domain(a).range(u),[a,u]);M.useEffect(()=>{if(t){const y=o.map(k=>t.get("casings",k));Promise.all(y).then(k=>{const c=k.reduce((d,_,p)=>({...d,[o[p]]:_}),{});r(c)})}},[o,t]);const $=M.useMemo(()=>{const y=[];return n&&o.forEach(k=>{const c=s[k],d=c.kickoffDepthMsl!==null?c.kickoffDepthMsl:c.depthReferenceElevation,_=m[k],p=w(_);n[k]&&n[k].filter(S=>S.type==="Shoe"&&(d===null||S.mdBottomMsl>d)).forEach(S=>{const T=b(S.mdBottomMsl);y.push({id:ze(),name:`${S.properties.Diameter} ${S.properties.Type}`,x:p,y:T})})}),y},[n,b,w,m,o,s]),v=M.useMemo(()=>{if(l){const y=7*l,k=16*l,c=k-y,d=Q();return d.moveTo(-y,-c*2),d.lineTo(-y,0),d.lineTo(-k,0),d.lineTo(-y-2,-c),d.lineTo(-y-2,-c*2),d.lineTo(-y,-c*2),d.closePath(),d.moveTo(y,-c*2),d.lineTo(y,0),d.lineTo(k,0),d.lineTo(y+2,-c),d.lineTo(y+2,-c*2),d.lineTo(y,-c*2),d.closePath(),d.toString()}return""},[l]),x=M.useMemo(()=>{const y=h.darkMode?0:240;return`rgba(${y}, ${y}, ${y}, .9)`},[h.darkMode]);return $?E.jsx("g",{children:$.map(y=>E.jsxs(M.Fragment,{children:[E.jsx("line",{x1:0,y1:y.y,x2:f,y2:y.y,stroke:e,strokeOpacity:.25,strokeDasharray:"2,2"}),E.jsx("path",{d:v,stroke:"black",strokeWidth:.25,fill:e,transform:`translate(${y.x},${y.y})`,style:{filter:`drop-shadow( 1px 1px 2px ${x})`,pointerEvents:"painted",cursor:"help"},children:E.jsx("title",{children:y.name})},y.id)]},y.id))}):null};try{wt.displayName="WellMapCasingShoes",wt.__docgenInfo={description:"Casing shoes display addon for `WellMap`",displayName:"WellMapCasingShoes",props:{color:{defaultValue:{value:"#ccc"},description:"",name:"color",required:!1,type:{name:"string | undefined"}}}}}catch{}export{ie as C,Ge as I,V as R,yt as W,J as a,xt as b,wt as c,Xt as d,He as e,qt as f,zt as g,ko as h,Oe as i,X as l,ze as n,si as o,gi as r,be as u};

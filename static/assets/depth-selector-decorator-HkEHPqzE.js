import{j as a}from"./jsx-runtime-CmIOflP4.js";import{r}from"./index-KqYmeiyw.js";import{a as D,g as j}from"./data-provider-decorator-BCAx_xlJ.js";import{b as S,w as h}from"./generators-provider-decorator-BR7wOsTW.js";import{e as w,f as C}from"./CameraManager-BTlj_2qD.js";const _=()=>{const n=r.useRef(null),o=r.useRef(null),t=r.useRef([0,0,0]),[v,c]=r.useState(!0),l=r.useContext(D),f=r.useMemo(()=>new S,[]),u=r.useCallback(i=>{if(o.current){const e=o.current.curve.getPointAt(i);e[0]+=t.current[0],e[1]+=t.current[1],e[2]+=t.current[2],dispatchEvent(new w(e))}},[]);return r.useEffect(()=>{function i(e){var m;if(o.current=null,c(!0),l){const g=l.connect();if(g){const p=e.detail.id;t.current=((m=f.getInfo(p))==null?void 0:m.position)||[0,0,0],g.get("position-logs",p).then(x=>{if(x&&(o.current=j(p,x),o.current))if(c(!1),e.detail.position){const d=e.detail.position,b=[d[0]-t.current[0],d[1]-t.current[1],d[2]-t.current[2]],s=o.current.curve.nearest(b);if(s){const E=[s.point[0]+t.current[0],s.point[1]+t.current[1],s.point[2]+t.current[2]];n.current&&(n.current.value=s.position.toString(),c(!1)),e.detail.flyTo&&dispatchEvent(new C({point:E}))}}else u(0)})}}}return addEventListener(h,i),()=>{removeEventListener(h,i)}},[l,f,u]),a.jsx("div",{style:{padding:"0.5em 0 0.5em 2px",background:"black",zIndex:1,pointerEvents:"none"},children:a.jsx("input",{ref:n,type:"range",min:0,max:1,defaultValue:0,step:1e-4,disabled:v,onChange:i=>u(Number.parseFloat(i.target.value)),style:{writingMode:"vertical-lr",accentColor:"darkgray",height:"100%",pointerEvents:"auto",opacity:o.current?1:.5}})})},P={display:"flex",flexDirection:"row",position:"absolute",height:"auto",bottom:0,top:0,left:0,right:0},y=n=>a.jsxs("div",{style:P,children:[a.jsx(_,{}),a.jsx(n,{})]});try{y.displayName="DepthSelectorDecorator",y.__docgenInfo={description:"",displayName:"DepthSelectorDecorator",props:{}}}catch{}export{y as D};

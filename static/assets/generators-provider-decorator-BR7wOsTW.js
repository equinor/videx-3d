var C=Object.defineProperty;var W=(e,t,o)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var E=(e,t,o)=>W(e,typeof t!="symbol"?t+"":t,o);import{j as c}from"./jsx-runtime-CmIOflP4.js";import{r}from"./index-KqYmeiyw.js";import{V as j}from"./CameraManager-BTlj_2qD.js";import{a as V,t as q,p as G,c as P,w as I}from"./data-provider-decorator-BCAx_xlJ.js";const A="wellbore-selected",v="wellbore-added",h="wellbore-removed";class Y extends CustomEvent{constructor(t){super(A,{detail:t})}}class T extends CustomEvent{constructor(t){super(v,{detail:t})}}class k extends CustomEvent{constructor(t){super(h,{detail:t})}}class F{constructor(){E(this,"map",new Map);this.onWellboreAdded=this.onWellboreAdded.bind(this),this.onWellboreRemoved=this.onWellboreRemoved.bind(this),addEventListener(v,this.onWellboreAdded),addEventListener(h,this.onWellboreRemoved)}onWellboreAdded(t){this.map.set(t.detail.id,{wellboreId:t.detail.id,position:t.detail.position,objectId:t.detail.objectId,objectUuid:t.detail.objectUuid})}onWellboreRemoved(t){this.map.delete(t.detail.id)}getInfo(t){return this.map.get(t)}getAll(){return this.map.values()}dispose(){removeEventListener(v,this.onWellboreAdded),removeEventListener(h,this.onWellboreRemoved)}}const M=r.createContext(null),D=r.createContext(null),L=()=>r.useContext(D),g=new j,w=({id:e,fromMsl:t,segmentsPerMeter:o=.1,simplificationThreshold:l=0,position:s=[0,0,0],visible:i=!0,onPointerClick:n,onPointerEnter:u,onPointerLeave:m,onPointerMove:p,children:x})=>{const d=r.useRef(null),_=r.useMemo(()=>({id:e,fromMsl:t,segmentsPerMeter:o,simplificationThreshold:l}),[t,e,o,l]),f=L();return r.useEffect(()=>{let b=null;if(f){const a={};n&&(a.click=n),u&&(a.enter=u),m&&(a.leave=m),p&&(a.move=p),Object.keys(a).length&&(b=f.register(d.current,a,e))}return()=>{b&&b()}},[f,n,u,m,p,e]),r.useEffect(()=>(d.current.getWorldPosition(g),dispatchEvent(new T({id:e,position:g.toArray(),objectId:d.current.id,objectUuid:d.current.uuid})),()=>{dispatchEvent(new k({id:e}))}),[e]),c.jsx(M.Provider,{value:_,children:c.jsx("object3D",{position:s,visible:i,ref:d,children:x})})};try{w.displayName="Wellbore",w.__docgenInfo={description:"The `Wellbore` component serves as a provider/container component only. It does not visualize anything alone!  \nVisualization components, such as the `BasicTrajectory`, `TubeTrajectory`, `Casings`, `CompletionTools` etc. must be\nadded as child components, which will get the data needed from the `WellboreContext` provided this component.",displayName:"Wellbore",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},fromMsl:{defaultValue:null,description:"",name:"fromMsl",required:!1,type:{name:"number | undefined"}},segmentsPerMeter:{defaultValue:{value:"0.1"},description:"",name:"segmentsPerMeter",required:!1,type:{name:"number | undefined"}},simplificationThreshold:{defaultValue:{value:"0"},description:"",name:"simplificationThreshold",required:!1,type:{name:"number | undefined"}},position:{defaultValue:{value:"[0, 0, 0]"},description:"",name:"position",required:!1,type:{name:"Vec3 | undefined"}},visible:{defaultValue:{value:"true"},description:"",name:"visible",required:!1,type:{name:"boolean | undefined"}},onPointerEnter:{defaultValue:null,description:"",name:"onPointerEnter",required:!1,type:{name:"EventEmitterCallback | undefined"}},onPointerLeave:{defaultValue:null,description:"",name:"onPointerLeave",required:!1,type:{name:"EventEmitterCallback | undefined"}},onPointerMove:{defaultValue:null,description:"",name:"onPointerMove",required:!1,type:{name:"EventEmitterCallback | undefined"}},onPointerClick:{defaultValue:null,description:"",name:"onPointerClick",required:!1,type:{name:"EventEmitterCallback | undefined"}}}}}catch{}const N=r.createContext(null);function S(e){return!!e[P]}const y=({registry:e,children:t})=>{const[o,l]=r.useState(!1),s=r.useContext(V),i=r.useMemo(()=>S(e),[e]);return r.useEffect(()=>{if(s)if(s.isRemote&&i)s.connectByMessagePort().then(n=>{if(n)e.connectRemoteStore(q(n,[n])).then(()=>l(!0));else throw Error("Unable to get port!")});else{const n=s.connect();n&&(e.setStore(i?G(n):n),l(!0))}},[s,e,i]),c.jsx(N.Provider,{value:e,children:o&&t})};try{y.displayName="GeneratorsProvider",y.__docgenInfo={description:"Provides sub components with the `GeneratorRegistry`, which allow access to the\nregistered _generator_ functions. You can create your own provider if needed, but it will need to\nprovide an implementation of the `GeneratorsContext`.",displayName:"GeneratorsProvider",props:{registry:{defaultValue:null,description:"",name:"registry",required:!0,type:{name:"GeneratorRegistry | Remote<GeneratorRegistry>"}},isRemote:{defaultValue:null,description:"",name:"isRemote",required:!1,type:{name:"boolean | undefined"}}}}}catch{}const U=I(new Worker(new URL(""+new URL("remote-generator-registry-DeaSvCQn.js",import.meta.url).href,import.meta.url),{type:"module"})),R=e=>c.jsx(y,{registry:U,children:c.jsx(e,{})});try{R.displayName="GeneratorsProviderDecorator",R.__docgenInfo={description:"",displayName:"GeneratorsProviderDecorator",props:{}}}catch{}export{D as E,R as G,Y as W,w as a,F as b,N as c,M as d,L as u,A as w};

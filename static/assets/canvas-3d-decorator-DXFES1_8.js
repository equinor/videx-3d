import{j as ot}from"./jsx-runtime-CmIOflP4.js";import{v as nl,a3 as Rr,a4 as Ps,aj as Ll,a6 as $u,ak as Df,a7 as Ul,al as rl,am as Ff,an as Af,o as kl,V as sn,ao as ec,ap as Nf,aq as Hf,ar as Bf,as as Zf,at as jf,au as Yf,av as Vf,X as zl,aw as Wf,l as Dl,D as Gf,ax as tc,H as qt,ay as Cn,az as Or,q as gn,aA as Qf,B as Xf,M as Kf,$ as Jf,aB as qf,S as bf,aC as $f,Z as ed,aD as An,a0 as nc,W as rc,aE as Rs,ac as td,aF as Tl,y as Mr,aG as nd,aH as rd,aI as id,aJ as sd,_ as od,aK as Os,aL as ld,aM as ad,aN as Ou,a2 as ud,aO as cd,aP as fd,aQ as dd,aR as hd,aS as pd,aT as il}from"./CameraManager-BTlj_2qD.js";import{r as W,g as ic}from"./index-KqYmeiyw.js";var sc={exports:{}},rr={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */rr.ConcurrentRoot=1;rr.ContinuousEventPriority=4;rr.DefaultEventPriority=16;rr.DiscreteEventPriority=1;rr.IdleEventPriority=536870912;rr.LegacyRoot=0;sc.exports=rr;var ui=sc.exports;function md(l){let r;const o=new Set,u=(w,m)=>{const g=typeof w=="function"?w(r):w;if(g!==r){const S=r;r=m?g:Object.assign({},r,g),o.forEach(C=>C(r,S))}},f=()=>r,h=(w,m=f,g=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let S=m(r);function C(){const P=m(r);if(!g(S,P)){const F=S;w(S=P,F)}}return o.add(C),()=>o.delete(C)},y={setState:u,getState:f,subscribe:(w,m,g)=>m||g?h(w,m,g):(o.add(w),()=>o.delete(w)),destroy:()=>o.clear()};return r=l(u,f,y),y}const gd=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Mu=gd?W.useEffect:W.useLayoutEffect;function oc(l){const r=typeof l=="function"?md(l):l,o=(u=r.getState,f=Object.is)=>{const[,h]=W.useReducer(D=>D+1,0),d=r.getState(),_=W.useRef(d),y=W.useRef(u),w=W.useRef(f),m=W.useRef(!1),g=W.useRef();g.current===void 0&&(g.current=u(d));let S,C=!1;(_.current!==d||y.current!==u||w.current!==f||m.current)&&(S=u(d),C=!f(g.current,S)),Mu(()=>{C&&(g.current=S),_.current=d,y.current=u,w.current=f,m.current=!1});const P=W.useRef(d);Mu(()=>{const D=()=>{try{const x=r.getState(),R=y.current(x);w.current(g.current,R)||(_.current=x,g.current=R,h())}catch{m.current=!0,h()}},E=r.subscribe(D);return r.getState()!==P.current&&D(),E},[]);const F=C?S:g.current;return W.useDebugValue(F),F};return Object.assign(o,r),o[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const u=[o,r];return{next(){const f=u.length<=0;return{value:u.shift(),done:f}}}},o}const _d=l=>typeof l=="object"&&typeof l.then=="function",nr=[];function lc(l,r,o=(u,f)=>u===f){if(l===r)return!0;if(!l||!r)return!1;const u=l.length;if(r.length!==u)return!1;for(let f=0;f<u;f++)if(!o(l[f],r[f]))return!1;return!0}function ac(l,r=null,o=!1,u={}){r===null&&(r=[l]);for(const h of nr)if(lc(r,h.keys,h.equal)){if(o)return;if(Object.prototype.hasOwnProperty.call(h,"error"))throw h.error;if(Object.prototype.hasOwnProperty.call(h,"response"))return u.lifespan&&u.lifespan>0&&(h.timeout&&clearTimeout(h.timeout),h.timeout=setTimeout(h.remove,u.lifespan)),h.response;if(!o)throw h.promise}const f={keys:r,equal:u.equal,remove:()=>{const h=nr.indexOf(f);h!==-1&&nr.splice(h,1)},promise:(_d(l)?l:l(...r)).then(h=>{f.response=h,u.lifespan&&u.lifespan>0&&(f.timeout=setTimeout(f.remove,u.lifespan))}).catch(h=>f.error=h)};if(nr.push(f),!o)throw f.promise}const vd=(l,r,o)=>ac(l,r,!1,o),yd=(l,r,o)=>void ac(l,r,!0,o),Ed=l=>{if(l===void 0||l.length===0)nr.splice(0,nr.length);else{const r=nr.find(o=>lc(l,o.keys,o.equal));r&&r.remove()}};var uc={exports:{}},cc={exports:{}},fc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(l){function r(b,ae){var J=b.length;b.push(ae);e:for(;0<J;){var pe=J-1>>>1,me=b[pe];if(0<f(me,ae))b[pe]=ae,b[J]=me,J=pe;else break e}}function o(b){return b.length===0?null:b[0]}function u(b){if(b.length===0)return null;var ae=b[0],J=b.pop();if(J!==ae){b[0]=J;e:for(var pe=0,me=b.length,ye=me>>>1;pe<ye;){var qe=2*(pe+1)-1,dt=b[qe],Ue=qe+1,_t=b[Ue];if(0>f(dt,J))Ue<me&&0>f(_t,dt)?(b[pe]=_t,b[Ue]=J,pe=Ue):(b[pe]=dt,b[qe]=J,pe=qe);else if(Ue<me&&0>f(_t,J))b[pe]=_t,b[Ue]=J,pe=Ue;else break e}}return ae}function f(b,ae){var J=b.sortIndex-ae.sortIndex;return J!==0?J:b.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;l.unstable_now=function(){return h.now()}}else{var d=Date,_=d.now();l.unstable_now=function(){return d.now()-_}}var y=[],w=[],m=1,g=null,S=3,C=!1,P=!1,F=!1,D=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(b){for(var ae=o(w);ae!==null;){if(ae.callback===null)u(w);else if(ae.startTime<=b)u(w),ae.sortIndex=ae.expirationTime,r(y,ae);else break;ae=o(w)}}function k(b){if(F=!1,R(b),!P)if(o(y)!==null)P=!0,ve(U);else{var ae=o(w);ae!==null&&rt(k,ae.startTime-b)}}function U(b,ae){P=!1,F&&(F=!1,E(Z),Z=-1),C=!0;var J=S;try{for(R(ae),g=o(y);g!==null&&(!(g.expirationTime>ae)||b&&!G());){var pe=g.callback;if(typeof pe=="function"){g.callback=null,S=g.priorityLevel;var me=pe(g.expirationTime<=ae);ae=l.unstable_now(),typeof me=="function"?g.callback=me:g===o(y)&&u(y),R(ae)}else u(y);g=o(y)}if(g!==null)var ye=!0;else{var qe=o(w);qe!==null&&rt(k,qe.startTime-ae),ye=!1}return ye}finally{g=null,S=J,C=!1}}var A=!1,K=null,Z=-1,Y=5,re=-1;function G(){return!(l.unstable_now()-re<Y)}function oe(){if(K!==null){var b=l.unstable_now();re=b;var ae=!0;try{ae=K(!0,b)}finally{ae?ge():(A=!1,K=null)}}else A=!1}var ge;if(typeof x=="function")ge=function(){x(oe)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Pe=ce.port2;ce.port1.onmessage=oe,ge=function(){Pe.postMessage(null)}}else ge=function(){D(oe,0)};function ve(b){K=b,A||(A=!0,ge())}function rt(b,ae){Z=D(function(){b(l.unstable_now())},ae)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(b){b.callback=null},l.unstable_continueExecution=function(){P||C||(P=!0,ve(U))},l.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<b?Math.floor(1e3/b):5},l.unstable_getCurrentPriorityLevel=function(){return S},l.unstable_getFirstCallbackNode=function(){return o(y)},l.unstable_next=function(b){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var J=S;S=ae;try{return b()}finally{S=J}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(b,ae){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var J=S;S=b;try{return ae()}finally{S=J}},l.unstable_scheduleCallback=function(b,ae,J){var pe=l.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?pe+J:pe):J=pe,b){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=J+me,b={id:m++,callback:ae,priorityLevel:b,startTime:J,expirationTime:me,sortIndex:-1},J>pe?(b.sortIndex=J,r(w,b),o(y)===null&&b===o(w)&&(F?(E(Z),Z=-1):F=!0,rt(k,J-pe))):(b.sortIndex=me,r(y,b),P||C||(P=!0,ve(U))),b},l.unstable_shouldYield=G,l.unstable_wrapCallback=function(b){var ae=S;return function(){var J=S;S=ae;try{return b.apply(this,arguments)}finally{S=J}}}})(fc);cc.exports=fc;var Cl=cc.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wd=function(r){var o={},u=W,f=Cl,h=Object.assign;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),w=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),P=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),U=Symbol.iterator;function A(e){return e===null||typeof e!="object"?null:(e=U&&e[U]||e["@@iterator"],typeof e=="function"?e:null)}function K(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case m:return"Fragment";case w:return"Portal";case S:return"Profiler";case g:return"StrictMode";case D:return"Suspense";case E:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case F:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case x:return t=e.displayName||null,t!==null?t:K(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return K(e(t))}catch{}}return null}function Z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(t);case 8:return t===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Y(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function re(e){if(Y(e)!==e)throw Error(d(188))}function G(e){var t=e.alternate;if(!t){if(t=Y(e),t===null)throw Error(d(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return re(s),e;if(a===i)return re(s),t;a=a.sibling}throw Error(d(188))}if(n.return!==i.return)n=s,i=a;else{for(var v=!1,O=s.child;O;){if(O===n){v=!0,n=s,i=a;break}if(O===i){v=!0,i=s,n=a;break}O=O.sibling}if(!v){for(O=a.child;O;){if(O===n){v=!0,n=a,i=s;break}if(O===i){v=!0,i=a,n=s;break}O=O.sibling}if(!v)throw Error(d(189))}}if(n.alternate!==i)throw Error(d(190))}if(n.tag!==3)throw Error(d(188));return n.stateNode.current===n?e:t}function oe(e){return e=G(e),e!==null?ge(e):null}function ge(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ge(e);if(t!==null)return t;e=e.sibling}return null}function ce(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){if(e.tag!==4){var t=ce(e);if(t!==null)return t}e=e.sibling}return null}var Pe=Array.isArray,ve=r.getPublicInstance,rt=r.getRootHostContext,b=r.getChildHostContext,ae=r.prepareForCommit,J=r.resetAfterCommit,pe=r.createInstance,me=r.appendInitialChild,ye=r.finalizeInitialChildren,qe=r.prepareUpdate,dt=r.shouldSetTextContent,Ue=r.createTextInstance,_t=r.scheduleTimeout,bt=r.cancelTimeout,Ur=r.noTimeout,ir=r.isPrimaryRenderer,Lt=r.supportsMutation,sr=r.supportsPersistence,Et=r.supportsHydration,mi=r.getInstanceFromNode,gi=r.preparePortalMount,Us=r.getCurrentEventPriority,ks=r.detachDeletedInstance,zs=r.supportsMicrotasks,Ds=r.scheduleMicrotask,Hn=r.supportsTestSelectors,Fs=r.findFiberRoot,As=r.getBoundingRect,_i=r.getTextContent,Bn=r.isHiddenSubtree,kr=r.matchAccessibilityRole,Ns=r.setFocusIfFocusable,Hs=r.setupIntersectionObserver,vi=r.appendChild,or=r.appendChildToContainer,Bs=r.commitTextUpdate,Zs=r.commitMount,js=r.commitUpdate,Zn=r.insertBefore,wt=r.insertInContainerBefore,yi=r.removeChild,xn=r.removeChildFromContainer,Mt=r.resetTextContent,ht=r.hideInstance,Ys=r.hideTextInstance,se=r.unhideInstance,jn=r.unhideTextInstance,Vs=r.clearContainer,Ws=r.cloneInstance,Ei=r.createContainerChildSet,wi=r.appendChildToContainerChildSet,Gs=r.finalizeContainerChildren,Si=r.replaceContainerChildren,Ti=r.cloneHiddenInstance,Ci=r.cloneHiddenTextInstance,Qs=r.canHydrateInstance,Xs=r.canHydrateTextInstance,Ks=r.canHydrateSuspenseInstance,Yn=r.isSuspenseInstancePending,zr=r.isSuspenseInstanceFallback,Vn=r.registerSuspenseInstanceRetry,$t=r.getNextHydratableSibling,ke=r.getFirstHydratableChild,xi=r.getFirstHydratableChildWithinContainer,Js=r.getFirstHydratableChildWithinSuspenseInstance,c=r.hydrateInstance,p=r.hydrateTextInstance,T=r.hydrateSuspenseInstance,L=r.getNextHydratableInstanceAfterSuspenseInstance,N=r.commitHydratedContainer,H=r.commitHydratedSuspenseInstance,Q=r.clearSuspenseBoundary,V=r.clearSuspenseBoundaryFromContainer,ee=r.shouldDeleteUnhydratedTailInstances,$=r.didNotMatchHydratedContainerTextInstance,te=r.didNotMatchHydratedTextInstance,q;function Ve(e){if(q===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return`
`+q+e}var ue=!1;function de(e,t){if(!e||ue)return"";ue=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(X){var i=X}Reflect.construct(e,[],t)}else{try{t.call()}catch(X){i=X}e.call(t.prototype)}else{try{throw Error()}catch(X){i=X}e()}}catch(X){if(X&&i&&typeof X.stack=="string"){for(var s=X.stack.split(`
`),a=i.stack.split(`
`),v=s.length-1,O=a.length-1;1<=v&&0<=O&&s[v]!==a[O];)O--;for(;1<=v&&0<=O;v--,O--)if(s[v]!==a[O]){if(v!==1||O!==1)do if(v--,O--,0>O||s[v]!==a[O]){var B=`
`+s[v].replace(" at new "," at ");return e.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",e.displayName)),B}while(1<=v&&0<=O);break}}}finally{ue=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ve(e):""}var Se=Object.prototype.hasOwnProperty,xe=[],Fe=-1;function ze(e){return{current:e}}function we(e){0>Fe||(e.current=xe[Fe],xe[Fe]=null,Fe--)}function Oe(e,t){Fe++,xe[Fe]=e.current,e.current=t}var De={},Ge=ze(De),Re=ze(!1),Xe=De;function St(e,t){var n=e.type.contextTypes;if(!n)return De;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function lt(e){return e=e.childContextTypes,e!=null}function vt(){we(Re),we(Ge)}function je(e,t,n){if(Ge.current!==De)throw Error(d(168));Oe(Ge,t),Oe(Re,n)}function ct(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(d(108,Z(e)||"Unknown",s));return h({},n,i)}function We(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||De,Xe=Ge.current,Oe(Ge,e),Oe(Re,Re.current),!0}function Ae(e,t,n){var i=e.stateNode;if(!i)throw Error(d(169));n?(e=ct(e,t,Xe),i.__reactInternalMemoizedMergedChildContext=e,we(Re),we(Ge),Oe(Ge,e)):we(Re),Oe(Re,n)}var $e=Math.clz32?Math.clz32:on,_n=Math.log,Pt=Math.LN2;function on(e){return e>>>=0,e===0?32:31-(_n(e)/Pt|0)|0}var Oi=64,Mi=4194304;function Dr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pi(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes,v=n&268435455;if(v!==0){var O=v&~s;O!==0?i=Dr(O):(a&=v,a!==0&&(i=Dr(a)))}else v=n&~s,v!==0?i=Dr(v):a!==0&&(i=Dr(a));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-$e(t),s=1<<n,i|=e[n],t&=~s;return i}function Gc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qc(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var v=31-$e(a),O=1<<v,B=s[v];B===-1?(!(O&n)||O&i)&&(s[v]=Gc(O,t)):B<=t&&(e.expiredLanes|=O),a&=~O}}function qs(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Fr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$e(t),e[t]=n}function Xc(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-$e(n),a=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~a}}function $s(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-$e(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var Ne=0;function Kl(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var eo=f.unstable_scheduleCallback,Jl=f.unstable_cancelCallback,Kc=f.unstable_shouldYield,Jc=f.unstable_requestPaint,pt=f.unstable_now,to=f.unstable_ImmediatePriority,qc=f.unstable_UserBlockingPriority,no=f.unstable_NormalPriority,bc=f.unstable_IdlePriority,Ri=null,ln=null;function $c(e){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(Ri,e,void 0,(e.current.flags&128)===128)}catch{}}function ef(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var an=typeof Object.is=="function"?Object.is:ef,vn=null,Ii=!1,ro=!1;function ql(e){vn===null?vn=[e]:vn.push(e)}function tf(e){Ii=!0,ql(e)}function un(){if(!ro&&vn!==null){ro=!0;var e=0,t=Ne;try{var n=vn;for(Ne=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}vn=null,Ii=!1}catch(s){throw vn!==null&&(vn=vn.slice(e+1)),eo(to,un),s}finally{Ne=t,ro=!1}}return null}var nf=_.ReactCurrentBatchConfig;function Li(e,t){if(an(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Se.call(t,s)||!an(e[s],t[s]))return!1}return!0}function rf(e){switch(e.tag){case 5:return Ve(e.type);case 16:return Ve("Lazy");case 13:return Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 2:case 15:return e=de(e.type,!1),e;case 11:return e=de(e.type.render,!1),e;case 1:return e=de(e.type,!0),e;default:return""}}function en(e,t){if(e&&e.defaultProps){t=h({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Ui=ze(null),ki=null,lr=null,io=null;function so(){io=lr=ki=null}function bl(e,t,n){ir?(Oe(Ui,t._currentValue),t._currentValue=n):(Oe(Ui,t._currentValue2),t._currentValue2=n)}function oo(e){var t=Ui.current;we(Ui),ir?e._currentValue=t:e._currentValue2=t}function lo(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function ar(e,t){ki=e,io=lr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nt=!0),e.firstContext=null)}function Zt(e){var t=ir?e._currentValue:e._currentValue2;if(io!==e)if(e={context:e,memoizedValue:t,next:null},lr===null){if(ki===null)throw Error(d(308));lr=e,ki.dependencies={lanes:0,firstContext:e}}else lr=lr.next=e;return t}var cn=null,On=!1;function ao(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $l(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mn(e,t){var n=e.updateQueue;n!==null&&(n=n.shared,at!==null&&e.mode&1&&!(Le&2)?(e=n.interleaved,e===null?(t.next=t,cn===null?cn=[n]:cn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(e=n.pending,e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function zi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,$s(e,n)}}function ea(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var v={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=v:a=a.next=v,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Di(e,t,n,i){var s=e.updateQueue;On=!1;var a=s.firstBaseUpdate,v=s.lastBaseUpdate,O=s.shared.pending;if(O!==null){s.shared.pending=null;var B=O,X=B.next;B.next=null,v===null?a=X:v.next=X,v=B;var le=e.alternate;le!==null&&(le=le.updateQueue,O=le.lastBaseUpdate,O!==v&&(O===null?le.firstBaseUpdate=X:O.next=X,le.lastBaseUpdate=B))}if(a!==null){var Te=s.baseState;v=0,le=X=B=null,O=a;do{var _e=O.lane,Qe=O.eventTime;if((i&_e)===_e){le!==null&&(le=le.next={eventTime:Qe,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var he=e,Ot=O;switch(_e=t,Qe=n,Ot.tag){case 1:if(he=Ot.payload,typeof he=="function"){Te=he.call(Qe,Te,_e);break e}Te=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=Ot.payload,_e=typeof he=="function"?he.call(Qe,Te,_e):he,_e==null)break e;Te=h({},Te,_e);break e;case 2:On=!0}}O.callback!==null&&O.lane!==0&&(e.flags|=64,_e=s.effects,_e===null?s.effects=[O]:_e.push(O))}else Qe={eventTime:Qe,lane:_e,tag:O.tag,payload:O.payload,callback:O.callback,next:null},le===null?(X=le=Qe,B=Te):le=le.next=Qe,v|=_e;if(O=O.next,O===null){if(O=s.shared.pending,O===null)break;_e=O,O=_e.next,_e.next=null,s.lastBaseUpdate=_e,s.shared.pending=null}}while(!0);if(le===null&&(B=Te),s.baseState=B,s.firstBaseUpdate=X,s.lastBaseUpdate=le,t=s.shared.interleaved,t!==null){s=t;do v|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);_r|=v,e.lanes=v,e.memoizedState=Te}}function ta(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(d(191,s));s.call(i)}}}var na=new u.Component().refs;function uo(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Fi={isMounted:function(e){return(e=e._reactInternals)?Y(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=It(),s=In(e),a=yn(i,s);a.payload=t,n!=null&&(a.callback=n),Mn(e,a),t=Gt(e,s,i),t!==null&&zi(t,e,s)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=It(),s=In(e),a=yn(i,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),Mn(e,a),t=Gt(e,s,i),t!==null&&zi(t,e,s)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=It(),i=In(e),s=yn(n,i);s.tag=2,t!=null&&(s.callback=t),Mn(e,s),t=Gt(e,i,n),t!==null&&zi(t,e,i)}};function ra(e,t,n,i,s,a,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,a,v):t.prototype&&t.prototype.isPureReactComponent?!Li(n,i)||!Li(s,a):!0}function ia(e,t,n){var i=!1,s=De,a=t.contextType;return typeof a=="object"&&a!==null?a=Zt(a):(s=lt(t)?Xe:Ge.current,i=t.contextTypes,a=(i=i!=null)?St(e,s):De),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fi,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function sa(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Fi.enqueueReplaceState(t,t.state,null)}function co(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs=na,ao(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Zt(a):(a=lt(t)?Xe:Ge.current,s.context=St(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(uo(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Fi.enqueueReplaceState(s,s.state,null),Di(e,n,s,i),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}var ur=[],cr=0,Ai=null,Ni=0,jt=[],Yt=0,Wn=null,En=1,wn="";function Gn(e,t){ur[cr++]=Ni,ur[cr++]=Ai,Ai=e,Ni=t}function oa(e,t,n){jt[Yt++]=En,jt[Yt++]=wn,jt[Yt++]=Wn,Wn=e;var i=En;e=wn;var s=32-$e(i)-1;i&=~(1<<s),n+=1;var a=32-$e(t)+s;if(30<a){var v=s-s%5;a=(i&(1<<v)-1).toString(32),i>>=v,s-=v,En=1<<32-$e(t)+s|n<<s|i,wn=a+e}else En=1<<a|n<<s|i,wn=e}function fo(e){e.return!==null&&(Gn(e,1),oa(e,1,0))}function ho(e){for(;e===Ai;)Ai=ur[--cr],ur[cr]=null,Ni=ur[--cr],ur[cr]=null;for(;e===Wn;)Wn=jt[--Yt],jt[Yt]=null,wn=jt[--Yt],jt[Yt]=null,En=jt[--Yt],jt[Yt]=null}var Ft=null,At=null,et=!1,Ar=!1,tn=null;function la(e,t){var n=Qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function aa(e,t){switch(e.tag){case 5:return t=Qs(t,e.type,e.pendingProps),t!==null?(e.stateNode=t,Ft=e,At=ke(t),!0):!1;case 6:return t=Xs(t,e.pendingProps),t!==null?(e.stateNode=t,Ft=e,At=null,!0):!1;case 13:if(t=Ks(t),t!==null){var n=Wn!==null?{id:En,overflow:wn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ft=e,At=null,!0}return!1;default:return!1}}function po(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mo(e){if(et){var t=At;if(t){var n=t;if(!aa(e,t)){if(po(e))throw Error(d(418));t=$t(n);var i=Ft;t&&aa(e,t)?la(i,n):(e.flags=e.flags&-4097|2,et=!1,Ft=e)}}else{if(po(e))throw Error(d(418));e.flags=e.flags&-4097|2,et=!1,Ft=e}}}function ua(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function Nr(e){if(!Et||e!==Ft)return!1;if(!et)return ua(e),et=!0,!1;if(e.tag!==3&&(e.tag!==5||ee(e.type)&&!dt(e.type,e.memoizedProps))){var t=At;if(t){if(po(e)){for(e=At;e;)e=$t(e);throw Error(d(418))}for(;t;)la(e,t),t=$t(t)}}if(ua(e),e.tag===13){if(!Et)throw Error(d(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));At=L(e)}else At=Ft?$t(e.stateNode):null;return!0}function fr(){Et&&(At=Ft=null,Ar=et=!1)}function go(e){tn===null?tn=[e]:tn.push(e)}function Hr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(d(309));var i=n.stateNode}if(!i)throw Error(d(147,e));var s=i,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(v){var O=s.refs;O===na&&(O=s.refs={}),v===null?delete O[a]:O[a]=v},t._stringRef=a,t)}if(typeof e!="string")throw Error(d(284));if(!n._owner)throw Error(d(290,e))}return e}function Hi(e,t){throw e=Object.prototype.toString.call(t),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ca(e){var t=e._init;return t(e._payload)}function fa(e){function t(I,M){if(e){var z=I.deletions;z===null?(I.deletions=[M],I.flags|=16):z.push(M)}}function n(I,M){if(!e)return null;for(;M!==null;)t(I,M),M=M.sibling;return null}function i(I,M){for(I=new Map;M!==null;)M.key!==null?I.set(M.key,M):I.set(M.index,M),M=M.sibling;return I}function s(I,M){return I=Un(I,M),I.index=0,I.sibling=null,I}function a(I,M,z){return I.index=z,e?(z=I.alternate,z!==null?(z=z.index,z<M?(I.flags|=2,M):z):(I.flags|=2,M)):(I.flags|=1048576,M)}function v(I){return e&&I.alternate===null&&(I.flags|=2),I}function O(I,M,z,ie){return M===null||M.tag!==6?(M=$o(z,I.mode,ie),M.return=I,M):(M=s(M,z),M.return=I,M)}function B(I,M,z,ie){var fe=z.type;return fe===m?le(I,M,z.props.children,ie,z.key):M!==null&&(M.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===R&&ca(fe)===M.type)?(ie=s(M,z.props),ie.ref=Hr(I,M,z),ie.return=I,ie):(ie=gs(z.type,z.key,z.props,null,I.mode,ie),ie.ref=Hr(I,M,z),ie.return=I,ie)}function X(I,M,z,ie){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=el(z,I.mode,ie),M.return=I,M):(M=s(M,z.children||[]),M.return=I,M)}function le(I,M,z,ie,fe){return M===null||M.tag!==7?(M=$n(z,I.mode,ie,fe),M.return=I,M):(M=s(M,z),M.return=I,M)}function Te(I,M,z){if(typeof M=="string"&&M!==""||typeof M=="number")return M=$o(""+M,I.mode,z),M.return=I,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case y:return z=gs(M.type,M.key,M.props,null,I.mode,z),z.ref=Hr(I,null,M),z.return=I,z;case w:return M=el(M,I.mode,z),M.return=I,M;case R:var ie=M._init;return Te(I,ie(M._payload),z)}if(Pe(M)||A(M))return M=$n(M,I.mode,z,null),M.return=I,M;Hi(I,M)}return null}function _e(I,M,z,ie){var fe=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return fe!==null?null:O(I,M,""+z,ie);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case y:return z.key===fe?B(I,M,z,ie):null;case w:return z.key===fe?X(I,M,z,ie):null;case R:return fe=z._init,_e(I,M,fe(z._payload),ie)}if(Pe(z)||A(z))return fe!==null?null:le(I,M,z,ie,null);Hi(I,z)}return null}function Qe(I,M,z,ie,fe){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return I=I.get(z)||null,O(M,I,""+ie,fe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:return I=I.get(ie.key===null?z:ie.key)||null,B(M,I,ie,fe);case w:return I=I.get(ie.key===null?z:ie.key)||null,X(M,I,ie,fe);case R:var Ie=ie._init;return Qe(I,M,z,Ie(ie._payload),fe)}if(Pe(ie)||A(ie))return I=I.get(z)||null,le(M,I,ie,fe,null);Hi(M,ie)}return null}function he(I,M,z,ie){for(var fe=null,Ie=null,Ce=M,He=M=0,gt=null;Ce!==null&&He<z.length;He++){Ce.index>He?(gt=Ce,Ce=null):gt=Ce.sibling;var Be=_e(I,Ce,z[He],ie);if(Be===null){Ce===null&&(Ce=gt);break}e&&Ce&&Be.alternate===null&&t(I,Ce),M=a(Be,M,He),Ie===null?fe=Be:Ie.sibling=Be,Ie=Be,Ce=gt}if(He===z.length)return n(I,Ce),et&&Gn(I,He),fe;if(Ce===null){for(;He<z.length;He++)Ce=Te(I,z[He],ie),Ce!==null&&(M=a(Ce,M,He),Ie===null?fe=Ce:Ie.sibling=Ce,Ie=Ce);return et&&Gn(I,He),fe}for(Ce=i(I,Ce);He<z.length;He++)gt=Qe(Ce,I,He,z[He],ie),gt!==null&&(e&&gt.alternate!==null&&Ce.delete(gt.key===null?He:gt.key),M=a(gt,M,He),Ie===null?fe=gt:Ie.sibling=gt,Ie=gt);return e&&Ce.forEach(function(kn){return t(I,kn)}),et&&Gn(I,He),fe}function Ot(I,M,z,ie){var fe=A(z);if(typeof fe!="function")throw Error(d(150));if(z=fe.call(z),z==null)throw Error(d(151));for(var Ie=fe=null,Ce=M,He=M=0,gt=null,Be=z.next();Ce!==null&&!Be.done;He++,Be=z.next()){Ce.index>He?(gt=Ce,Ce=null):gt=Ce.sibling;var kn=_e(I,Ce,Be.value,ie);if(kn===null){Ce===null&&(Ce=gt);break}e&&Ce&&kn.alternate===null&&t(I,Ce),M=a(kn,M,He),Ie===null?fe=kn:Ie.sibling=kn,Ie=kn,Ce=gt}if(Be.done)return n(I,Ce),et&&Gn(I,He),fe;if(Ce===null){for(;!Be.done;He++,Be=z.next())Be=Te(I,Be.value,ie),Be!==null&&(M=a(Be,M,He),Ie===null?fe=Be:Ie.sibling=Be,Ie=Be);return et&&Gn(I,He),fe}for(Ce=i(I,Ce);!Be.done;He++,Be=z.next())Be=Qe(Ce,I,He,Be.value,ie),Be!==null&&(e&&Be.alternate!==null&&Ce.delete(Be.key===null?He:Be.key),M=a(Be,M,He),Ie===null?fe=Be:Ie.sibling=Be,Ie=Be);return e&&Ce.forEach(function(zf){return t(I,zf)}),et&&Gn(I,He),fe}function Xt(I,M,z,ie){if(typeof z=="object"&&z!==null&&z.type===m&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case y:e:{for(var fe=z.key,Ie=M;Ie!==null;){if(Ie.key===fe){if(fe=z.type,fe===m){if(Ie.tag===7){n(I,Ie.sibling),M=s(Ie,z.props.children),M.return=I,I=M;break e}}else if(Ie.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===R&&ca(fe)===Ie.type){n(I,Ie.sibling),M=s(Ie,z.props),M.ref=Hr(I,Ie,z),M.return=I,I=M;break e}n(I,Ie);break}else t(I,Ie);Ie=Ie.sibling}z.type===m?(M=$n(z.props.children,I.mode,ie,z.key),M.return=I,I=M):(ie=gs(z.type,z.key,z.props,null,I.mode,ie),ie.ref=Hr(I,M,z),ie.return=I,I=ie)}return v(I);case w:e:{for(Ie=z.key;M!==null;){if(M.key===Ie)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){n(I,M.sibling),M=s(M,z.children||[]),M.return=I,I=M;break e}else{n(I,M);break}else t(I,M);M=M.sibling}M=el(z,I.mode,ie),M.return=I,I=M}return v(I);case R:return Ie=z._init,Xt(I,M,Ie(z._payload),ie)}if(Pe(z))return he(I,M,z,ie);if(A(z))return Ot(I,M,z,ie);Hi(I,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,M!==null&&M.tag===6?(n(I,M.sibling),M=s(M,z),M.return=I,I=M):(n(I,M),M=$o(z,I.mode,ie),M.return=I,I=M),v(I)):n(I,M)}return Xt}var dr=fa(!0),da=fa(!1),Br={},Vt=ze(Br),Zr=ze(Br),hr=ze(Br);function fn(e){if(e===Br)throw Error(d(174));return e}function _o(e,t){Oe(hr,t),Oe(Zr,e),Oe(Vt,Br),e=rt(t),we(Vt),Oe(Vt,e)}function pr(){we(Vt),we(Zr),we(hr)}function ha(e){var t=fn(hr.current),n=fn(Vt.current);t=b(n,e.type,t),n!==t&&(Oe(Zr,e),Oe(Vt,t))}function vo(e){Zr.current===e&&(we(Vt),we(Zr))}var tt=ze(0);function Bi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Yn(n)||zr(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yo=[];function Eo(){for(var e=0;e<yo.length;e++){var t=yo[e];ir?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yo.length=0}var Zi=_.ReactCurrentDispatcher,Wt=_.ReactCurrentBatchConfig,mr=0,it=null,Tt=null,mt=null,ji=!1,jr=!1,Yr=0,sf=0;function Ct(){throw Error(d(321))}function wo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!an(e[n],t[n]))return!1;return!0}function So(e,t,n,i,s,a){if(mr=a,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zi.current=e===null||e.memoizedState===null?uf:cf,e=n(i,s),jr){a=0;do{if(jr=!1,Yr=0,25<=a)throw Error(d(301));a+=1,mt=Tt=null,t.updateQueue=null,Zi.current=ff,e=n(i,s)}while(jr)}if(Zi.current=Qi,t=Tt!==null&&Tt.next!==null,mr=0,mt=Tt=it=null,ji=!1,t)throw Error(d(300));return e}function To(){var e=Yr!==0;return Yr=0,e}function Sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?it.memoizedState=mt=e:mt=mt.next=e,mt}function dn(){if(Tt===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=Tt.next;var t=mt===null?it.memoizedState:mt.next;if(t!==null)mt=t,Tt=e;else{if(e===null)throw Error(d(310));Tt=e,e={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},mt===null?it.memoizedState=mt=e:mt=mt.next=e}return mt}function Qn(e,t){return typeof t=="function"?t(e):t}function Yi(e){var t=dn(),n=t.queue;if(n===null)throw Error(d(311));n.lastRenderedReducer=e;var i=Tt,s=i.baseQueue,a=n.pending;if(a!==null){if(s!==null){var v=s.next;s.next=a.next,a.next=v}i.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,i=i.baseState;var O=v=null,B=null,X=a;do{var le=X.lane;if((mr&le)===le)B!==null&&(B=B.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),i=X.hasEagerState?X.eagerState:e(i,X.action);else{var Te={lane:le,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};B===null?(O=B=Te,v=i):B=B.next=Te,it.lanes|=le,_r|=le}X=X.next}while(X!==null&&X!==a);B===null?v=i:B.next=O,an(i,t.memoizedState)||(Nt=!0),t.memoizedState=i,t.baseState=v,t.baseQueue=B,n.lastRenderedState=i}if(e=n.interleaved,e!==null){s=e;do a=s.lane,it.lanes|=a,_r|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Vi(e){var t=dn(),n=t.queue;if(n===null)throw Error(d(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var v=s=s.next;do a=e(a,v.action),v=v.next;while(v!==s);an(a,t.memoizedState)||(Nt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function pa(){}function ma(e,t){var n=it,i=dn(),s=t(),a=!an(i.memoizedState,s);if(a&&(i.memoizedState=s,Nt=!0),i=i.queue,Wr(va.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,Vr(9,_a.bind(null,n,i,s,t),void 0,null),at===null)throw Error(d(349));mr&30||ga(n,t,s)}return s}function ga(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function _a(e,t,n,i){t.value=n,t.getSnapshot=i,ya(t)&&Gt(e,1,-1)}function va(e,t,n){return n(function(){ya(t)&&Gt(e,1,-1)})}function ya(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!an(e,n)}catch{return!0}}function Co(e){var t=Sn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:e},t.queue=e,e=e.dispatch=af.bind(null,it,e),[t.memoizedState,e]}function Vr(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function Ea(){return dn().memoizedState}function Wi(e,t,n,i){var s=Sn();it.flags|=e,s.memoizedState=Vr(1|t,n,void 0,i===void 0?null:i)}function Gi(e,t,n,i){var s=dn();i=i===void 0?null:i;var a=void 0;if(Tt!==null){var v=Tt.memoizedState;if(a=v.destroy,i!==null&&wo(i,v.deps)){s.memoizedState=Vr(t,n,a,i);return}}it.flags|=e,s.memoizedState=Vr(1|t,n,a,i)}function xo(e,t){return Wi(8390656,8,e,t)}function Wr(e,t){return Gi(2048,8,e,t)}function wa(e,t){return Gi(4,2,e,t)}function Sa(e,t){return Gi(4,4,e,t)}function Ta(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ca(e,t,n){return n=n!=null?n.concat([e]):null,Gi(4,4,Ta.bind(null,t,e),n)}function Oo(){}function xa(e,t){var n=dn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&wo(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Oa(e,t){var n=dn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&wo(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function of(e,t){var n=Ne;Ne=n!==0&&4>n?n:4,e(!0);var i=Wt.transition;Wt.transition={};try{e(!1),t()}finally{Ne=n,Wt.transition=i}}function Ma(){return dn().memoizedState}function lf(e,t,n){var i=In(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Pa(e)?Ra(t,n):(Ia(e,t,n),n=It(),e=Gt(e,i,n),e!==null&&La(e,t,i))}function af(e,t,n){var i=In(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Pa(e))Ra(t,s);else{Ia(e,t,s);var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var v=t.lastRenderedState,O=a(v,n);if(s.hasEagerState=!0,s.eagerState=O,an(O,v))return}catch{}finally{}n=It(),e=Gt(e,i,n),e!==null&&La(e,t,i)}}function Pa(e){var t=e.alternate;return e===it||t!==null&&t===it}function Ra(e,t){jr=ji=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ia(e,t,n){at!==null&&e.mode&1&&!(Le&2)?(e=t.interleaved,e===null?(n.next=n,cn===null?cn=[t]:cn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(e=t.pending,e===null?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function La(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,$s(e,n)}}var Qi={readContext:Zt,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},uf={readContext:Zt,useCallback:function(e,t){return Sn().memoizedState=[e,t===void 0?null:t],e},useContext:Zt,useEffect:xo,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Wi(4194308,4,Ta.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wi(4,2,e,t)},useMemo:function(e,t){var n=Sn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Sn();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=lf.bind(null,it,e),[i.memoizedState,e]},useRef:function(e){var t=Sn();return e={current:e},t.memoizedState=e},useState:Co,useDebugValue:Oo,useDeferredValue:function(e){var t=Co(e),n=t[0],i=t[1];return xo(function(){var s=Wt.transition;Wt.transition={};try{i(e)}finally{Wt.transition=s}},[e]),n},useTransition:function(){var e=Co(!1),t=e[0];return e=of.bind(null,e[1]),Sn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=it,s=Sn();if(et){if(n===void 0)throw Error(d(407));n=n()}else{if(n=t(),at===null)throw Error(d(349));mr&30||ga(i,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,xo(va.bind(null,i,a,e),[e]),i.flags|=2048,Vr(9,_a.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=Sn(),t=at.identifierPrefix;if(et){var n=wn,i=En;n=(i&~(1<<32-$e(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Yr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=sf++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cf={readContext:Zt,useCallback:xa,useContext:Zt,useEffect:Wr,useImperativeHandle:Ca,useInsertionEffect:wa,useLayoutEffect:Sa,useMemo:Oa,useReducer:Yi,useRef:Ea,useState:function(){return Yi(Qn)},useDebugValue:Oo,useDeferredValue:function(e){var t=Yi(Qn),n=t[0],i=t[1];return Wr(function(){var s=Wt.transition;Wt.transition={};try{i(e)}finally{Wt.transition=s}},[e]),n},useTransition:function(){var e=Yi(Qn)[0],t=dn().memoizedState;return[e,t]},useMutableSource:pa,useSyncExternalStore:ma,useId:Ma,unstable_isNewReconciler:!1},ff={readContext:Zt,useCallback:xa,useContext:Zt,useEffect:Wr,useImperativeHandle:Ca,useInsertionEffect:wa,useLayoutEffect:Sa,useMemo:Oa,useReducer:Vi,useRef:Ea,useState:function(){return Vi(Qn)},useDebugValue:Oo,useDeferredValue:function(e){var t=Vi(Qn),n=t[0],i=t[1];return Wr(function(){var s=Wt.transition;Wt.transition={};try{i(e)}finally{Wt.transition=s}},[e]),n},useTransition:function(){var e=Vi(Qn)[0],t=dn().memoizedState;return[e,t]},useMutableSource:pa,useSyncExternalStore:ma,useId:Ma,unstable_isNewReconciler:!1};function Mo(e,t){try{var n="",i=t;do n+=rf(i),i=i.return;while(i);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s}}function Po(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var df=typeof WeakMap=="function"?WeakMap:Map;function Ua(e,t,n){n=yn(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){us||(us=!0,Go=i),Po(e,t)},n}function ka(e,t,n){n=yn(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){Po(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Po(e,t),typeof i!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var v=t.stack;this.componentDidCatch(t.value,{componentStack:v!==null?v:""})}),n}function za(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new df;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=Of.bind(null,e,t,n),t.then(e,e))}function Da(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fa(e,t,n,i,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=yn(-1,1),t.tag=2,Mn(n,t))),n.lanes|=1),e)}function hn(e){e.flags|=4}function Aa(e,t){if(e!==null&&e.child===t.child)return!0;if(t.flags&16)return!1;for(e=t.child;e!==null;){if(e.flags&12854||e.subtreeFlags&12854)return!1;e=e.sibling}return!0}var Gr,Qr,Xi,Ki;if(Lt)Gr=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)me(e,n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qr=function(){},Xi=function(e,t,n,i,s){if(e=e.memoizedProps,e!==i){var a=t.stateNode,v=fn(Vt.current);n=qe(a,n,e,i,s,v),(t.updateQueue=n)&&hn(t)}},Ki=function(e,t,n,i){n!==i&&hn(t)};else if(sr){Gr=function(e,t,n,i){for(var s=t.child;s!==null;){if(s.tag===5){var a=s.stateNode;n&&i&&(a=Ti(a,s.type,s.memoizedProps,s)),me(e,a)}else if(s.tag===6)a=s.stateNode,n&&i&&(a=Ci(a,s.memoizedProps,s)),me(e,a);else if(s.tag!==4){if(s.tag===22&&s.memoizedState!==null)a=s.child,a!==null&&(a.return=s),Gr(e,s,!0,!0);else if(s.child!==null){s.child.return=s,s=s.child;continue}}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};var Na=function(e,t,n,i){for(var s=t.child;s!==null;){if(s.tag===5){var a=s.stateNode;n&&i&&(a=Ti(a,s.type,s.memoizedProps,s)),wi(e,a)}else if(s.tag===6)a=s.stateNode,n&&i&&(a=Ci(a,s.memoizedProps,s)),wi(e,a);else if(s.tag!==4){if(s.tag===22&&s.memoizedState!==null)a=s.child,a!==null&&(a.return=s),Na(e,s,!0,!0);else if(s.child!==null){s.child.return=s,s=s.child;continue}}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Qr=function(e,t){var n=t.stateNode;if(!Aa(e,t)){e=n.containerInfo;var i=Ei(e);Na(i,t,!1,!1),n.pendingChildren=i,hn(t),Gs(e,i)}},Xi=function(e,t,n,i,s){var a=e.stateNode,v=e.memoizedProps;if((e=Aa(e,t))&&v===i)t.stateNode=a;else{var O=t.stateNode,B=fn(Vt.current),X=null;v!==i&&(X=qe(O,n,v,i,s,B)),e&&X===null?t.stateNode=a:(a=Ws(a,X,n,v,i,t,e,O),ye(a,n,i,s,B)&&hn(t),t.stateNode=a,e?hn(t):Gr(a,t,!1,!1))}},Ki=function(e,t,n,i){n!==i?(e=fn(hr.current),n=fn(Vt.current),t.stateNode=Ue(i,e,n,t),hn(t)):t.stateNode=e.stateNode}}else Qr=function(){},Xi=function(){},Ki=function(){};function Xr(e,t){if(!et)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function hf(e,t,n){var i=t.pendingProps;switch(ho(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(t),null;case 1:return lt(t.type)&&vt(),xt(t),null;case 3:return i=t.stateNode,pr(),we(Re),we(Ge),Eo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Nr(t)?hn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,tn!==null&&(Ko(tn),tn=null))),Qr(e,t),xt(t),null;case 5:vo(t),n=fn(hr.current);var s=t.type;if(e!==null&&t.stateNode!=null)Xi(e,t,s,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(d(166));return xt(t),null}if(e=fn(Vt.current),Nr(t)){if(!Et)throw Error(d(175));e=c(t.stateNode,t.type,t.memoizedProps,n,e,t,!Ar),t.updateQueue=e,e!==null&&hn(t)}else{var a=pe(s,i,n,e,t);Gr(a,t,!1,!1),t.stateNode=a,ye(a,s,i,n,e)&&hn(t)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xt(t),null;case 6:if(e&&t.stateNode!=null)Ki(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(d(166));if(e=fn(hr.current),n=fn(Vt.current),Nr(t)){if(!Et)throw Error(d(176));if(e=t.stateNode,i=t.memoizedProps,(n=p(e,i,t,!Ar))&&(s=Ft,s!==null))switch(a=(s.mode&1)!==0,s.tag){case 3:$(s.stateNode.containerInfo,e,i,a);break;case 5:te(s.type,s.memoizedProps,s.stateNode,e,i,a)}n&&hn(t)}else t.stateNode=Ue(i,e,n,t)}return xt(t),null;case 13:if(we(tt),i=t.memoizedState,et&&At!==null&&t.mode&1&&!(t.flags&128)){for(e=At;e;)e=$t(e);return fr(),t.flags|=98560,t}if(i!==null&&i.dehydrated!==null){if(i=Nr(t),e===null){if(!i)throw Error(d(318));if(!Et)throw Error(d(344));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));T(e,t)}else fr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;return xt(t),null}return tn!==null&&(Ko(tn),tn=null),t.flags&128?(t.lanes=n,t):(i=i!==null,n=!1,e===null?Nr(t):n=e.memoizedState!==null,i&&!n&&(t.child.flags|=8192,t.mode&1&&(e===null||tt.current&1?ft===0&&(ft=3):qo())),t.updateQueue!==null&&(t.flags|=4),xt(t),null);case 4:return pr(),Qr(e,t),e===null&&gi(t.stateNode.containerInfo),xt(t),null;case 10:return oo(t.type._context),xt(t),null;case 17:return lt(t.type)&&vt(),xt(t),null;case 19:if(we(tt),s=t.memoizedState,s===null)return xt(t),null;if(i=(t.flags&128)!==0,a=s.rendering,a===null)if(i)Xr(s,!1);else{if(ft!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Bi(e),a!==null){for(t.flags|=128,Xr(s,!1),e=a.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,i=t.child;i!==null;)n=i,s=e,n.flags&=14680066,a=n.alternate,a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i=i.sibling;return Oe(tt,tt.current&1|2),t.child}e=e.sibling}s.tail!==null&&pt()>Wo&&(t.flags|=128,i=!0,Xr(s,!1),t.lanes=4194304)}else{if(!i)if(e=Bi(a),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Xr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!et)return xt(t),null}else 2*pt()-s.renderingStartTime>Wo&&n!==1073741824&&(t.flags|=128,i=!0,Xr(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(e=s.last,e!==null?e.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=pt(),t.sibling=null,e=tt.current,Oe(tt,i?e&1|2:e&1),t):(xt(t),null);case 22:case 23:return Jo(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Ht&1073741824&&(xt(t),Lt&&t.subtreeFlags&6&&(t.flags|=8192)):xt(t),null;case 24:return null;case 25:return null}throw Error(d(156,t.tag))}var pf=_.ReactCurrentOwner,Nt=!1;function Rt(e,t,n,i){t.child=e===null?da(t,null,n,i):dr(t,e.child,n,i)}function Ha(e,t,n,i,s){n=n.render;var a=t.ref;return ar(t,s),i=So(e,t,n,i,a,s),n=To(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(et&&n&&fo(t),t.flags|=1,Rt(e,t,i,s),t.child)}function Ba(e,t,n,i,s){if(e===null){var a=n.type;return typeof a=="function"&&!bo(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Za(e,t,a,i,s)):(e=gs(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var v=a.memoizedProps;if(n=n.compare,n=n!==null?n:Li,n(v,i)&&e.ref===t.ref)return Tn(e,t,s)}return t.flags|=1,e=Un(a,i),e.ref=t.ref,e.return=t,t.child=e}function Za(e,t,n,i,s){if(e!==null&&Li(e.memoizedProps,i)&&e.ref===t.ref)if(Nt=!1,(e.lanes&s)!==0)e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,Tn(e,t,s);return Ro(e,t,n,i,s)}function ja(e,t,n){var i=t.pendingProps,s=i.children,a=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null},Oe(gr,Ht),Ht|=n;else if(n&1073741824)t.memoizedState={baseLanes:0,cachePool:null},i=a!==null?a.baseLanes:n,Oe(gr,Ht),Ht|=i;else return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,Oe(gr,Ht),Ht|=e,null;else a!==null?(i=a.baseLanes|n,t.memoizedState=null):i=n,Oe(gr,Ht),Ht|=i;return Rt(e,t,s,n),t.child}function Ya(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ro(e,t,n,i,s){var a=lt(n)?Xe:Ge.current;return a=St(t,a),ar(t,s),n=So(e,t,n,i,a,s),i=To(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(et&&i&&fo(t),t.flags|=1,Rt(e,t,n,s),t.child)}function Va(e,t,n,i,s){if(lt(n)){var a=!0;We(t)}else a=!1;if(ar(t,s),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),ia(t,n,i),co(t,n,i,s),i=!0;else if(e===null){var v=t.stateNode,O=t.memoizedProps;v.props=O;var B=v.context,X=n.contextType;typeof X=="object"&&X!==null?X=Zt(X):(X=lt(n)?Xe:Ge.current,X=St(t,X));var le=n.getDerivedStateFromProps,Te=typeof le=="function"||typeof v.getSnapshotBeforeUpdate=="function";Te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(O!==i||B!==X)&&sa(t,v,i,X),On=!1;var _e=t.memoizedState;v.state=_e,Di(t,i,v,s),B=t.memoizedState,O!==i||_e!==B||Re.current||On?(typeof le=="function"&&(uo(t,n,le,i),B=t.memoizedState),(O=On||ra(t,n,O,i,_e,B,X))?(Te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(t.flags|=4194308)):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=B),v.props=i,v.state=B,v.context=X,i=O):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{v=t.stateNode,$l(e,t),O=t.memoizedProps,X=t.type===t.elementType?O:en(t.type,O),v.props=X,Te=t.pendingProps,_e=v.context,B=n.contextType,typeof B=="object"&&B!==null?B=Zt(B):(B=lt(n)?Xe:Ge.current,B=St(t,B));var Qe=n.getDerivedStateFromProps;(le=typeof Qe=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(O!==Te||_e!==B)&&sa(t,v,i,B),On=!1,_e=t.memoizedState,v.state=_e,Di(t,i,v,s);var he=t.memoizedState;O!==Te||_e!==he||Re.current||On?(typeof Qe=="function"&&(uo(t,n,Qe,i),he=t.memoizedState),(X=On||ra(t,n,X,i,_e,he,B)||!1)?(le||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(i,he,B),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(i,he,B)),typeof v.componentDidUpdate=="function"&&(t.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof v.componentDidUpdate!="function"||O===e.memoizedProps&&_e===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||O===e.memoizedProps&&_e===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=he),v.props=i,v.state=he,v.context=B,i=X):(typeof v.componentDidUpdate!="function"||O===e.memoizedProps&&_e===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||O===e.memoizedProps&&_e===e.memoizedState||(t.flags|=1024),i=!1)}return Io(e,t,n,i,a,s)}function Io(e,t,n,i,s,a){Ya(e,t);var v=(t.flags&128)!==0;if(!i&&!v)return s&&Ae(t,n,!1),Tn(e,t,a);i=t.stateNode,pf.current=t;var O=v&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&v?(t.child=dr(t,e.child,null,a),t.child=dr(t,null,O,a)):Rt(e,t,O,a),t.memoizedState=i.state,s&&Ae(t,n,!0),t.child}function Wa(e){var t=e.stateNode;t.pendingContext?je(e,t.pendingContext,t.pendingContext!==t.context):t.context&&je(e,t.context,!1),_o(e,t.containerInfo)}function Ga(e,t,n,i,s){return fr(),go(s),t.flags|=256,Rt(e,t,n,i),t.child}var Ji={dehydrated:null,treeContext:null,retryLane:0};function qi(e){return{baseLanes:e,cachePool:null}}function Qa(e,t,n){var i=t.pendingProps,s=tt.current,a=!1,v=(t.flags&128)!==0,O;if((O=v)||(O=e!==null&&e.memoizedState===null?!1:(s&2)!==0),O?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Oe(tt,s&1),e===null)return mo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?zr(e)?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=i.children,e=i.fallback,a?(i=t.mode,a=t.child,s={mode:"hidden",children:s},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=_s(s,i,0,null),e=$n(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=qi(n),t.memoizedState=Ji,e):Lo(t,s));if(s=e.memoizedState,s!==null){if(O=s.dehydrated,O!==null){if(v)return t.flags&256?(t.flags&=-257,bi(e,t,n,Error(d(422)))):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=i.fallback,s=t.mode,i=_s({mode:"visible",children:i.children},s,0,null),a=$n(a,s,n,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,t.mode&1&&dr(t,e.child,null,n),t.child.memoizedState=qi(n),t.memoizedState=Ji,a);if(!(t.mode&1))t=bi(e,t,n,null);else if(zr(O))t=bi(e,t,n,Error(d(419)));else if(i=(n&e.childLanes)!==0,Nt||i){if(i=at,i!==null){switch(n&-n){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}i=a&(i.suspendedLanes|n)?0:a,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gt(e,i,-1))}qo(),t=bi(e,t,n,Error(d(421)))}else Yn(O)?(t.flags|=128,t.child=e.child,t=Mf.bind(null,e),Vn(O,t),t=null):(n=s.treeContext,Et&&(At=Js(O),Ft=t,et=!0,tn=null,Ar=!1,n!==null&&(jt[Yt++]=En,jt[Yt++]=wn,jt[Yt++]=Wn,En=n.id,wn=n.overflow,Wn=t)),t=Lo(t,t.pendingProps.children),t.flags|=4096);return t}return a?(i=Ka(e,t,i.children,i.fallback,n),a=t.child,s=e.child.memoizedState,a.memoizedState=s===null?qi(n):{baseLanes:s.baseLanes|n,cachePool:null},a.childLanes=e.childLanes&~n,t.memoizedState=Ji,i):(n=Xa(e,t,i.children,n),t.memoizedState=null,n)}return a?(i=Ka(e,t,i.children,i.fallback,n),a=t.child,s=e.child.memoizedState,a.memoizedState=s===null?qi(n):{baseLanes:s.baseLanes|n,cachePool:null},a.childLanes=e.childLanes&~n,t.memoizedState=Ji,i):(n=Xa(e,t,i.children,n),t.memoizedState=null,n)}function Lo(e,t){return t=_s({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xa(e,t,n,i){var s=e.child;return e=s.sibling,n=Un(s,{mode:"visible",children:n}),!(t.mode&1)&&(n.lanes=i),n.return=t,n.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function Ka(e,t,n,i,s){var a=t.mode;e=e.child;var v=e.sibling,O={mode:"hidden",children:n};return!(a&1)&&t.child!==e?(n=t.child,n.childLanes=0,n.pendingProps=O,t.deletions=null):(n=Un(e,O),n.subtreeFlags=e.subtreeFlags&14680064),v!==null?i=Un(v,i):(i=$n(i,a,s,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,i}function bi(e,t,n,i){return i!==null&&go(i),dr(t,e.child,null,n),e=Lo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ja(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),lo(e.return,t,n)}function Uo(e,t,n,i,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=s)}function qa(e,t,n){var i=t.pendingProps,s=i.revealOrder,a=i.tail;if(Rt(e,t,i.children,n),i=tt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ja(e,n,t);else if(e.tag===19)Ja(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Oe(tt,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Bi(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Uo(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Bi(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Uo(t,!0,n,null,a);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),_r|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(d(153));if(t.child!==null){for(e=t.child,n=Un(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Un(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function mf(e,t,n){switch(t.tag){case 3:Wa(t),fr();break;case 5:ha(t);break;case 1:lt(t.type)&&We(t);break;case 4:_o(t,t.stateNode.containerInfo);break;case 10:bl(t,t.type._context,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Oe(tt,tt.current&1),t.flags|=128,null):n&t.child.childLanes?Qa(e,t,n):(Oe(tt,tt.current&1),e=Tn(e,t,n),e!==null?e.sibling:null);Oe(tt,tt.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return qa(e,t,n);t.flags|=128}var s=t.memoizedState;if(s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Oe(tt,tt.current),i)break;return null;case 22:case 23:return t.lanes=0,ja(e,t,n)}return Tn(e,t,n)}function gf(e,t){switch(ho(t),t.tag){case 1:return lt(t.type)&&vt(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pr(),we(Re),we(Ge),Eo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return vo(t),null;case 13:if(we(tt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(d(340));fr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return we(tt),null;case 4:return pr(),null;case 10:return oo(t.type._context),null;case 22:case 23:return Jo(),null;case 24:return null;default:return null}}var $i=!1,Xn=!1,_f=typeof WeakSet=="function"?WeakSet:Set,ne=null;function es(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){zt(e,t,i)}else n.current=null}function ko(e,t,n){try{n()}catch(i){zt(e,t,i)}}var ba=!1;function vf(e,t){for(ae(e.containerInfo),ne=t;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var n=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(n!==null){var i=n.memoizedProps,s=n.memoizedState,a=e.stateNode,v=a.getSnapshotBeforeUpdate(e.elementType===e.type?i:en(e.type,i),s);a.__reactInternalSnapshotBeforeUpdate=v}break;case 3:Lt&&Vs(e.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(d(163))}}catch(O){zt(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return n=ba,ba=!1,n}function Kn(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&ko(t,n,a)}s=s.next}while(s!==i)}}function Kr(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function zo(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=ve(n);break;default:e=n}typeof t=="function"?t(e):t.current=e}}function $a(e,t,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(Ri,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var i=e=e.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&ko(t,n,a),i=i.next}while(i!==e)}break;case 1:if(es(t,n),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(v){zt(t,n,v)}break;case 5:es(t,n);break;case 4:Lt?su(e,t,n):sr&&sr&&(t=t.stateNode.containerInfo,n=Ei(t),Si(t,n))}}function eu(e,t,n){for(var i=t;;)if($a(e,i,n),i.child===null||Lt&&i.tag===4){if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function tu(e){var t=e.alternate;t!==null&&(e.alternate=null,tu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ks(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nu(e){return e.tag===5||e.tag===3||e.tag===4}function ru(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function iu(e){if(Lt){e:{for(var t=e.return;t!==null;){if(nu(t))break e;t=t.return}throw Error(d(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,n.flags&32&&(Mt(t),n.flags&=-33),n=ru(e),Fo(e,n,t);break;case 3:case 4:t=n.stateNode.containerInfo,n=ru(e),Do(e,n,t);break;default:throw Error(d(161))}}}function Do(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?wt(n,e,t):or(n,e);else if(i!==4&&(e=e.child,e!==null))for(Do(e,t,n),e=e.sibling;e!==null;)Do(e,t,n),e=e.sibling}function Fo(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?Zn(n,e,t):vi(n,e);else if(i!==4&&(e=e.child,e!==null))for(Fo(e,t,n),e=e.sibling;e!==null;)Fo(e,t,n),e=e.sibling}function su(e,t,n){for(var i=t,s=!1,a,v;;){if(!s){s=i.return;e:for(;;){if(s===null)throw Error(d(160));switch(a=s.stateNode,s.tag){case 5:v=!1;break e;case 3:a=a.containerInfo,v=!0;break e;case 4:a=a.containerInfo,v=!0;break e}s=s.return}s=!0}if(i.tag===5||i.tag===6)eu(e,i,n),v?xn(a,i.stateNode):yi(a,i.stateNode);else if(i.tag===18)v?V(a,i.stateNode):Q(a,i.stateNode);else if(i.tag===4){if(i.child!==null){a=i.stateNode.containerInfo,v=!0,i.child.return=i,i=i.child;continue}}else if($a(e,i,n),i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return,i.tag===4&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function Ao(e,t){if(Lt){switch(t.tag){case 0:case 11:case 14:case 15:Kn(3,t,t.return),Kr(3,t),Kn(5,t,t.return);return;case 1:return;case 5:var n=t.stateNode;if(n!=null){var i=t.memoizedProps;e=e!==null?e.memoizedProps:i;var s=t.type,a=t.updateQueue;t.updateQueue=null,a!==null&&js(n,a,s,e,i,t)}return;case 6:if(t.stateNode===null)throw Error(d(162));n=t.memoizedProps,Bs(t.stateNode,e!==null?e.memoizedProps:n,n);return;case 3:Et&&e!==null&&e.memoizedState.isDehydrated&&N(t.stateNode.containerInfo);return;case 12:return;case 13:ts(t);return;case 19:ts(t);return;case 17:return}throw Error(d(163))}switch(t.tag){case 0:case 11:case 14:case 15:Kn(3,t,t.return),Kr(3,t),Kn(5,t,t.return);return;case 12:return;case 13:ts(t);return;case 19:ts(t);return;case 3:Et&&e!==null&&e.memoizedState.isDehydrated&&N(t.stateNode.containerInfo);break;case 22:case 23:return}e:if(sr){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Si(t.containerInfo,t.pendingChildren);break e}throw Error(d(163))}}function ts(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new _f),t.forEach(function(i){var s=Pf.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}}function yf(e,t){for(ne=t;ne!==null;){t=ne;var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var a=e;Lt?su(a,s,t):eu(a,s,t);var v=s.alternate;v!==null&&(v.return=null),s.return=null}catch(fe){zt(s,t,fe)}}if(n=t.child,t.subtreeFlags&12854&&n!==null)n.return=t,ne=n;else for(;ne!==null;){t=ne;try{var O=t.flags;if(O&32&&Lt&&Mt(t.stateNode),O&512){var B=t.alternate;if(B!==null){var X=B.ref;X!==null&&(typeof X=="function"?X(null):X.current=null)}}if(O&8192)switch(t.tag){case 13:if(t.memoizedState!==null){var le=t.alternate;(le===null||le.memoizedState===null)&&(Vo=pt())}break;case 22:var Te=t.memoizedState!==null,_e=t.alternate,Qe=_e!==null&&_e.memoizedState!==null;if(n=t,Lt){e:if(i=n,s=Te,a=null,Lt)for(var he=i;;){if(he.tag===5){if(a===null){a=he;var Ot=he.stateNode;s?ht(Ot):se(he.stateNode,he.memoizedProps)}}else if(he.tag===6){if(a===null){var Xt=he.stateNode;s?Ys(Xt):jn(Xt,he.memoizedProps)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===i)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===i)break;for(;he.sibling===null;){if(he.return===null||he.return===i)break e;a===he&&(a=null),he=he.return}a===he&&(a=null),he.sibling.return=he.return,he=he.sibling}}if(Te&&!Qe&&n.mode&1){ne=n;for(var I=n.child;I!==null;){for(n=ne=I;ne!==null;){i=ne;var M=i.child;switch(i.tag){case 0:case 11:case 14:case 15:Kn(4,i,i.return);break;case 1:es(i,i.return);var z=i.stateNode;if(typeof z.componentWillUnmount=="function"){var ie=i.return;try{z.props=i.memoizedProps,z.state=i.memoizedState,z.componentWillUnmount()}catch(fe){zt(i,ie,fe)}}break;case 5:es(i,i.return);break;case 22:if(i.memoizedState!==null){au(n);continue}}M!==null?(M.return=i,ne=M):au(n)}I=I.sibling}}}switch(O&4102){case 2:iu(t),t.flags&=-3;break;case 6:iu(t),t.flags&=-3,Ao(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Ao(t.alternate,t);break;case 4:Ao(t.alternate,t)}}catch(fe){zt(t,t.return,fe)}if(n=t.sibling,n!==null){n.return=t.return,ne=n;break}ne=t.return}}}function Ef(e,t,n){ne=e,ou(e)}function ou(e,t,n){for(var i=(e.mode&1)!==0;ne!==null;){var s=ne,a=s.child;if(s.tag===22&&i){var v=s.memoizedState!==null||$i;if(!v){var O=s.alternate,B=O!==null&&O.memoizedState!==null||Xn;O=$i;var X=Xn;if($i=v,(Xn=B)&&!X)for(ne=s;ne!==null;)v=ne,B=v.child,v.tag===22&&v.memoizedState!==null?uu(s):B!==null?(B.return=v,ne=B):uu(s);for(;a!==null;)ne=a,ou(a),a=a.sibling;ne=s,$i=O,Xn=X}lu(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ne=a):lu(e)}}function lu(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xn||Kr(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Xn)if(n===null)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&ta(t,a,i);break;case 3:var v=t.updateQueue;if(v!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=ve(t.child.stateNode);break;case 1:n=t.child.stateNode}ta(t,v,n)}break;case 5:var O=t.stateNode;n===null&&t.flags&4&&Zs(O,t.type,t.memoizedProps,t);break;case 6:break;case 4:break;case 12:break;case 13:if(Et&&t.memoizedState===null){var B=t.alternate;if(B!==null){var X=B.memoizedState;if(X!==null){var le=X.dehydrated;le!==null&&H(le)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(d(163))}Xn||t.flags&512&&zo(t)}catch(Te){zt(t,t.return,Te)}}if(t===e){ne=null;break}if(n=t.sibling,n!==null){n.return=t.return,ne=n;break}ne=t.return}}function au(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ne=n;break}ne=t.return}}function uu(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Kr(4,t)}catch(B){zt(t,n,B)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(B){zt(t,s,B)}}var a=t.return;try{zo(t)}catch(B){zt(t,a,B)}break;case 5:var v=t.return;try{zo(t)}catch(B){zt(t,v,B)}}}catch(B){zt(t,t.return,B)}if(t===e){ne=null;break}var O=t.sibling;if(O!==null){O.return=t.return,ne=O;break}ne=t.return}}var ns=0,rs=1,is=2,ss=3,os=4;if(typeof Symbol=="function"&&Symbol.for){var Jr=Symbol.for;ns=Jr("selector.component"),rs=Jr("selector.has_pseudo_class"),is=Jr("selector.role"),ss=Jr("selector.test_id"),os=Jr("selector.text")}function No(e){var t=mi(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(d(364));return t}if(e=Fs(e),e===null)throw Error(d(362));return e.stateNode.current}function Ho(e,t){switch(t.$$typeof){case ns:if(e.type===t.value)return!0;break;case rs:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var i=e[n++],s=e[n++],a=t[s];if(i.tag!==5||!Bn(i)){for(;a!=null&&Ho(i,a);)s++,a=t[s];if(s===t.length){t=!0;break e}else for(i=i.child;i!==null;)e.push(i,s),i=i.sibling}}t=!1}return t;case is:if(e.tag===5&&kr(e.stateNode,t.value))return!0;break;case os:if((e.tag===5||e.tag===6)&&(e=_i(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case ss:if(e.tag===5&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(d(365))}return!1}function Bo(e){switch(e.$$typeof){case ns:return"<"+(K(e.value)||"Unknown")+">";case rs:return":has("+(Bo(e)||"")+")";case is:return'[role="'+e.value+'"]';case os:return'"'+e.value+'"';case ss:return'[data-testname="'+e.value+'"]';default:throw Error(d(365))}}function cu(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var s=e[i++],a=e[i++],v=t[a];if(s.tag!==5||!Bn(s)){for(;v!=null&&Ho(s,v);)a++,v=t[a];if(a===t.length)n.push(s);else for(s=s.child;s!==null;)e.push(s,a),s=s.sibling}}return n}function Zo(e,t){if(!Hn)throw Error(d(363));e=No(e),e=cu(e,t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++];if(i.tag===5)Bn(i)||t.push(i.stateNode);else for(i=i.child;i!==null;)e.push(i),i=i.sibling}return t}var wf=Math.ceil,ls=_.ReactCurrentDispatcher,jo=_.ReactCurrentOwner,st=_.ReactCurrentBatchConfig,Le=0,at=null,ut=null,yt=0,Ht=0,gr=ze(0),ft=0,qr=null,_r=0,as=0,Yo=0,br=null,Ut=null,Vo=0,Wo=1/0;function vr(){Wo=pt()+500}var us=!1,Go=null,Pn=null,cs=!1,Rn=null,fs=0,$r=0,Qo=null,ds=-1,hs=0;function It(){return Le&6?pt():ds!==-1?ds:ds=pt()}function In(e){return e.mode&1?Le&2&&yt!==0?yt&-yt:nf.transition!==null?(hs===0&&(e=Oi,Oi<<=1,!(Oi&4194240)&&(Oi=64),hs=e),hs):(e=Ne,e!==0?e:Us()):1}function Gt(e,t,n){if(50<$r)throw $r=0,Qo=null,Error(d(185));var i=ps(e,t);return i===null?null:(Fr(i,t,n),(!(Le&2)||i!==at)&&(i===at&&(!(Le&2)&&(as|=t),ft===4&&Ln(i,yt)),kt(i,n),t===1&&Le===0&&!(e.mode&1)&&(vr(),Ii&&un())),i)}function ps(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function kt(e,t){var n=e.callbackNode;Qc(e,t);var i=Pi(e,e===at?yt:0);if(i===0)n!==null&&Jl(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Jl(n),t===1)e.tag===0?tf(du.bind(null,e)):ql(du.bind(null,e)),zs?Ds(function(){Le===0&&un()}):eo(to,un),n=null;else{switch(Kl(i)){case 1:n=to;break;case 4:n=qc;break;case 16:n=no;break;case 536870912:n=bc;break;default:n=no}n=wu(n,fu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function fu(e,t){if(ds=-1,hs=0,Le&6)throw Error(d(327));var n=e.callbackNode;if(bn()&&e.callbackNode!==n)return null;var i=Pi(e,e===at?yt:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=ms(e,i);else{t=i;var s=Le;Le|=2;var a=mu();(at!==e||yt!==t)&&(vr(),Jn(e,t));do try{Cf();break}catch(O){pu(e,O)}while(!0);so(),ls.current=a,Le=s,ut!==null?t=0:(at=null,yt=0,t=ft)}if(t!==0){if(t===2&&(s=qs(e),s!==0&&(i=s,t=Xo(e,s))),t===1)throw n=qr,Jn(e,0),Ln(e,i),kt(e,pt()),n;if(t===6)Ln(e,i);else{if(s=e.current.alternate,!(i&30)&&!Sf(s)&&(t=ms(e,i),t===2&&(a=qs(e),a!==0&&(i=a,t=Xo(e,a))),t===1))throw n=qr,Jn(e,0),Ln(e,i),kt(e,pt()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(d(345));case 2:qn(e,Ut);break;case 3:if(Ln(e,i),(i&130023424)===i&&(t=Vo+500-pt(),10<t)){if(Pi(e,0)!==0)break;if(s=e.suspendedLanes,(s&i)!==i){It(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=_t(qn.bind(null,e,Ut),t);break}qn(e,Ut);break;case 4:if(Ln(e,i),(i&4194240)===i)break;for(t=e.eventTimes,s=-1;0<i;){var v=31-$e(i);a=1<<v,v=t[v],v>s&&(s=v),i&=~a}if(i=s,i=pt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*wf(i/1960))-i,10<i){e.timeoutHandle=_t(qn.bind(null,e,Ut),i);break}qn(e,Ut);break;case 5:qn(e,Ut);break;default:throw Error(d(329))}}}return kt(e,pt()),e.callbackNode===n?fu.bind(null,e):null}function Xo(e,t){var n=br;return e.current.memoizedState.isDehydrated&&(Jn(e,t).flags|=256),e=ms(e,t),e!==2&&(t=Ut,Ut=n,t!==null&&Ko(t)),e}function Ko(e){Ut===null?Ut=e:Ut.push.apply(Ut,e)}function Sf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],a=s.getSnapshot;s=s.value;try{if(!an(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ln(e,t){for(t&=~Yo,t&=~as,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-$e(t),i=1<<n;e[n]=-1,t&=~i}}function du(e){if(Le&6)throw Error(d(327));bn();var t=Pi(e,0);if(!(t&1))return kt(e,pt()),null;var n=ms(e,t);if(e.tag!==0&&n===2){var i=qs(e);i!==0&&(t=i,n=Xo(e,i))}if(n===1)throw n=qr,Jn(e,0),Ln(e,t),kt(e,pt()),n;if(n===6)throw Error(d(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,qn(e,Ut),kt(e,pt()),null}function hu(e){Rn!==null&&Rn.tag===0&&!(Le&6)&&bn();var t=Le;Le|=1;var n=st.transition,i=Ne;try{if(st.transition=null,Ne=1,e)return e()}finally{Ne=i,st.transition=n,Le=t,!(Le&6)&&un()}}function Jo(){Ht=gr.current,we(gr)}function Jn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==Ur&&(e.timeoutHandle=Ur,bt(n)),ut!==null)for(n=ut.return;n!==null;){var i=n;switch(ho(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&vt();break;case 3:pr(),we(Re),we(Ge),Eo();break;case 5:vo(i);break;case 4:pr();break;case 13:we(tt);break;case 19:we(tt);break;case 10:oo(i.type._context);break;case 22:case 23:Jo()}n=n.return}if(at=e,ut=e=Un(e.current,null),yt=Ht=t,ft=0,qr=null,Yo=as=_r=0,Ut=br=null,cn!==null){for(t=0;t<cn.length;t++)if(n=cn[t],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,a=n.pending;if(a!==null){var v=a.next;a.next=s,i.next=v}n.pending=i}cn=null}return e}function pu(e,t){do{var n=ut;try{if(so(),Zi.current=Qi,ji){for(var i=it.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ji=!1}if(mr=0,mt=Tt=it=null,jr=!1,Yr=0,jo.current=null,n===null||n.return===null){ft=1,qr=t,ut=null;break}e:{var a=e,v=n.return,O=n,B=t;if(t=yt,O.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var X=B,le=O,Te=le.tag;if(!(le.mode&1)&&(Te===0||Te===11||Te===15)){var _e=le.alternate;_e?(le.updateQueue=_e.updateQueue,le.memoizedState=_e.memoizedState,le.lanes=_e.lanes):(le.updateQueue=null,le.memoizedState=null)}var Qe=Da(v);if(Qe!==null){Qe.flags&=-257,Fa(Qe,v,O,a,t),Qe.mode&1&&za(a,X,t),t=Qe,B=X;var he=t.updateQueue;if(he===null){var Ot=new Set;Ot.add(B),t.updateQueue=Ot}else he.add(B);break e}else{if(!(t&1)){za(a,X,t),qo();break e}B=Error(d(426))}}else if(et&&O.mode&1){var Xt=Da(v);if(Xt!==null){!(Xt.flags&65536)&&(Xt.flags|=256),Fa(Xt,v,O,a,t),go(B);break e}}a=B,ft!==4&&(ft=2),br===null?br=[a]:br.push(a),B=Mo(B,O),O=v;do{switch(O.tag){case 3:O.flags|=65536,t&=-t,O.lanes|=t;var I=Ua(O,B,t);ea(O,I);break e;case 1:a=B;var M=O.type,z=O.stateNode;if(!(O.flags&128)&&(typeof M.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Pn===null||!Pn.has(z)))){O.flags|=65536,t&=-t,O.lanes|=t;var ie=ka(O,a,t);ea(O,ie);break e}}O=O.return}while(O!==null)}_u(n)}catch(fe){t=fe,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function mu(){var e=ls.current;return ls.current=Qi,e===null?Qi:e}function qo(){(ft===0||ft===3||ft===2)&&(ft=4),at===null||!(_r&268435455)&&!(as&268435455)||Ln(at,yt)}function ms(e,t){var n=Le;Le|=2;var i=mu();at===e&&yt===t||Jn(e,t);do try{Tf();break}catch(s){pu(e,s)}while(!0);if(so(),Le=n,ls.current=i,ut!==null)throw Error(d(261));return at=null,yt=0,ft}function Tf(){for(;ut!==null;)gu(ut)}function Cf(){for(;ut!==null&&!Kc();)gu(ut)}function gu(e){var t=Eu(e.alternate,e,Ht);e.memoizedProps=e.pendingProps,t===null?_u(e):ut=t,jo.current=null}function _u(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=gf(n,t),n!==null){n.flags&=32767,ut=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ft=6,ut=null;return}}else if(n=hf(n,t,Ht),n!==null){ut=n;return}if(t=t.sibling,t!==null){ut=t;return}ut=t=e}while(t!==null);ft===0&&(ft=5)}function qn(e,t){var n=Ne,i=st.transition;try{st.transition=null,Ne=1,xf(e,t,n)}finally{st.transition=i,Ne=n}return null}function xf(e,t,n){do bn();while(Rn!==null);if(Le&6)throw Error(d(327));var i=e.finishedWork,s=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(d(177));e.callbackNode=null,e.callbackPriority=0;var a=i.lanes|i.childLanes;if(Xc(e,a),e===at&&(ut=at=null,yt=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||cs||(cs=!0,wu(no,function(){return bn(),null})),a=(i.flags&15990)!==0,i.subtreeFlags&15990||a){a=st.transition,st.transition=null;var v=Ne;Ne=1;var O=Le;Le|=4,jo.current=null,vf(e,i),yf(e,i),J(e.containerInfo),e.current=i,Ef(i),Jc(),Le=O,Ne=v,st.transition=a}else e.current=i;if(cs&&(cs=!1,Rn=e,fs=s),a=e.pendingLanes,a===0&&(Pn=null),$c(i.stateNode),kt(e,pt()),t!==null)for(n=e.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(us)throw us=!1,e=Go,Go=null,e;return fs&1&&e.tag!==0&&bn(),a=e.pendingLanes,a&1?e===Qo?$r++:($r=0,Qo=e):$r=0,un(),null}function bn(){if(Rn!==null){var e=Kl(fs),t=st.transition,n=Ne;try{if(st.transition=null,Ne=16>e?16:e,Rn===null)var i=!1;else{if(e=Rn,Rn=null,fs=0,Le&6)throw Error(d(331));var s=Le;for(Le|=4,ne=e.current;ne!==null;){var a=ne,v=a.child;if(ne.flags&16){var O=a.deletions;if(O!==null){for(var B=0;B<O.length;B++){var X=O[B];for(ne=X;ne!==null;){var le=ne;switch(le.tag){case 0:case 11:case 15:Kn(8,le,a)}var Te=le.child;if(Te!==null)Te.return=le,ne=Te;else for(;ne!==null;){le=ne;var _e=le.sibling,Qe=le.return;if(tu(le),le===X){ne=null;break}if(_e!==null){_e.return=Qe,ne=_e;break}ne=Qe}}}var he=a.alternate;if(he!==null){var Ot=he.child;if(Ot!==null){he.child=null;do{var Xt=Ot.sibling;Ot.sibling=null,Ot=Xt}while(Ot!==null)}}ne=a}}if(a.subtreeFlags&2064&&v!==null)v.return=a,ne=v;else e:for(;ne!==null;){if(a=ne,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Kn(9,a,a.return)}var I=a.sibling;if(I!==null){I.return=a.return,ne=I;break e}ne=a.return}}var M=e.current;for(ne=M;ne!==null;){v=ne;var z=v.child;if(v.subtreeFlags&2064&&z!==null)z.return=v,ne=z;else e:for(v=M;ne!==null;){if(O=ne,O.flags&2048)try{switch(O.tag){case 0:case 11:case 15:Kr(9,O)}}catch(fe){zt(O,O.return,fe)}if(O===v){ne=null;break e}var ie=O.sibling;if(ie!==null){ie.return=O.return,ne=ie;break e}ne=O.return}}if(Le=s,un(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(Ri,e)}catch{}i=!0}return i}finally{Ne=n,st.transition=t}}return!1}function vu(e,t,n){t=Mo(n,t),t=Ua(e,t,1),Mn(e,t),t=It(),e=ps(e,1),e!==null&&(Fr(e,1,t),kt(e,t))}function zt(e,t,n){if(e.tag===3)vu(e,e,n);else for(;t!==null;){if(t.tag===3){vu(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Pn===null||!Pn.has(i))){e=Mo(n,e),e=ka(t,e,1),Mn(t,e),e=It(),t=ps(t,1),t!==null&&(Fr(t,1,e),kt(t,e));break}}t=t.return}}function Of(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=It(),e.pingedLanes|=e.suspendedLanes&n,at===e&&(yt&n)===n&&(ft===4||ft===3&&(yt&130023424)===yt&&500>pt()-Vo?Jn(e,0):Yo|=n),kt(e,t)}function yu(e,t){t===0&&(e.mode&1?(t=Mi,Mi<<=1,!(Mi&130023424)&&(Mi=4194304)):t=1);var n=It();e=ps(e,t),e!==null&&(Fr(e,t,n),kt(e,n))}function Mf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),yu(e,n)}function Pf(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(d(314))}i!==null&&i.delete(t),yu(e,n)}var Eu;Eu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Re.current)Nt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nt=!1,mf(e,t,n);Nt=!!(e.flags&131072)}else Nt=!1,et&&t.flags&1048576&&oa(t,Ni,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var s=St(t,Ge.current);ar(t,n),s=So(null,t,i,e,s,n);var a=To();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,lt(i)?(a=!0,We(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ao(t),s.updater=Fi,t.stateNode=s,s._reactInternals=t,co(t,i,e,n),t=Io(null,t,i,!0,a,n)):(t.tag=0,et&&a&&fo(t),Rt(null,t,s,n),t=t.child),t;case 16:i=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=If(i),e=en(i,e),s){case 0:t=Ro(null,t,i,e,n);break e;case 1:t=Va(null,t,i,e,n);break e;case 11:t=Ha(null,t,i,e,n);break e;case 14:t=Ba(null,t,i,en(i.type,e),n);break e}throw Error(d(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:en(i,s),Ro(e,t,i,s,n);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:en(i,s),Va(e,t,i,s,n);case 3:e:{if(Wa(t),e===null)throw Error(d(387));i=t.pendingProps,a=t.memoizedState,s=a.element,$l(e,t),Di(t,i,null,n);var v=t.memoizedState;if(i=v.element,Et&&a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:v.cache,transitions:v.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=Error(d(423)),t=Ga(e,t,i,n,s);break e}else if(i!==s){s=Error(d(424)),t=Ga(e,t,i,n,s);break e}else for(Et&&(At=xi(t.stateNode.containerInfo),Ft=t,et=!0,tn=null,Ar=!1),n=da(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fr(),i===s){t=Tn(e,t,n);break e}Rt(e,t,i,n)}t=t.child}return t;case 5:return ha(t),e===null&&mo(t),i=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,v=s.children,dt(i,s)?v=null:a!==null&&dt(i,a)&&(t.flags|=32),Ya(e,t),Rt(e,t,v,n),t.child;case 6:return e===null&&mo(t),null;case 13:return Qa(e,t,n);case 4:return _o(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=dr(t,null,i,n):Rt(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:en(i,s),Ha(e,t,i,s,n);case 7:return Rt(e,t,t.pendingProps,n),t.child;case 8:return Rt(e,t,t.pendingProps.children,n),t.child;case 12:return Rt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,a=t.memoizedProps,v=s.value,bl(t,i,v),a!==null)if(an(a.value,v)){if(a.children===s.children&&!Re.current){t=Tn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var O=a.dependencies;if(O!==null){v=a.child;for(var B=O.firstContext;B!==null;){if(B.context===i){if(a.tag===1){B=yn(-1,n&-n),B.tag=2;var X=a.updateQueue;if(X!==null){X=X.shared;var le=X.pending;le===null?B.next=B:(B.next=le.next,le.next=B),X.pending=B}}a.lanes|=n,B=a.alternate,B!==null&&(B.lanes|=n),lo(a.return,n,t),O.lanes|=n;break}B=B.next}}else if(a.tag===10)v=a.type===t.type?null:a.child;else if(a.tag===18){if(v=a.return,v===null)throw Error(d(341));v.lanes|=n,O=v.alternate,O!==null&&(O.lanes|=n),lo(v,n,t),v=a.sibling}else v=a.child;if(v!==null)v.return=a;else for(v=a;v!==null;){if(v===t){v=null;break}if(a=v.sibling,a!==null){a.return=v.return,v=a;break}v=v.return}a=v}Rt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,ar(t,n),s=Zt(s),i=i(s),t.flags|=1,Rt(e,t,i,n),t.child;case 14:return i=t.type,s=en(i,t.pendingProps),s=en(i.type,s),Ba(e,t,i,s,n);case 15:return Za(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:en(i,s),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,lt(i)?(e=!0,We(t)):e=!1,ar(t,n),ia(t,i,s),co(t,i,s,n),Io(null,t,i,!0,e,n);case 19:return qa(e,t,n);case 22:return ja(e,t,n)}throw Error(d(156,t.tag))};function wu(e,t){return eo(e,t)}function Rf(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,n,i){return new Rf(e,t,n,i)}function bo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function If(e){if(typeof e=="function")return bo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===F)return 11;if(e===x)return 14}return 2}function Un(e,t){var n=e.alternate;return n===null?(n=Qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function gs(e,t,n,i,s,a){var v=2;if(i=e,typeof e=="function")bo(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case m:return $n(n.children,s,a,t);case g:v=8,s|=8;break;case S:return e=Qt(12,n,t,s|2),e.elementType=S,e.lanes=a,e;case D:return e=Qt(13,n,t,s),e.elementType=D,e.lanes=a,e;case E:return e=Qt(19,n,t,s),e.elementType=E,e.lanes=a,e;case k:return _s(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:v=10;break e;case P:v=9;break e;case F:v=11;break e;case x:v=14;break e;case R:v=16,i=null;break e}throw Error(d(130,e==null?e:typeof e,""))}return t=Qt(v,n,t,s),t.elementType=e,t.type=i,t.lanes=a,t}function $n(e,t,n,i){return e=Qt(7,e,i,t),e.lanes=n,e}function _s(e,t,n,i){return e=Qt(22,e,i,t),e.elementType=k,e.lanes=n,e.stateNode={},e}function $o(e,t,n){return e=Qt(6,e,null,t),e.lanes=n,e}function el(e,t,n){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lf(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ur,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bs(0),this.expirationTimes=bs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bs(0),this.identifierPrefix=i,this.onRecoverableError=s,Et&&(this.mutableSourceEagerHydrationData=null)}function Su(e,t,n,i,s,a,v,O,B){return e=new Lf(e,t,n,O,B),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Qt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},ao(a),e}function Tu(e){if(!e)return De;e=e._reactInternals;e:{if(Y(e)!==e||e.tag!==1)throw Error(d(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(d(171))}if(e.tag===1){var n=e.type;if(lt(n))return ct(e,n,t)}return t}function Cu(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=oe(t),e===null?null:e.stateNode}function xu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function tl(e,t){xu(e,t),(e=e.alternate)&&xu(e,t)}function Uf(e){return e=oe(e),e===null?null:e.stateNode}function kf(){return null}return o.attemptContinuousHydration=function(e){if(e.tag===13){var t=It();Gt(e,134217728,t),tl(e,134217728)}},o.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=It(),n=In(e);Gt(e,n,t),tl(e,n)}},o.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Dr(t.pendingLanes);n!==0&&($s(t,n|1),kt(t,pt()),!(Le&6)&&(vr(),un()))}break;case 13:var i=It();hu(function(){return Gt(e,1,i)}),tl(e,1)}},o.batchedUpdates=function(e,t){var n=Le;Le|=1;try{return e(t)}finally{Le=n,Le===0&&(vr(),Ii&&un())}},o.createComponentSelector=function(e){return{$$typeof:ns,value:e}},o.createContainer=function(e,t,n,i,s,a,v){return Su(e,t,!1,null,n,i,s,a,v)},o.createHasPseudoClassSelector=function(e){return{$$typeof:rs,value:e}},o.createHydrationContainer=function(e,t,n,i,s,a,v,O,B){return e=Su(n,i,!0,e,s,a,v,O,B),e.context=Tu(null),n=e.current,i=It(),s=In(n),a=yn(i,s),a.callback=t??null,Mn(n,a),e.current.lanes=s,Fr(e,s,i),kt(e,i),e},o.createPortal=function(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:w,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}},o.createRoleSelector=function(e){return{$$typeof:is,value:e}},o.createTestNameSelector=function(e){return{$$typeof:ss,value:e}},o.createTextSelector=function(e){return{$$typeof:os,value:e}},o.deferredUpdates=function(e){var t=Ne,n=st.transition;try{return st.transition=null,Ne=16,e()}finally{Ne=t,st.transition=n}},o.discreteUpdates=function(e,t,n,i,s){var a=Ne,v=st.transition;try{return st.transition=null,Ne=1,e(t,n,i,s)}finally{Ne=a,st.transition=v,Le===0&&vr()}},o.findAllNodes=Zo,o.findBoundingRects=function(e,t){if(!Hn)throw Error(d(363));t=Zo(e,t),e=[];for(var n=0;n<t.length;n++)e.push(As(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var i=n.x,s=i+n.width,a=n.y,v=a+n.height,O=t-1;0<=O;O--)if(t!==O){var B=e[O],X=B.x,le=X+B.width,Te=B.y,_e=Te+B.height;if(i>=X&&a>=Te&&s<=le&&v<=_e){e.splice(t,1);break}else if(i!==X||n.width!==B.width||_e<a||Te>v){if(!(a!==Te||n.height!==B.height||le<i||X>s)){X>i&&(B.width+=X-i,B.x=i),le<s&&(B.width=s-X),e.splice(t,1);break}}else{Te>a&&(B.height+=Te-a,B.y=a),_e<v&&(B.height=v-Te),e.splice(t,1);break}}}return e},o.findHostInstance=Cu,o.findHostInstanceWithNoPortals=function(e){return e=G(e),e=e!==null?ce(e):null,e===null?null:e.stateNode},o.findHostInstanceWithWarning=function(e){return Cu(e)},o.flushControlled=function(e){var t=Le;Le|=1;var n=st.transition,i=Ne;try{st.transition=null,Ne=1,e()}finally{Ne=i,st.transition=n,Le=t,Le===0&&(vr(),un())}},o.flushPassiveEffects=bn,o.flushSync=hu,o.focusWithin=function(e,t){if(!Hn)throw Error(d(363));for(e=No(e),t=cu(e,t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!Bn(n)){if(n.tag===5&&Ns(n.stateNode))return!0;for(n=n.child;n!==null;)t.push(n),n=n.sibling}}return!1},o.getCurrentUpdatePriority=function(){return Ne},o.getFindAllNodesFailureDescription=function(e,t){if(!Hn)throw Error(d(363));var n=0,i=[];e=[No(e),0];for(var s=0;s<e.length;){var a=e[s++],v=e[s++],O=t[v];if((a.tag!==5||!Bn(a))&&(Ho(a,O)&&(i.push(Bo(O)),v++,v>n&&(n=v)),v<t.length))for(a=a.child;a!==null;)e.push(a,v),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Bo(t[n]));return`findAllNodes was able to match part of the selector:
  `+(i.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},o.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return ve(e.child.stateNode);default:return e.child.stateNode}},o.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:Uf,findFiberByHostInstance:e.findFiberByHostInstance||kf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Ri=t.inject(e),ln=t}catch{}e=!!t.checkDCE}}return e},o.isAlreadyRendering=function(){return!1},o.observeVisibleRects=function(e,t,n,i){if(!Hn)throw Error(d(363));e=Zo(e,t);var s=Hs(e,n,i).disconnect;return{disconnect:function(){s()}}},o.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},o.runWithPriority=function(e,t){var n=Ne;try{return Ne=e,t()}finally{Ne=n}},o.shouldError=function(){return null},o.shouldSuspend=function(){return!1},o.updateContainer=function(e,t,n,i){var s=t.current,a=It(),v=In(s);return n=Tu(n),t.context===null?t.context=n:t.pendingContext=n,t=yn(a,v),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),Mn(s,t),e=Gt(s,v,a),e!==null&&zi(e,s,v),v},o};uc.exports=wd;var Sd=uc.exports;const Td=ic(Sd),Fl={},Al=l=>void Object.assign(Fl,l);function Cd(l,r){function o(m,{args:g=[],attach:S,...C},P){let F=`${m[0].toUpperCase()}${m.slice(1)}`,D;if(m==="primitive"){if(C.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const E=C.object;D=Cr(E,{type:m,root:P,attach:S,primitive:!0})}else{const E=Fl[F];if(!E)throw new Error(`R3F: ${F} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(g))throw new Error("R3F: The args prop must be an array!");D=Cr(new E(...g),{type:m,root:P,attach:S,memoizedProps:{args:g}})}return D.__r3f.attach===void 0&&(D.isBufferGeometry?D.__r3f.attach="geometry":D.isMaterial&&(D.__r3f.attach="material")),F!=="inject"&&ll(D,C),D}function u(m,g){let S=!1;if(g){var C,P;(C=g.__r3f)!=null&&C.attach?ol(m,g,g.__r3f.attach):g.isObject3D&&m.isObject3D&&(m.add(g),S=!0),S||(P=m.__r3f)==null||P.objects.push(g),g.__r3f||Cr(g,{}),g.__r3f.parent=m,Ol(g),xr(g)}}function f(m,g,S){let C=!1;if(g){var P,F;if((P=g.__r3f)!=null&&P.attach)ol(m,g,g.__r3f.attach);else if(g.isObject3D&&m.isObject3D){g.parent=m,g.dispatchEvent({type:"added"}),m.dispatchEvent({type:"childadded",child:g});const D=m.children.filter(x=>x!==g),E=D.indexOf(S);m.children=[...D.slice(0,E),g,...D.slice(E)],C=!0}C||(F=m.__r3f)==null||F.objects.push(g),g.__r3f||Cr(g,{}),g.__r3f.parent=m,Ol(g),xr(g)}}function h(m,g,S=!1){m&&[...m].forEach(C=>d(g,C,S))}function d(m,g,S){if(g){var C,P,F;if(g.__r3f&&(g.__r3f.parent=null),(C=m.__r3f)!=null&&C.objects&&(m.__r3f.objects=m.__r3f.objects.filter(k=>k!==g)),(P=g.__r3f)!=null&&P.attach)Uu(m,g,g.__r3f.attach);else if(g.isObject3D&&m.isObject3D){var D;m.remove(g),(D=g.__r3f)!=null&&D.root&&Ld(Ms(g),g)}const x=(F=g.__r3f)==null?void 0:F.primitive,R=!x&&(S===void 0?g.dispose!==null:S);if(!x){var E;h((E=g.__r3f)==null?void 0:E.objects,g,R),h(g.children,g,R)}if(delete g.__r3f,R&&g.dispose&&g.type!=="Scene"){const k=()=>{try{g.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?Cl.unstable_scheduleCallback(Cl.unstable_IdlePriority,k):k()}xr(m)}}function _(m,g,S,C){var P;const F=(P=m.__r3f)==null?void 0:P.parent;if(!F)return;const D=o(g,S,m.__r3f.root);if(m.children){for(const E of m.children)E.__r3f&&u(D,E);m.children=m.children.filter(E=>!E.__r3f)}m.__r3f.objects.forEach(E=>u(D,E)),m.__r3f.objects=[],m.__r3f.autoRemovedBeforeAppend||d(F,m),D.parent&&(D.__r3f.autoRemovedBeforeAppend=!0),u(F,D),D.raycast&&D.__r3f.eventCount&&Ms(D).getState().internal.interaction.push(D),[C,C.alternate].forEach(E=>{E!==null&&(E.stateNode=D,E.ref&&(typeof E.ref=="function"?E.ref(D):E.ref.current=D))})}const y=()=>{};return{reconciler:Td({createInstance:o,removeChild:d,appendChild:u,appendInitialChild:u,insertBefore:f,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(m,g)=>{if(!g)return;const S=m.getState().scene;S.__r3f&&(S.__r3f.root=m,u(S,g))},removeChildFromContainer:(m,g)=>{g&&d(m.getState().scene,g)},insertInContainerBefore:(m,g,S)=>{if(!g||!S)return;const C=m.getState().scene;C.__r3f&&f(C,g,S)},getRootHostContext:()=>null,getChildHostContext:m=>m,finalizeInitialChildren(m){var g;return!!((g=m==null?void 0:m.__r3f)!=null?g:{}).handlers},prepareUpdate(m,g,S,C){var P;if(((P=m==null?void 0:m.__r3f)!=null?P:{}).primitive&&C.object&&C.object!==m)return[!0];{const{args:D=[],children:E,...x}=C,{args:R=[],children:k,...U}=S;if(!Array.isArray(D))throw new Error("R3F: the args prop must be an array!");if(D.some((K,Z)=>K!==R[Z]))return[!0];const A=vc(m,x,U,!0);return A.changes.length?[!1,A]:null}},commitUpdate(m,[g,S],C,P,F,D){g?_(m,C,F,D):ll(m,S)},commitMount(m,g,S,C){var P;const F=(P=m.__r3f)!=null?P:{};m.raycast&&F.handlers&&F.eventCount&&Ms(m).getState().internal.interaction.push(m)},getPublicInstance:m=>m,prepareForCommit:()=>null,preparePortalMount:m=>Cr(m.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(m){var g;const{attach:S,parent:C}=(g=m.__r3f)!=null?g:{};S&&C&&Uu(C,m,S),m.isObject3D&&(m.visible=!1),xr(m)},unhideInstance(m,g){var S;const{attach:C,parent:P}=(S=m.__r3f)!=null?S:{};C&&P&&ol(P,m,C),(m.isObject3D&&g.visible==null||g.visible)&&(m.visible=!0),xr(m)},createTextInstance:y,hideTextInstance:y,unhideTextInstance:y,getCurrentEventPriority:()=>r(),beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Je.fun(performance.now)?performance.now:Je.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Je.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Je.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ll}}var Pu,Ru;const sl=l=>"colorSpace"in l||"outputColorSpace"in l,dc=()=>{var l;return(l=Fl.ColorManagement)!=null?l:null},hc=l=>l&&l.isOrthographicCamera,xd=l=>l&&l.hasOwnProperty("current"),hi=typeof window<"u"&&((Pu=window.document)!=null&&Pu.createElement||((Ru=window.navigator)==null?void 0:Ru.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function pc(l){const r=W.useRef(l);return hi(()=>void(r.current=l),[l]),r}function Od({set:l}){return hi(()=>(l(new Promise(()=>null)),()=>l(!1)),[l]),null}class mc extends W.Component{constructor(...r){super(...r),this.state={error:!1}}componentDidCatch(r){this.props.set(r)}render(){return this.state.error?null:this.props.children}}mc.getDerivedStateFromError=()=>({error:!0});const gc="__default",Iu=new Map,Md=l=>l&&!!l.memoized&&!!l.changes;function _c(l){var r;const o=typeof window<"u"?(r=window.devicePixelRatio)!=null?r:2:1;return Array.isArray(l)?Math.min(Math.max(l[0],o),l[1]):l}const ei=l=>{var r;return(r=l.__r3f)==null?void 0:r.root.getState()};function Ms(l){let r=l.__r3f.root;for(;r.getState().previousRoot;)r=r.getState().previousRoot;return r}const Je={obj:l=>l===Object(l)&&!Je.arr(l)&&typeof l!="function",fun:l=>typeof l=="function",str:l=>typeof l=="string",num:l=>typeof l=="number",boo:l=>typeof l=="boolean",und:l=>l===void 0,arr:l=>Array.isArray(l),equ(l,r,{arrays:o="shallow",objects:u="reference",strict:f=!0}={}){if(typeof l!=typeof r||!!l!=!!r)return!1;if(Je.str(l)||Je.num(l)||Je.boo(l))return l===r;const h=Je.obj(l);if(h&&u==="reference")return l===r;const d=Je.arr(l);if(d&&o==="reference")return l===r;if((d||h)&&l===r)return!0;let _;for(_ in l)if(!(_ in r))return!1;if(h&&o==="shallow"&&u==="shallow"){for(_ in f?r:l)if(!Je.equ(l[_],r[_],{strict:f,objects:"reference"}))return!1}else for(_ in f?r:l)if(l[_]!==r[_])return!1;if(Je.und(_)){if(d&&l.length===0&&r.length===0||h&&Object.keys(l).length===0&&Object.keys(r).length===0)return!0;if(l!==r)return!1}return!0}};function Pd(l){const r={nodes:{},materials:{}};return l&&l.traverse(o=>{o.name&&(r.nodes[o.name]=o),o.material&&!r.materials[o.material.name]&&(r.materials[o.material.name]=o.material)}),r}function Rd(l){l.dispose&&l.type!=="Scene"&&l.dispose();for(const r in l)r.dispose==null||r.dispose(),delete l[r]}function Cr(l,r){const o=l;return o.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...r},l}function xl(l,r){let o=l;if(r.includes("-")){const u=r.split("-"),f=u.pop();return o=u.reduce((h,d)=>h[d],l),{target:o,key:f}}else return{target:o,key:r}}const Lu=/-\d+$/;function ol(l,r,o){if(Je.str(o)){if(Lu.test(o)){const h=o.replace(Lu,""),{target:d,key:_}=xl(l,h);Array.isArray(d[_])||(d[_]=[])}const{target:u,key:f}=xl(l,o);r.__r3f.previousAttach=u[f],u[f]=r}else r.__r3f.previousAttach=o(l,r)}function Uu(l,r,o){var u,f;if(Je.str(o)){const{target:h,key:d}=xl(l,o),_=r.__r3f.previousAttach;_===void 0?delete h[d]:h[d]=_}else(u=r.__r3f)==null||u.previousAttach==null||u.previousAttach(l,r);(f=r.__r3f)==null||delete f.previousAttach}function vc(l,{children:r,key:o,ref:u,...f},{children:h,key:d,ref:_,...y}={},w=!1){const m=l.__r3f,g=Object.entries(f),S=[];if(w){const P=Object.keys(y);for(let F=0;F<P.length;F++)f.hasOwnProperty(P[F])||g.unshift([P[F],gc+"remove"])}g.forEach(([P,F])=>{var D;if((D=l.__r3f)!=null&&D.primitive&&P==="object"||Je.equ(F,y[P]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(P))return S.push([P,F,!0,[]]);let E=[];P.includes("-")&&(E=P.split("-")),S.push([P,F,!1,E]);for(const x in f){const R=f[x];x.startsWith(`${P}-`)&&S.push([x,R,!1,x.split("-")])}});const C={...f};return m!=null&&m.memoizedProps&&m!=null&&m.memoizedProps.args&&(C.args=m.memoizedProps.args),m!=null&&m.memoizedProps&&m!=null&&m.memoizedProps.attach&&(C.attach=m.memoizedProps.attach),{memoized:C,changes:S}}function ll(l,r){var o;const u=l.__r3f,f=u==null?void 0:u.root,h=f==null||f.getState==null?void 0:f.getState(),{memoized:d,changes:_}=Md(r)?r:vc(l,r),y=u==null?void 0:u.eventCount;l.__r3f&&(l.__r3f.memoizedProps=d);for(let S=0;S<_.length;S++){let[C,P,F,D]=_[S];if(sl(l)){const k="srgb",U="srgb-linear";C==="encoding"?(C="colorSpace",P=P===3001?k:U):C==="outputEncoding"&&(C="outputColorSpace",P=P===3001?k:U)}let E=l,x=E[C];if(D.length&&(x=D.reduce((R,k)=>R[k],l),!(x&&x.set))){const[R,...k]=D.reverse();E=k.reverse().reduce((U,A)=>U[A],l),C=R}if(P===gc+"remove")if(E.constructor){let R=Iu.get(E.constructor);R||(R=new E.constructor,Iu.set(E.constructor,R)),P=R[C]}else P=0;if(F&&u)P?u.handlers[C]=P:delete u.handlers[C],u.eventCount=Object.keys(u.handlers).length;else if(x&&x.set&&(x.copy||x instanceof nl)){if(Array.isArray(P))x.fromArray?x.fromArray(P):x.set(...P);else if(x.copy&&P&&P.constructor&&x.constructor===P.constructor)x.copy(P);else if(P!==void 0){var w;const R=(w=x)==null?void 0:w.isColor;!R&&x.setScalar?x.setScalar(P):x instanceof nl&&P instanceof nl?x.mask=P.mask:x.set(P),!dc()&&h&&!h.linear&&R&&x.convertSRGBToLinear()}}else{var m;if(E[C]=P,(m=E[C])!=null&&m.isTexture&&E[C].format===Rr&&E[C].type===Ps&&h){const R=E[C];sl(R)&&sl(h.gl)?R.colorSpace=h.gl.outputColorSpace:R.encoding=h.gl.outputEncoding}}xr(l)}if(u&&u.parent&&l.raycast&&y!==u.eventCount){const S=Ms(l).getState().internal,C=S.interaction.indexOf(l);C>-1&&S.interaction.splice(C,1),u.eventCount&&S.interaction.push(l)}return!(_.length===1&&_[0][0]==="onUpdate")&&_.length&&(o=l.__r3f)!=null&&o.parent&&Ol(l),l}function xr(l){var r,o;const u=(r=l.__r3f)==null||(o=r.root)==null||o.getState==null?void 0:o.getState();u&&u.internal.frames===0&&u.invalidate()}function Ol(l){l.onUpdate==null||l.onUpdate(l)}function yc(l,r){l.manual||(hc(l)?(l.left=r.width/-2,l.right=r.width/2,l.top=r.height/2,l.bottom=r.height/-2):l.aspect=r.width/r.height,l.updateProjectionMatrix(),l.updateMatrixWorld())}function vs(l){return(l.eventObject||l.object).uuid+"/"+l.index+l.instanceId}function Id(){var l;const r=typeof self<"u"&&self||typeof window<"u"&&window;if(!r)return ui.DefaultEventPriority;switch((l=r.event)==null?void 0:l.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ui.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ui.ContinuousEventPriority;default:return ui.DefaultEventPriority}}function Ec(l,r,o,u){const f=o.get(r);f&&(o.delete(r),o.size===0&&(l.delete(u),f.target.releasePointerCapture(u)))}function Ld(l,r){const{internal:o}=l.getState();o.interaction=o.interaction.filter(u=>u!==r),o.initialHits=o.initialHits.filter(u=>u!==r),o.hovered.forEach((u,f)=>{(u.eventObject===r||u.object===r)&&o.hovered.delete(f)}),o.capturedMap.forEach((u,f)=>{Ec(o.capturedMap,r,u,f)})}function Ud(l){function r(y){const{internal:w}=l.getState(),m=y.offsetX-w.initialClick[0],g=y.offsetY-w.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function o(y){return y.filter(w=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=w.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function u(y,w){const m=l.getState(),g=new Set,S=[],C=w?w(m.internal.interaction):m.internal.interaction;for(let E=0;E<C.length;E++){const x=ei(C[E]);x&&(x.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(y,m);function P(E){const x=ei(E);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var R;x.events.compute==null||x.events.compute(y,x,(R=x.previousRoot)==null?void 0:R.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(E,!0):[]}let F=C.flatMap(P).sort((E,x)=>{const R=ei(E.object),k=ei(x.object);return!R||!k?E.distance-x.distance:k.events.priority-R.events.priority||E.distance-x.distance}).filter(E=>{const x=vs(E);return g.has(x)?!1:(g.add(x),!0)});m.events.filter&&(F=m.events.filter(F,m));for(const E of F){let x=E.object;for(;x;){var D;(D=x.__r3f)!=null&&D.eventCount&&S.push({...E,eventObject:x}),x=x.parent}}if("pointerId"in y&&m.internal.capturedMap.has(y.pointerId))for(let E of m.internal.capturedMap.get(y.pointerId).values())g.has(vs(E.intersection))||S.push(E.intersection);return S}function f(y,w,m,g){const S=l.getState();if(y.length){const C={stopped:!1};for(const P of y){const F=ei(P.object)||S,{raycaster:D,pointer:E,camera:x,internal:R}=F,k=new sn(E.x,E.y,0).unproject(x),U=re=>{var G,oe;return(G=(oe=R.capturedMap.get(re))==null?void 0:oe.has(P.eventObject))!=null?G:!1},A=re=>{const G={intersection:P,target:w.target};R.capturedMap.has(re)?R.capturedMap.get(re).set(P.eventObject,G):R.capturedMap.set(re,new Map([[P.eventObject,G]])),w.target.setPointerCapture(re)},K=re=>{const G=R.capturedMap.get(re);G&&Ec(R.capturedMap,P.eventObject,G,re)};let Z={};for(let re in w){let G=w[re];typeof G!="function"&&(Z[re]=G)}let Y={...P,...Z,pointer:E,intersections:y,stopped:C.stopped,delta:m,unprojectedPoint:k,ray:D.ray,camera:x,stopPropagation(){const re="pointerId"in w&&R.capturedMap.get(w.pointerId);if((!re||re.has(P.eventObject))&&(Y.stopped=C.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(G=>G.eventObject===P.eventObject))){const G=y.slice(0,y.indexOf(P));h([...G,P])}},target:{hasPointerCapture:U,setPointerCapture:A,releasePointerCapture:K},currentTarget:{hasPointerCapture:U,setPointerCapture:A,releasePointerCapture:K},nativeEvent:w};if(g(Y),C.stopped===!0)break}}return y}function h(y){const{internal:w}=l.getState();for(const m of w.hovered.values())if(!y.length||!y.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const S=m.eventObject.__r3f,C=S==null?void 0:S.handlers;if(w.hovered.delete(vs(m)),S!=null&&S.eventCount){const P={...m,intersections:y};C.onPointerOut==null||C.onPointerOut(P),C.onPointerLeave==null||C.onPointerLeave(P)}}}function d(y,w){for(let m=0;m<w.length;m++){const g=w[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(y)}}function _(y){switch(y){case"onPointerLeave":case"onPointerCancel":return()=>h([]);case"onLostPointerCapture":return w=>{const{internal:m}=l.getState();"pointerId"in w&&m.capturedMap.has(w.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(w.pointerId)&&(m.capturedMap.delete(w.pointerId),h([]))})}}return function(m){const{onPointerMissed:g,internal:S}=l.getState();S.lastEvent.current=m;const C=y==="onPointerMove",P=y==="onClick"||y==="onContextMenu"||y==="onDoubleClick",D=u(m,C?o:void 0),E=P?r(m):0;y==="onPointerDown"&&(S.initialClick=[m.offsetX,m.offsetY],S.initialHits=D.map(R=>R.eventObject)),P&&!D.length&&E<=2&&(d(m,S.interaction),g&&g(m)),C&&h(D);function x(R){const k=R.eventObject,U=k.__r3f,A=U==null?void 0:U.handlers;if(U!=null&&U.eventCount)if(C){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const K=vs(R),Z=S.hovered.get(K);Z?Z.stopped&&R.stopPropagation():(S.hovered.set(K,R),A.onPointerOver==null||A.onPointerOver(R),A.onPointerEnter==null||A.onPointerEnter(R))}A.onPointerMove==null||A.onPointerMove(R)}else{const K=A[y];K?(!P||S.initialHits.includes(k))&&(d(m,S.interaction.filter(Z=>!S.initialHits.includes(Z))),K(R)):P&&S.initialHits.includes(k)&&d(m,S.interaction.filter(Z=>!S.initialHits.includes(Z)))}}f(D,m,E,x)}}return{handlePointer:_}}const kd=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],wc=l=>!!(l!=null&&l.render),Nl=W.createContext(null),zd=(l,r)=>{const o=oc((_,y)=>{const w=new sn,m=new sn,g=new sn;function S(E=y().camera,x=m,R=y().size){const{width:k,height:U,top:A,left:K}=R,Z=k/U;x.isVector3?g.copy(x):g.set(...x);const Y=E.getWorldPosition(w).distanceTo(g);if(hc(E))return{width:k/E.zoom,height:U/E.zoom,top:A,left:K,factor:1,distance:Y,aspect:Z};{const re=E.fov*Math.PI/180,G=2*Math.tan(re/2)*Y,oe=G*(k/U);return{width:oe,height:G,top:A,left:K,factor:k/oe,distance:Y,aspect:Z}}}let C;const P=E=>_(x=>({performance:{...x.performance,current:E}})),F=new kl;return{set:_,get:y,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(E=1)=>l(y(),E),advance:(E,x)=>r(E,x,y()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new jf,pointer:F,mouse:F,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const E=y();C&&clearTimeout(C),E.performance.current!==E.performance.min&&P(E.performance.min),C=setTimeout(()=>P(y().performance.max),E.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:S},setEvents:E=>_(x=>({...x,events:{...x.events,...E}})),setSize:(E,x,R,k,U)=>{const A=y().camera,K={width:E,height:x,top:k||0,left:U||0,updateStyle:R};_(Z=>({size:K,viewport:{...Z.viewport,...S(A,m,K)}}))},setDpr:E=>_(x=>{const R=_c(E);return{viewport:{...x.viewport,dpr:R,initialDpr:x.viewport.initialDpr||R}}}),setFrameloop:(E="always")=>{const x=y().clock;x.stop(),x.elapsedTime=0,E!=="never"&&(x.start(),x.elapsedTime=0),_(()=>({frameloop:E}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:W.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(E,x,R)=>{const k=y().internal;return k.priority=k.priority+(x>0?1:0),k.subscribers.push({ref:E,priority:x,store:R}),k.subscribers=k.subscribers.sort((U,A)=>U.priority-A.priority),()=>{const U=y().internal;U!=null&&U.subscribers&&(U.priority=U.priority-(x>0?1:0),U.subscribers=U.subscribers.filter(A=>A.ref!==E))}}}}}),u=o.getState();let f=u.size,h=u.viewport.dpr,d=u.camera;return o.subscribe(()=>{const{camera:_,size:y,viewport:w,gl:m,set:g}=o.getState();if(y.width!==f.width||y.height!==f.height||w.dpr!==h){var S;f=y,h=w.dpr,yc(_,y),m.setPixelRatio(w.dpr);const C=(S=y.updateStyle)!=null?S:typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(y.width,y.height,C)}_!==d&&(d=_,g(C=>({viewport:{...C.viewport,...C.viewport.getCurrentViewport(_)}})))}),o.subscribe(_=>l(_)),o};function Hl(l,r){const o={callback:l};return r.add(o),()=>void r.delete(o)}let ys,Sc=new Set,Tc=new Set,Cc=new Set;const Kh=l=>Hl(l,Sc),Jh=l=>Hl(l,Tc),qh=l=>Hl(l,Cc);function al(l,r){if(l.size)for(const{callback:o}of l.values())o(r)}function ti(l,r){switch(l){case"before":return al(Sc,r);case"after":return al(Tc,r);case"tail":return al(Cc,r)}}let ul,cl;function fl(l,r,o){let u=r.clock.getDelta();for(r.frameloop==="never"&&typeof l=="number"&&(u=l-r.clock.elapsedTime,r.clock.oldTime=r.clock.elapsedTime,r.clock.elapsedTime=l),ul=r.internal.subscribers,ys=0;ys<ul.length;ys++)cl=ul[ys],cl.ref.current(cl.store.getState(),u,o);return!r.internal.priority&&r.gl.render&&r.gl.render(r.scene,r.camera),r.internal.frames=Math.max(0,r.internal.frames-1),r.frameloop==="always"?1:r.internal.frames}function Dd(l){let r=!1,o=!1,u,f,h;function d(w){f=requestAnimationFrame(d),r=!0,u=0,ti("before",w),o=!0;for(const g of l.values()){var m;h=g.store.getState(),h.internal.active&&(h.frameloop==="always"||h.internal.frames>0)&&!((m=h.gl.xr)!=null&&m.isPresenting)&&(u+=fl(w,h))}if(o=!1,ti("after",w),u===0)return ti("tail",w),r=!1,cancelAnimationFrame(f)}function _(w,m=1){var g;if(!w)return l.forEach(S=>_(S.store.getState(),m));(g=w.gl.xr)!=null&&g.isPresenting||!w.internal.active||w.frameloop==="never"||(m>1?w.internal.frames=Math.min(60,w.internal.frames+m):o?w.internal.frames=2:w.internal.frames=1,r||(r=!0,requestAnimationFrame(d)))}function y(w,m=!0,g,S){if(m&&ti("before",w),g)fl(w,g,S);else for(const C of l.values())fl(w,C.store.getState());m&&ti("after",w)}return{loop:d,invalidate:_,advance:y}}function Bl(){const l=W.useContext(Nl);if(!l)throw new Error("R3F: Hooks can only be used within the Canvas component!");return l}function Bt(l=o=>o,r){return Bl()(l,r)}function xc(l,r=0){const o=Bl(),u=o.getState().internal.subscribe,f=pc(l);return hi(()=>u(f,r,o),[r,u,o]),null}const ku=new WeakMap;function Oc(l,r){return function(o,...u){let f=ku.get(o);return f||(f=new o,ku.set(o,f)),l&&l(f),Promise.all(u.map(h=>new Promise((d,_)=>f.load(h,y=>{y.scene&&Object.assign(y,Pd(y.scene)),d(y)},r,y=>_(new Error(`Could not load ${h}: ${y==null?void 0:y.message}`))))))}}function Ir(l,r,o,u){const f=Array.isArray(r)?r:[r],h=vd(Oc(o,u),[l,...f],{equal:Je.equ});return Array.isArray(r)?h:h[0]}Ir.preload=function(l,r,o){const u=Array.isArray(r)?r:[r];return yd(Oc(o),[l,...u])};Ir.clear=function(l,r){const o=Array.isArray(r)?r:[r];return Ed([l,...o])};const Lr=new Map,{invalidate:zu,advance:Du}=Dd(Lr),{reconciler:fi,applyProps:Fn}=Cd(Lr,Id),yr={objects:"shallow",strict:!1},Fd=(l,r)=>{const o=typeof l=="function"?l(r):l;return wc(o)?o:new ec({powerPreference:"high-performance",canvas:r,antialias:!0,alpha:!0,...l})};function Ad(l,r){const o=typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement;if(r){const{width:u,height:f,top:h,left:d,updateStyle:_=o}=r;return{width:u,height:f,top:h,left:d,updateStyle:_}}else if(typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement&&l.parentElement){const{width:u,height:f,top:h,left:d}=l.parentElement.getBoundingClientRect();return{width:u,height:f,top:h,left:d,updateStyle:o}}else if(typeof OffscreenCanvas<"u"&&l instanceof OffscreenCanvas)return{width:l.width,height:l.height,top:0,left:0,updateStyle:o};return{width:0,height:0,top:0,left:0}}function Nd(l){const r=Lr.get(l),o=r==null?void 0:r.fiber,u=r==null?void 0:r.store;r&&console.warn("R3F.createRoot should only be called once!");const f=typeof reportError=="function"?reportError:console.error,h=u||zd(zu,Du),d=o||fi.createContainer(h,ui.ConcurrentRoot,null,!1,null,"",f,null);r||Lr.set(l,{fiber:d,store:h});let _,y=!1,w;return{configure(m={}){let{gl:g,size:S,scene:C,events:P,onCreated:F,shadows:D=!1,linear:E=!1,flat:x=!1,legacy:R=!1,orthographic:k=!1,frameloop:U="always",dpr:A=[1,2],performance:K,raycaster:Z,camera:Y,onPointerMissed:re}=m,G=h.getState(),oe=G.gl;G.gl||G.set({gl:oe=Fd(g,l)});let ge=G.raycaster;ge||G.set({raycaster:ge=new Ll});const{params:ce,...Pe}=Z||{};if(Je.equ(Pe,ge,yr)||Fn(ge,{...Pe}),Je.equ(ce,ge.params,yr)||Fn(ge,{params:{...ge.params,...ce}}),!G.camera||G.camera===w&&!Je.equ(w,Y,yr)){w=Y;const J=Y instanceof Nf,pe=J?Y:k?new $u(0,0,0,0,.1,1e3):new Df(75,0,.1,1e3);J||(pe.position.z=5,Y&&(Fn(pe,Y),("aspect"in Y||"left"in Y||"right"in Y||"bottom"in Y||"top"in Y)&&(pe.manual=!0,pe.updateProjectionMatrix())),!G.camera&&!(Y!=null&&Y.rotation)&&pe.lookAt(0,0,0)),G.set({camera:pe}),ge.camera=pe}if(!G.scene){let J;C!=null&&C.isScene?J=C:(J=new Ul,C&&Fn(J,C)),G.set({scene:Cr(J)})}if(!G.xr){var ve;const J=(ye,qe)=>{const dt=h.getState();dt.frameloop!=="never"&&Du(ye,!0,dt,qe)},pe=()=>{const ye=h.getState();ye.gl.xr.enabled=ye.gl.xr.isPresenting,ye.gl.xr.setAnimationLoop(ye.gl.xr.isPresenting?J:null),ye.gl.xr.isPresenting||zu(ye)},me={connect(){const ye=h.getState().gl;ye.xr.addEventListener("sessionstart",pe),ye.xr.addEventListener("sessionend",pe)},disconnect(){const ye=h.getState().gl;ye.xr.removeEventListener("sessionstart",pe),ye.xr.removeEventListener("sessionend",pe)}};typeof((ve=oe.xr)==null?void 0:ve.addEventListener)=="function"&&me.connect(),G.set({xr:me})}if(oe.shadowMap){const J=oe.shadowMap.enabled,pe=oe.shadowMap.type;if(oe.shadowMap.enabled=!!D,Je.boo(D))oe.shadowMap.type=rl;else if(Je.str(D)){var rt;const me={basic:Hf,percentage:Bf,soft:rl,variance:Zf};oe.shadowMap.type=(rt=me[D])!=null?rt:rl}else Je.obj(D)&&Object.assign(oe.shadowMap,D);(J!==oe.shadowMap.enabled||pe!==oe.shadowMap.type)&&(oe.shadowMap.needsUpdate=!0)}const b=dc();b&&("enabled"in b?b.enabled=!R:"legacyMode"in b&&(b.legacyMode=R)),y||Fn(oe,{outputEncoding:E?3e3:3001,toneMapping:x?Ff:Af}),G.legacy!==R&&G.set(()=>({legacy:R})),G.linear!==E&&G.set(()=>({linear:E})),G.flat!==x&&G.set(()=>({flat:x})),g&&!Je.fun(g)&&!wc(g)&&!Je.equ(g,oe,yr)&&Fn(oe,g),P&&!G.events.handlers&&G.set({events:P(h)});const ae=Ad(l,S);return Je.equ(ae,G.size,yr)||G.setSize(ae.width,ae.height,ae.updateStyle,ae.top,ae.left),A&&G.viewport.dpr!==_c(A)&&G.setDpr(A),G.frameloop!==U&&G.setFrameloop(U),G.onPointerMissed||G.set({onPointerMissed:re}),K&&!Je.equ(K,G.performance,yr)&&G.set(J=>({performance:{...J.performance,...K}})),_=F,y=!0,this},render(m){return y||this.configure(),fi.updateContainer(ot.jsx(Hd,{store:h,children:m,onCreated:_,rootElement:l}),d,null,()=>{}),h},unmount(){Mc(l)}}}function Hd({store:l,children:r,onCreated:o,rootElement:u}){return hi(()=>{const f=l.getState();f.set(h=>({internal:{...h.internal,active:!0}})),o&&o(f),l.getState().events.connected||f.events.connect==null||f.events.connect(u)},[]),ot.jsx(Nl.Provider,{value:l,children:r})}function Mc(l,r){const o=Lr.get(l),u=o==null?void 0:o.fiber;if(u){const f=o==null?void 0:o.store.getState();f&&(f.internal.active=!1),fi.updateContainer(null,u,null,()=>{f&&setTimeout(()=>{try{var h,d,_,y;f.events.disconnect==null||f.events.disconnect(),(h=f.gl)==null||(d=h.renderLists)==null||d.dispose==null||d.dispose(),(_=f.gl)==null||_.forceContextLoss==null||_.forceContextLoss(),(y=f.gl)!=null&&y.xr&&f.xr.disconnect(),Rd(f),Lr.delete(l)}catch{}},500)})}}function Bd(l,r,o){return ot.jsx(Zd,{children:l,container:r,state:o},r.uuid)}function Zd({state:l={},children:r,container:o}){const{events:u,size:f,...h}=l,d=Bl(),[_]=W.useState(()=>new Ll),[y]=W.useState(()=>new kl),w=W.useCallback((g,S)=>{const C={...g};Object.keys(g).forEach(F=>{(kd.includes(F)||g[F]!==S[F]&&S[F])&&delete C[F]});let P;if(S&&f){const F=S.camera;P=g.viewport.getCurrentViewport(F,new sn,f),F!==g.camera&&yc(F,f)}return{...C,scene:o,raycaster:_,pointer:y,mouse:y,previousRoot:d,events:{...g.events,...S==null?void 0:S.events,...u},size:{...g.size,...f},viewport:{...g.viewport,...P},...h}},[l]),[m]=W.useState(()=>{const g=d.getState();return oc((C,P)=>({...g,scene:o,raycaster:_,pointer:y,mouse:y,previousRoot:d,events:{...g.events,...u},size:{...g.size,...f},...h,set:C,get:P,setEvents:F=>C(D=>({...D,events:{...D.events,...F}}))}))});return W.useEffect(()=>{const g=d.subscribe(S=>m.setState(C=>w(S,C)));return()=>{g()}},[w]),W.useEffect(()=>{m.setState(g=>w(d.getState(),g))},[w]),W.useEffect(()=>()=>{m.destroy()},[]),ot.jsx(ot.Fragment,{children:fi.createPortal(ot.jsx(Nl.Provider,{value:m,children:r}),m,null)})}fi.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:W.version});const dl={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function jd(l){const{handlePointer:r}=Ud(l);return{priority:1,enabled:!0,compute(o,u,f){u.pointer.set(o.offsetX/u.size.width*2-1,-(o.offsetY/u.size.height)*2+1),u.raycaster.setFromCamera(u.pointer,u.camera)},connected:void 0,handlers:Object.keys(dl).reduce((o,u)=>({...o,[u]:r(u)}),{}),update:()=>{var o;const{events:u,internal:f}=l.getState();(o=f.lastEvent)!=null&&o.current&&u.handlers&&u.handlers.onPointerMove(f.lastEvent.current)},connect:o=>{var u;const{set:f,events:h}=l.getState();h.disconnect==null||h.disconnect(),f(d=>({events:{...d.events,connected:o}})),Object.entries((u=h.handlers)!=null?u:[]).forEach(([d,_])=>{const[y,w]=dl[d];o.addEventListener(y,_,{passive:w})})},disconnect:()=>{const{set:o,events:u}=l.getState();if(u.connected){var f;Object.entries((f=u.handlers)!=null?f:[]).forEach(([h,d])=>{if(u&&u.connected instanceof HTMLElement){const[_]=dl[h];u.connected.removeEventListener(_,d)}}),o(h=>({events:{...h.events,connected:void 0}}))}}}}function Ml(l,r,o){var u,f,h,d,_;r==null&&(r=100);function y(){var m=Date.now()-d;m<r&&m>=0?u=setTimeout(y,r-m):(u=null,o||(_=l.apply(h,f),h=f=null))}var w=function(){h=this,f=arguments,d=Date.now();var m=o&&!u;return u||(u=setTimeout(y,r)),m&&(_=l.apply(h,f),h=f=null),_};return w.clear=function(){u&&(clearTimeout(u),u=null)},w.flush=function(){u&&(_=l.apply(h,f),h=f=null,clearTimeout(u),u=null)},w}Ml.debounce=Ml;var Yd=Ml;const Fu=ic(Yd);var Vd=Object.defineProperty,Wd=Object.defineProperties,Gd=Object.getOwnPropertyDescriptors,Au=Object.getOwnPropertySymbols,Qd=Object.prototype.hasOwnProperty,Xd=Object.prototype.propertyIsEnumerable,Nu=(l,r,o)=>r in l?Vd(l,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[r]=o,Hu=(l,r)=>{for(var o in r||(r={}))Qd.call(r,o)&&Nu(l,o,r[o]);if(Au)for(var o of Au(r))Xd.call(r,o)&&Nu(l,o,r[o]);return l},Kd=(l,r)=>Wd(l,Gd(r)),Bu,Zu;typeof window<"u"&&((Bu=window.document)!=null&&Bu.createElement||((Zu=window.navigator)==null?void 0:Zu.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function Pc(l,r,o){if(!l)return;if(o(l)===!0)return l;let u=l.child;for(;u;){const f=Pc(u,r,o);if(f)return f;u=u.sibling}}function Rc(l){try{return Object.defineProperties(l,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return l}}const ju=console.error;console.error=function(){const l=[...arguments].join("");if(l!=null&&l.startsWith("Warning:")&&l.includes("useContext")){console.error=ju;return}return ju.apply(this,arguments)};const Zl=Rc(W.createContext(null));class Ic extends W.Component{render(){return W.createElement(Zl.Provider,{value:this._reactInternals},this.props.children)}}function Jd(){const l=W.useContext(Zl);if(l===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const r=W.useId();return W.useMemo(()=>{for(const u of[l,l==null?void 0:l.alternate]){if(!u)continue;const f=Pc(u,!1,h=>{let d=h.memoizedState;for(;d;){if(d.memoizedState===r)return!0;d=d.next}});if(f)return f}},[l,r])}function qd(){const l=Jd(),[r]=W.useState(()=>new Map);r.clear();let o=l;for(;o;){if(o.type&&typeof o.type=="object"){const f=o.type._context===void 0&&o.type.Provider===o.type?o.type:o.type._context;f&&f!==Zl&&!r.has(f)&&r.set(f,W.useContext(Rc(f)))}o=o.return}return r}function bd(){const l=qd();return W.useMemo(()=>Array.from(l.keys()).reduce((r,o)=>u=>W.createElement(r,null,W.createElement(o.Provider,Kd(Hu({},u),{value:l.get(o)}))),r=>W.createElement(Ic,Hu({},r))),[l])}function $d({debounce:l,scroll:r,polyfill:o,offsetSize:u}={debounce:0,scroll:!1,offsetSize:!1}){const f=o||typeof window<"u"&&window.ResizeObserver,[h,d]=W.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!f)return h.width=1280,h.height=800,[()=>{},h,()=>{}];const _=W.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:h,orientationHandler:null}),y=l?typeof l=="number"?l:l.scroll:null,w=l?typeof l=="number"?l:l.resize:null,m=W.useRef(!1);W.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,S,C]=W.useMemo(()=>{const E=()=>{if(!_.current.element)return;const{left:x,top:R,width:k,height:U,bottom:A,right:K,x:Z,y:Y}=_.current.element.getBoundingClientRect(),re={left:x,top:R,width:k,height:U,bottom:A,right:K,x:Z,y:Y};_.current.element instanceof HTMLElement&&u&&(re.height=_.current.element.offsetHeight,re.width=_.current.element.offsetWidth),Object.freeze(re),m.current&&!rh(_.current.lastBounds,re)&&d(_.current.lastBounds=re)};return[E,w?Fu(E,w):E,y?Fu(E,y):E]},[d,u,y,w]);function P(){_.current.scrollContainers&&(_.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",C,!0)),_.current.scrollContainers=null),_.current.resizeObserver&&(_.current.resizeObserver.disconnect(),_.current.resizeObserver=null),_.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",_.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",_.current.orientationHandler))}function F(){var E;_.current.element&&(_.current.resizeObserver=new f(S),(E=_.current.resizeObserver)==null||E.observe(_.current.element),r&&_.current.scrollContainers&&_.current.scrollContainers.forEach(x=>x.addEventListener("scroll",C,{capture:!0,passive:!0})),_.current.orientationHandler=()=>{C()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",_.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",_.current.orientationHandler))}const D=E=>{!E||E===_.current.element||(P(),_.current.element=E,_.current.scrollContainers=Lc(E),F())};return th(C,!!r),eh(S),W.useEffect(()=>{P(),F()},[r,C,S]),W.useEffect(()=>P,[]),[D,h,g]}function eh(l){W.useEffect(()=>{const r=l;return window.addEventListener("resize",r),()=>void window.removeEventListener("resize",r)},[l])}function th(l,r){W.useEffect(()=>{if(r){const o=l;return window.addEventListener("scroll",o,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",o,!0)}},[l,r])}function Lc(l){const r=[];if(!l||l===document.body)return r;const{overflow:o,overflowX:u,overflowY:f}=window.getComputedStyle(l);return[o,u,f].some(h=>h==="auto"||h==="scroll")&&r.push(l),[...r,...Lc(l.parentElement)]}const nh=["x","y","top","bottom","left","right","width","height"],rh=(l,r)=>nh.every(o=>l[o]===r[o]),ih=W.forwardRef(function({children:r,fallback:o,resize:u,style:f,gl:h,events:d=jd,eventSource:_,eventPrefix:y,shadows:w,linear:m,flat:g,legacy:S,orthographic:C,frameloop:P,dpr:F,performance:D,raycaster:E,camera:x,scene:R,onPointerMissed:k,onCreated:U,...A},K){W.useMemo(()=>Al(Yf),[]);const Z=bd(),[Y,re]=$d({scroll:!0,debounce:{scroll:50,resize:0},...u}),G=W.useRef(null),oe=W.useRef(null);W.useImperativeHandle(K,()=>G.current);const ge=pc(k),[ce,Pe]=W.useState(!1),[ve,rt]=W.useState(!1);if(ce)throw ce;if(ve)throw ve;const b=W.useRef(null);hi(()=>{const J=G.current;re.width>0&&re.height>0&&J&&(b.current||(b.current=Nd(J)),b.current.configure({gl:h,events:d,shadows:w,linear:m,flat:g,legacy:S,orthographic:C,frameloop:P,dpr:F,performance:D,raycaster:E,camera:x,scene:R,size:re,onPointerMissed:(...pe)=>ge.current==null?void 0:ge.current(...pe),onCreated:pe=>{pe.events.connect==null||pe.events.connect(_?xd(_)?_.current:_:oe.current),y&&pe.setEvents({compute:(me,ye)=>{const qe=me[y+"X"],dt=me[y+"Y"];ye.pointer.set(qe/ye.size.width*2-1,-(dt/ye.size.height)*2+1),ye.raycaster.setFromCamera(ye.pointer,ye.camera)}}),U==null||U(pe)}}),b.current.render(ot.jsx(Z,{children:ot.jsx(mc,{set:rt,children:ot.jsx(W.Suspense,{fallback:ot.jsx(Od,{set:Pe}),children:r})})})))}),W.useEffect(()=>{const J=G.current;if(J)return()=>Mc(J)},[]);const ae=_?"none":"auto";return ot.jsx("div",{ref:oe,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ae,...f},...A,children:ot.jsx("div",{ref:Y,style:{width:"100%",height:"100%"},children:ot.jsx("canvas",{ref:G,style:{display:"block"},children:o})})})}),sh=W.forwardRef(function(r,o){return ot.jsx(Ic,{children:ot.jsx(ih,{...r,ref:o})})}),bh=Math.PI,Yu=2*Math.PI,oh=Math.PI/2,$h=Math.PI/4,ep=Math.PI/8;function tp(l,r){for(;r<-Math.PI;)r+=Yu;for(;r>Math.PI;)r-=Yu;const o=Math.atan2(l[1],l[0]),u=Math.tan(r);let f;r>-o&&r<=o?f=1:r>o&&r<=Math.PI-o?f=2:r>Math.PI-o||r<=-(Math.PI-o)?f=3:f=4;const h=[0,0];let d=1,_=1;switch(f){case 1:_=-1;break;case 2:_=-1;break;case 3:d=-1;break;case 4:d=-1;break}return f===1||f===3?(h[0]+=d*(l[0]/2),h[1]+=_*(l[0]/2)*u):(h[0]+=d*(l[1]/(2*u)),h[1]+=_*(l[1]/2)),h}function Is(){return Is=Object.assign?Object.assign.bind():function(l){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var u in o)({}).hasOwnProperty.call(o,u)&&(l[u]=o[u])}return l},Is.apply(null,arguments)}const Uc=parseInt(Vf.replace(/\D+/g,""));var Jt=Uint8Array,Nn=Uint16Array,Pl=Uint32Array,kc=new Jt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zc=new Jt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),lh=new Jt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Dc=function(l,r){for(var o=new Nn(31),u=0;u<31;++u)o[u]=r+=1<<l[u-1];for(var f=new Pl(o[30]),u=1;u<30;++u)for(var h=o[u];h<o[u+1];++h)f[h]=h-o[u]<<5|u;return[o,f]},Fc=Dc(kc,2),Ac=Fc[0],ah=Fc[1];Ac[28]=258,ah[258]=28;var uh=Dc(zc,0),ch=uh[0],Rl=new Nn(32768);for(var be=0;be<32768;++be){var zn=(be&43690)>>>1|(be&21845)<<1;zn=(zn&52428)>>>2|(zn&13107)<<2,zn=(zn&61680)>>>4|(zn&3855)<<4,Rl[be]=((zn&65280)>>>8|(zn&255)<<8)>>>1}var ci=function(l,r,o){for(var u=l.length,f=0,h=new Nn(r);f<u;++f)++h[l[f]-1];var d=new Nn(r);for(f=0;f<r;++f)d[f]=d[f-1]+h[f-1]<<1;var _;if(o){_=new Nn(1<<r);var y=15-r;for(f=0;f<u;++f)if(l[f])for(var w=f<<4|l[f],m=r-l[f],g=d[l[f]-1]++<<m,S=g|(1<<m)-1;g<=S;++g)_[Rl[g]>>>y]=w}else for(_=new Nn(u),f=0;f<u;++f)l[f]&&(_[f]=Rl[d[l[f]-1]++]>>>15-l[f]);return _},pi=new Jt(288);for(var be=0;be<144;++be)pi[be]=8;for(var be=144;be<256;++be)pi[be]=9;for(var be=256;be<280;++be)pi[be]=7;for(var be=280;be<288;++be)pi[be]=8;var Nc=new Jt(32);for(var be=0;be<32;++be)Nc[be]=5;var fh=ci(pi,9,1),dh=ci(Nc,5,1),hl=function(l){for(var r=l[0],o=1;o<l.length;++o)l[o]>r&&(r=l[o]);return r},nn=function(l,r,o){var u=r/8|0;return(l[u]|l[u+1]<<8)>>(r&7)&o},pl=function(l,r){var o=r/8|0;return(l[o]|l[o+1]<<8|l[o+2]<<16)>>(r&7)},hh=function(l){return(l/8|0)+(l&7&&1)},ph=function(l,r,o){(o==null||o>l.length)&&(o=l.length);var u=new(l instanceof Nn?Nn:l instanceof Pl?Pl:Jt)(o-r);return u.set(l.subarray(r,o)),u},mh=function(l,r,o){var u=l.length;if(!u||o&&!o.l&&u<5)return r||new Jt(0);var f=!r||o,h=!o||o.i;o||(o={}),r||(r=new Jt(u*3));var d=function(Ue){var _t=r.length;if(Ue>_t){var bt=new Jt(Math.max(_t*2,Ue));bt.set(r),r=bt}},_=o.f||0,y=o.p||0,w=o.b||0,m=o.l,g=o.d,S=o.m,C=o.n,P=u*8;do{if(!m){o.f=_=nn(l,y,1);var F=nn(l,y+1,3);if(y+=3,F)if(F==1)m=fh,g=dh,S=9,C=5;else if(F==2){var R=nn(l,y,31)+257,k=nn(l,y+10,15)+4,U=R+nn(l,y+5,31)+1;y+=14;for(var A=new Jt(U),K=new Jt(19),Z=0;Z<k;++Z)K[lh[Z]]=nn(l,y+Z*3,7);y+=k*3;for(var Y=hl(K),re=(1<<Y)-1,G=ci(K,Y,1),Z=0;Z<U;){var oe=G[nn(l,y,re)];y+=oe&15;var D=oe>>>4;if(D<16)A[Z++]=D;else{var ge=0,ce=0;for(D==16?(ce=3+nn(l,y,3),y+=2,ge=A[Z-1]):D==17?(ce=3+nn(l,y,7),y+=3):D==18&&(ce=11+nn(l,y,127),y+=7);ce--;)A[Z++]=ge}}var Pe=A.subarray(0,R),ve=A.subarray(R);S=hl(Pe),C=hl(ve),m=ci(Pe,S,1),g=ci(ve,C,1)}else throw"invalid block type";else{var D=hh(y)+4,E=l[D-4]|l[D-3]<<8,x=D+E;if(x>u){if(h)throw"unexpected EOF";break}f&&d(w+E),r.set(l.subarray(D,x),w),o.b=w+=E,o.p=y=x*8;continue}if(y>P){if(h)throw"unexpected EOF";break}}f&&d(w+131072);for(var rt=(1<<S)-1,b=(1<<C)-1,ae=y;;ae=y){var ge=m[pl(l,y)&rt],J=ge>>>4;if(y+=ge&15,y>P){if(h)throw"unexpected EOF";break}if(!ge)throw"invalid length/literal";if(J<256)r[w++]=J;else if(J==256){ae=y,m=null;break}else{var pe=J-254;if(J>264){var Z=J-257,me=kc[Z];pe=nn(l,y,(1<<me)-1)+Ac[Z],y+=me}var ye=g[pl(l,y)&b],qe=ye>>>4;if(!ye)throw"invalid distance";y+=ye&15;var ve=ch[qe];if(qe>3){var me=zc[qe];ve+=pl(l,y)&(1<<me)-1,y+=me}if(y>P){if(h)throw"unexpected EOF";break}f&&d(w+131072);for(var dt=w+pe;w<dt;w+=4)r[w]=r[w-ve],r[w+1]=r[w+1-ve],r[w+2]=r[w+2-ve],r[w+3]=r[w+3-ve];w=dt}}o.l=m,o.p=ae,o.b=w,m&&(_=1,o.m=S,o.d=g,o.n=C)}while(!_);return w==r.length?r:ph(r,0,w)},gh=new Jt(0),_h=function(l){if((l[0]&15)!=8||l[0]>>>4>7||(l[0]<<8|l[1])%31)throw"invalid zlib data";if(l[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Es(l,r){return mh((_h(l),l.subarray(2,-4)),r)}var vh=typeof TextDecoder<"u"&&new TextDecoder,yh=0;try{vh.decode(gh,{stream:!0}),yh=1}catch{}const Eh=l=>l&&l.isCubeTexture;class wh extends zl{constructor(r,o){var u,f;const h=Eh(r),_=((f=h?(u=r.image[0])==null?void 0:u.width:r.image.width)!=null?f:1024)/4,y=Math.floor(Math.log2(_)),w=Math.pow(2,y),m=3*Math.max(w,16*7),g=4*w,S=[h?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/m}`,`#define CUBEUV_TEXEL_HEIGHT ${1/g}`,`#define CUBEUV_MAX_MIP ${y}.0`],C=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,P=S.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${Uc>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,F={map:{value:r},height:{value:(o==null?void 0:o.height)||15},radius:{value:(o==null?void 0:o.radius)||100}},D=new Wf(1,16),E=new Dl({uniforms:F,fragmentShader:P,vertexShader:C,side:Gf});super(D,E)}set radius(r){this.material.uniforms.radius.value=r}get radius(){return this.material.uniforms.radius.value}set height(r){this.material.uniforms.height.value=r}get height(){return this.material.uniforms.height.value}}class Sh extends tc{constructor(r){super(r),this.type=qt}parse(r){const d=function(Z,Y){switch(Z){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(Y||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(Y||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(Y||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(Y||""))}},m=`
`,g=function(Z,Y,re){Y=Y||1024;let oe=Z.pos,ge=-1,ce=0,Pe="",ve=String.fromCharCode.apply(null,new Uint16Array(Z.subarray(oe,oe+128)));for(;0>(ge=ve.indexOf(m))&&ce<Y&&oe<Z.byteLength;)Pe+=ve,ce+=ve.length,oe+=128,ve+=String.fromCharCode.apply(null,new Uint16Array(Z.subarray(oe,oe+128)));return-1<ge?(Z.pos+=ce+ge+1,Pe+ve.slice(0,ge)):!1},S=function(Z){const Y=/^#\?(\S+)/,re=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,G=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,oe=/^\s*FORMAT=(\S+)\s*$/,ge=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,ce={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Pe,ve;for((Z.pos>=Z.byteLength||!(Pe=g(Z)))&&d(1,"no header found"),(ve=Pe.match(Y))||d(3,"bad initial token"),ce.valid|=1,ce.programtype=ve[1],ce.string+=Pe+`
`;Pe=g(Z),Pe!==!1;){if(ce.string+=Pe+`
`,Pe.charAt(0)==="#"){ce.comments+=Pe+`
`;continue}if((ve=Pe.match(re))&&(ce.gamma=parseFloat(ve[1])),(ve=Pe.match(G))&&(ce.exposure=parseFloat(ve[1])),(ve=Pe.match(oe))&&(ce.valid|=2,ce.format=ve[1]),(ve=Pe.match(ge))&&(ce.valid|=4,ce.height=parseInt(ve[1],10),ce.width=parseInt(ve[2],10)),ce.valid&2&&ce.valid&4)break}return ce.valid&2||d(3,"missing format specifier"),ce.valid&4||d(3,"missing image size specifier"),ce},C=function(Z,Y,re){const G=Y;if(G<8||G>32767||Z[0]!==2||Z[1]!==2||Z[2]&128)return new Uint8Array(Z);G!==(Z[2]<<8|Z[3])&&d(3,"wrong scanline width");const oe=new Uint8Array(4*Y*re);oe.length||d(4,"unable to allocate buffer space");let ge=0,ce=0;const Pe=4*G,ve=new Uint8Array(4),rt=new Uint8Array(Pe);let b=re;for(;b>0&&ce<Z.byteLength;){ce+4>Z.byteLength&&d(1),ve[0]=Z[ce++],ve[1]=Z[ce++],ve[2]=Z[ce++],ve[3]=Z[ce++],(ve[0]!=2||ve[1]!=2||(ve[2]<<8|ve[3])!=G)&&d(3,"bad rgbe scanline format");let ae=0,J;for(;ae<Pe&&ce<Z.byteLength;){J=Z[ce++];const me=J>128;if(me&&(J-=128),(J===0||ae+J>Pe)&&d(3,"bad scanline data"),me){const ye=Z[ce++];for(let qe=0;qe<J;qe++)rt[ae++]=ye}else rt.set(Z.subarray(ce,ce+J),ae),ae+=J,ce+=J}const pe=G;for(let me=0;me<pe;me++){let ye=0;oe[ge]=rt[me+ye],ye+=G,oe[ge+1]=rt[me+ye],ye+=G,oe[ge+2]=rt[me+ye],ye+=G,oe[ge+3]=rt[me+ye],ge+=4}b--}return oe},P=function(Z,Y,re,G){const oe=Z[Y+3],ge=Math.pow(2,oe-128)/255;re[G+0]=Z[Y+0]*ge,re[G+1]=Z[Y+1]*ge,re[G+2]=Z[Y+2]*ge,re[G+3]=1},F=function(Z,Y,re,G){const oe=Z[Y+3],ge=Math.pow(2,oe-128)/255;re[G+0]=Or.toHalfFloat(Math.min(Z[Y+0]*ge,65504)),re[G+1]=Or.toHalfFloat(Math.min(Z[Y+1]*ge,65504)),re[G+2]=Or.toHalfFloat(Math.min(Z[Y+2]*ge,65504)),re[G+3]=Or.toHalfFloat(1)},D=new Uint8Array(r);D.pos=0;const E=S(D),x=E.width,R=E.height,k=C(D.subarray(D.pos),x,R);let U,A,K;switch(this.type){case Cn:K=k.length/4;const Z=new Float32Array(K*4);for(let re=0;re<K;re++)P(k,re*4,Z,re*4);U=Z,A=Cn;break;case qt:K=k.length/4;const Y=new Uint16Array(K*4);for(let re=0;re<K;re++)F(k,re*4,Y,re*4);U=Y,A=qt;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:x,height:R,data:U,header:E.string,gamma:E.gamma,exposure:E.exposure,type:A}}setDataType(r){return this.type=r,this}load(r,o,u,f){function h(d,_){switch(d.type){case Cn:case qt:"colorSpace"in d?d.colorSpace="srgb-linear":d.encoding=3e3,d.minFilter=gn,d.magFilter=gn,d.generateMipmaps=!1,d.flipY=!0;break}o&&o(d,_)}return super.load(r,h,u,f)}}const ni=Uc>=152;class Th extends tc{constructor(r){super(r),this.type=qt}parse(r){const Y=Math.pow(2.7182818,2.2);function re(c,p){for(var T=0,L=0;L<65536;++L)(L==0||c[L>>3]&1<<(L&7))&&(p[T++]=L);for(var N=T-1;T<65536;)p[T++]=0;return N}function G(c){for(var p=0;p<16384;p++)c[p]={},c[p].len=0,c[p].lit=0,c[p].p=null}const oe={l:0,c:0,lc:0};function ge(c,p,T,L,N){for(;T<c;)p=p<<8|yi(L,N),T+=8;T-=c,oe.l=p>>T&(1<<c)-1,oe.c=p,oe.lc=T}const ce=new Array(59);function Pe(c){for(var p=0;p<=58;++p)ce[p]=0;for(var p=0;p<65537;++p)ce[c[p]]+=1;for(var T=0,p=58;p>0;--p){var L=T+ce[p]>>1;ce[p]=T,T=L}for(var p=0;p<65537;++p){var N=c[p];N>0&&(c[p]=N|ce[N]++<<6)}}function ve(c,p,T,L,N,H,Q){for(var V=T,ee=0,$=0;N<=H;N++){if(V.value-T.value>L)return!1;ge(6,ee,$,c,V);var te=oe.l;if(ee=oe.c,$=oe.lc,Q[N]=te,te==63){if(V.value-T.value>L)throw"Something wrong with hufUnpackEncTable";ge(8,ee,$,c,V);var q=oe.l+6;if(ee=oe.c,$=oe.lc,N+q>H+1)throw"Something wrong with hufUnpackEncTable";for(;q--;)Q[N++]=0;N--}else if(te>=59){var q=te-59+2;if(N+q>H+1)throw"Something wrong with hufUnpackEncTable";for(;q--;)Q[N++]=0;N--}}Pe(Q)}function rt(c){return c&63}function b(c){return c>>6}function ae(c,p,T,L){for(;p<=T;p++){var N=b(c[p]),H=rt(c[p]);if(N>>H)throw"Invalid table entry";if(H>14){var Q=L[N>>H-14];if(Q.len)throw"Invalid table entry";if(Q.lit++,Q.p){var V=Q.p;Q.p=new Array(Q.lit);for(var ee=0;ee<Q.lit-1;++ee)Q.p[ee]=V[ee]}else Q.p=new Array(1);Q.p[Q.lit-1]=p}else if(H)for(var $=0,ee=1<<14-H;ee>0;ee--){var Q=L[(N<<14-H)+$];if(Q.len||Q.p)throw"Invalid table entry";Q.len=H,Q.lit=p,$++}}return!0}const J={c:0,lc:0};function pe(c,p,T,L){c=c<<8|yi(T,L),p+=8,J.c=c,J.lc=p}const me={c:0,lc:0};function ye(c,p,T,L,N,H,Q,V,ee,$){if(c==p){L<8&&(pe(T,L,N,Q),T=J.c,L=J.lc),L-=8;var te=T>>L,te=new Uint8Array([te])[0];if(ee.value+te>$)return!1;for(var q=V[ee.value-1];te-- >0;)V[ee.value++]=q}else if(ee.value<$)V[ee.value++]=c;else return!1;me.c=T,me.lc=L}function qe(c){return c&65535}function dt(c){var p=qe(c);return p>32767?p-65536:p}const Ue={a:0,b:0};function _t(c,p){var T=dt(c),L=dt(p),N=L,H=T+(N&1)+(N>>1),Q=H,V=H-N;Ue.a=Q,Ue.b=V}function bt(c,p){var T=qe(c),L=qe(p),N=T-(L>>1)&65535,H=L+N-32768&65535;Ue.a=H,Ue.b=N}function Ur(c,p,T,L,N,H,Q){for(var V=Q<16384,ee=T>N?N:T,$=1,te;$<=ee;)$<<=1;for($>>=1,te=$,$>>=1;$>=1;){for(var q=0,Ve=q+H*(N-te),ue=H*$,de=H*te,Se=L*$,xe=L*te,Fe,ze,we,Oe;q<=Ve;q+=de){for(var De=q,Ge=q+L*(T-te);De<=Ge;De+=xe){var Re=De+Se,Xe=De+ue,St=Xe+Se;V?(_t(c[De+p],c[Xe+p]),Fe=Ue.a,we=Ue.b,_t(c[Re+p],c[St+p]),ze=Ue.a,Oe=Ue.b,_t(Fe,ze),c[De+p]=Ue.a,c[Re+p]=Ue.b,_t(we,Oe),c[Xe+p]=Ue.a,c[St+p]=Ue.b):(bt(c[De+p],c[Xe+p]),Fe=Ue.a,we=Ue.b,bt(c[Re+p],c[St+p]),ze=Ue.a,Oe=Ue.b,bt(Fe,ze),c[De+p]=Ue.a,c[Re+p]=Ue.b,bt(we,Oe),c[Xe+p]=Ue.a,c[St+p]=Ue.b)}if(T&$){var Xe=De+ue;V?_t(c[De+p],c[Xe+p]):bt(c[De+p],c[Xe+p]),Fe=Ue.a,c[Xe+p]=Ue.b,c[De+p]=Fe}}if(N&$)for(var De=q,Ge=q+L*(T-te);De<=Ge;De+=xe){var Re=De+Se;V?_t(c[De+p],c[Re+p]):bt(c[De+p],c[Re+p]),Fe=Ue.a,c[Re+p]=Ue.b,c[De+p]=Fe}te=$,$>>=1}return q}function ir(c,p,T,L,N,H,Q,V,ee,$){for(var te=0,q=0,Ve=V,ue=Math.trunc(N.value+(H+7)/8);N.value<ue;)for(pe(te,q,T,N),te=J.c,q=J.lc;q>=14;){var de=te>>q-14&16383,Se=p[de];if(Se.len)q-=Se.len,ye(Se.lit,Q,te,q,T,L,N,ee,$,Ve),te=me.c,q=me.lc;else{if(!Se.p)throw"hufDecode issues";var xe;for(xe=0;xe<Se.lit;xe++){for(var Fe=rt(c[Se.p[xe]]);q<Fe&&N.value<ue;)pe(te,q,T,N),te=J.c,q=J.lc;if(q>=Fe&&b(c[Se.p[xe]])==(te>>q-Fe&(1<<Fe)-1)){q-=Fe,ye(Se.p[xe],Q,te,q,T,L,N,ee,$,Ve),te=me.c,q=me.lc;break}}if(xe==Se.lit)throw"hufDecode issues"}}var ze=8-H&7;for(te>>=ze,q-=ze;q>0;){var Se=p[te<<14-q&16383];if(Se.len)q-=Se.len,ye(Se.lit,Q,te,q,T,L,N,ee,$,Ve),te=me.c,q=me.lc;else throw"hufDecode issues"}return!0}function Lt(c,p,T,L,N,H){var Q={value:0},V=T.value,ee=wt(p,T),$=wt(p,T);T.value+=4;var te=wt(p,T);if(T.value+=4,ee<0||ee>=65537||$<0||$>=65537)throw"Something wrong with HUF_ENCSIZE";var q=new Array(65537),Ve=new Array(16384);G(Ve);var ue=L-(T.value-V);if(ve(c,p,T,ue,ee,$,q),te>8*(L-(T.value-V)))throw"Something wrong with hufUncompress";ae(q,ee,$,Ve),ir(q,Ve,c,p,T,te,$,H,N,Q)}function sr(c,p,T){for(var L=0;L<T;++L)p[L]=c[p[L]]}function Et(c){for(var p=1;p<c.length;p++){var T=c[p-1]+c[p]-128;c[p]=T}}function mi(c,p){for(var T=0,L=Math.floor((c.length+1)/2),N=0,H=c.length-1;!(N>H||(p[N++]=c[T++],N>H));)p[N++]=c[L++]}function gi(c){for(var p=c.byteLength,T=new Array,L=0,N=new DataView(c);p>0;){var H=N.getInt8(L++);if(H<0){var Q=-H;p-=Q+1;for(var V=0;V<Q;V++)T.push(N.getUint8(L++))}else{var Q=H;p-=2;for(var ee=N.getUint8(L++),V=0;V<Q+1;V++)T.push(ee)}}return T}function Us(c,p,T,L,N,H){var Re=new DataView(H.buffer),Q=T[c.idx[0]].width,V=T[c.idx[0]].height,ee=3,$=Math.floor(Q/8),te=Math.ceil(Q/8),q=Math.ceil(V/8),Ve=Q-(te-1)*8,ue=V-(q-1)*8,de={value:0},Se=new Array(ee),xe=new Array(ee),Fe=new Array(ee),ze=new Array(ee),we=new Array(ee);for(let je=0;je<ee;++je)we[je]=p[c.idx[je]],Se[je]=je<1?0:Se[je-1]+te*q,xe[je]=new Float32Array(64),Fe[je]=new Uint16Array(64),ze[je]=new Uint16Array(te*64);for(let je=0;je<q;++je){var Oe=8;je==q-1&&(Oe=ue);var De=8;for(let We=0;We<te;++We){We==te-1&&(De=Ve);for(let Ae=0;Ae<ee;++Ae)Fe[Ae].fill(0),Fe[Ae][0]=N[Se[Ae]++],ks(de,L,Fe[Ae]),zs(Fe[Ae],xe[Ae]),Ds(xe[Ae]);Hn(xe);for(let Ae=0;Ae<ee;++Ae)Fs(xe[Ae],ze[Ae],We*64)}let ct=0;for(let We=0;We<ee;++We){const Ae=T[c.idx[We]].type;for(let $e=8*je;$e<8*je+Oe;++$e){ct=we[We][$e];for(let _n=0;_n<$;++_n){const Pt=_n*64+($e&7)*8;Re.setUint16(ct+0*2*Ae,ze[We][Pt+0],!0),Re.setUint16(ct+1*2*Ae,ze[We][Pt+1],!0),Re.setUint16(ct+2*2*Ae,ze[We][Pt+2],!0),Re.setUint16(ct+3*2*Ae,ze[We][Pt+3],!0),Re.setUint16(ct+4*2*Ae,ze[We][Pt+4],!0),Re.setUint16(ct+5*2*Ae,ze[We][Pt+5],!0),Re.setUint16(ct+6*2*Ae,ze[We][Pt+6],!0),Re.setUint16(ct+7*2*Ae,ze[We][Pt+7],!0),ct+=8*2*Ae}}if($!=te)for(let $e=8*je;$e<8*je+Oe;++$e){const _n=we[We][$e]+8*$*2*Ae,Pt=$*64+($e&7)*8;for(let on=0;on<De;++on)Re.setUint16(_n+on*2*Ae,ze[We][Pt+on],!0)}}}for(var Ge=new Uint16Array(Q),Re=new DataView(H.buffer),Xe=0;Xe<ee;++Xe){T[c.idx[Xe]].decoded=!0;var St=T[c.idx[Xe]].type;if(T[Xe].type==2)for(var lt=0;lt<V;++lt){const je=we[Xe][lt];for(var vt=0;vt<Q;++vt)Ge[vt]=Re.getUint16(je+vt*2*St,!0);for(var vt=0;vt<Q;++vt)Re.setFloat32(je+vt*2*St,se(Ge[vt]),!0)}}}function ks(c,p,T){for(var L,N=1;N<64;)L=p[c.value],L==65280?N=64:L>>8==255?N+=L&255:(T[N]=L,N++),c.value++}function zs(c,p){p[0]=se(c[0]),p[1]=se(c[1]),p[2]=se(c[5]),p[3]=se(c[6]),p[4]=se(c[14]),p[5]=se(c[15]),p[6]=se(c[27]),p[7]=se(c[28]),p[8]=se(c[2]),p[9]=se(c[4]),p[10]=se(c[7]),p[11]=se(c[13]),p[12]=se(c[16]),p[13]=se(c[26]),p[14]=se(c[29]),p[15]=se(c[42]),p[16]=se(c[3]),p[17]=se(c[8]),p[18]=se(c[12]),p[19]=se(c[17]),p[20]=se(c[25]),p[21]=se(c[30]),p[22]=se(c[41]),p[23]=se(c[43]),p[24]=se(c[9]),p[25]=se(c[11]),p[26]=se(c[18]),p[27]=se(c[24]),p[28]=se(c[31]),p[29]=se(c[40]),p[30]=se(c[44]),p[31]=se(c[53]),p[32]=se(c[10]),p[33]=se(c[19]),p[34]=se(c[23]),p[35]=se(c[32]),p[36]=se(c[39]),p[37]=se(c[45]),p[38]=se(c[52]),p[39]=se(c[54]),p[40]=se(c[20]),p[41]=se(c[22]),p[42]=se(c[33]),p[43]=se(c[38]),p[44]=se(c[46]),p[45]=se(c[51]),p[46]=se(c[55]),p[47]=se(c[60]),p[48]=se(c[21]),p[49]=se(c[34]),p[50]=se(c[37]),p[51]=se(c[47]),p[52]=se(c[50]),p[53]=se(c[56]),p[54]=se(c[59]),p[55]=se(c[61]),p[56]=se(c[35]),p[57]=se(c[36]),p[58]=se(c[48]),p[59]=se(c[49]),p[60]=se(c[57]),p[61]=se(c[58]),p[62]=se(c[62]),p[63]=se(c[63])}function Ds(c){const p=.5*Math.cos(.7853975),T=.5*Math.cos(3.14159/16),L=.5*Math.cos(3.14159/8),N=.5*Math.cos(3*3.14159/16),H=.5*Math.cos(5*3.14159/16),Q=.5*Math.cos(3*3.14159/8),V=.5*Math.cos(7*3.14159/16);for(var ee=new Array(4),$=new Array(4),te=new Array(4),q=new Array(4),Ve=0;Ve<8;++Ve){var ue=Ve*8;ee[0]=L*c[ue+2],ee[1]=Q*c[ue+2],ee[2]=L*c[ue+6],ee[3]=Q*c[ue+6],$[0]=T*c[ue+1]+N*c[ue+3]+H*c[ue+5]+V*c[ue+7],$[1]=N*c[ue+1]-V*c[ue+3]-T*c[ue+5]-H*c[ue+7],$[2]=H*c[ue+1]-T*c[ue+3]+V*c[ue+5]+N*c[ue+7],$[3]=V*c[ue+1]-H*c[ue+3]+N*c[ue+5]-T*c[ue+7],te[0]=p*(c[ue+0]+c[ue+4]),te[3]=p*(c[ue+0]-c[ue+4]),te[1]=ee[0]+ee[3],te[2]=ee[1]-ee[2],q[0]=te[0]+te[1],q[1]=te[3]+te[2],q[2]=te[3]-te[2],q[3]=te[0]-te[1],c[ue+0]=q[0]+$[0],c[ue+1]=q[1]+$[1],c[ue+2]=q[2]+$[2],c[ue+3]=q[3]+$[3],c[ue+4]=q[3]-$[3],c[ue+5]=q[2]-$[2],c[ue+6]=q[1]-$[1],c[ue+7]=q[0]-$[0]}for(var de=0;de<8;++de)ee[0]=L*c[16+de],ee[1]=Q*c[16+de],ee[2]=L*c[48+de],ee[3]=Q*c[48+de],$[0]=T*c[8+de]+N*c[24+de]+H*c[40+de]+V*c[56+de],$[1]=N*c[8+de]-V*c[24+de]-T*c[40+de]-H*c[56+de],$[2]=H*c[8+de]-T*c[24+de]+V*c[40+de]+N*c[56+de],$[3]=V*c[8+de]-H*c[24+de]+N*c[40+de]-T*c[56+de],te[0]=p*(c[de]+c[32+de]),te[3]=p*(c[de]-c[32+de]),te[1]=ee[0]+ee[3],te[2]=ee[1]-ee[2],q[0]=te[0]+te[1],q[1]=te[3]+te[2],q[2]=te[3]-te[2],q[3]=te[0]-te[1],c[0+de]=q[0]+$[0],c[8+de]=q[1]+$[1],c[16+de]=q[2]+$[2],c[24+de]=q[3]+$[3],c[32+de]=q[3]-$[3],c[40+de]=q[2]-$[2],c[48+de]=q[1]-$[1],c[56+de]=q[0]-$[0]}function Hn(c){for(var p=0;p<64;++p){var T=c[0][p],L=c[1][p],N=c[2][p];c[0][p]=T+1.5747*N,c[1][p]=T-.1873*L-.4682*N,c[2][p]=T+1.8556*L}}function Fs(c,p,T){for(var L=0;L<64;++L)p[T+L]=Or.toHalfFloat(As(c[L]))}function As(c){return c<=1?Math.sign(c)*Math.pow(Math.abs(c),2.2):Math.sign(c)*Math.pow(Y,Math.abs(c)-1)}function _i(c){return new DataView(c.array.buffer,c.offset.value,c.size)}function Bn(c){var p=c.viewer.buffer.slice(c.offset.value,c.offset.value+c.size),T=new Uint8Array(gi(p)),L=new Uint8Array(T.length);return Et(T),mi(T,L),new DataView(L.buffer)}function kr(c){var p=c.array.slice(c.offset.value,c.offset.value+c.size),T=Es(p),L=new Uint8Array(T.length);return Et(T),mi(T,L),new DataView(L.buffer)}function Ns(c){for(var p=c.viewer,T={value:c.offset.value},L=new Uint16Array(c.width*c.scanlineBlockSize*(c.channels*c.type)),N=new Uint8Array(8192),H=0,Q=new Array(c.channels),V=0;V<c.channels;V++)Q[V]={},Q[V].start=H,Q[V].end=Q[V].start,Q[V].nx=c.width,Q[V].ny=c.lines,Q[V].size=c.type,H+=Q[V].nx*Q[V].ny*Q[V].size;var ee=jn(p,T),$=jn(p,T);if($>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ee<=$)for(var V=0;V<$-ee+1;V++)N[V+ee]=xn(p,T);var te=new Uint16Array(65536),q=re(N,te),Ve=wt(p,T);Lt(c.array,p,T,Ve,L,H);for(var V=0;V<c.channels;++V)for(var ue=Q[V],de=0;de<Q[V].size;++de)Ur(L,ue.start+de,ue.nx,ue.size,ue.ny,ue.nx*ue.size,q);sr(te,L,H);for(var Se=0,xe=new Uint8Array(L.buffer.byteLength),Fe=0;Fe<c.lines;Fe++)for(var ze=0;ze<c.channels;ze++){var ue=Q[ze],we=ue.nx*ue.size,Oe=new Uint8Array(L.buffer,ue.end*2,we*2);xe.set(Oe,Se),Se+=we*2,ue.end+=we}return new DataView(xe.buffer)}function Hs(c){var p=c.array.slice(c.offset.value,c.offset.value+c.size),T=Es(p);const L=c.lines*c.channels*c.width,N=c.type==1?new Uint16Array(L):new Uint32Array(L);let H=0,Q=0;const V=new Array(4);for(let ee=0;ee<c.lines;ee++)for(let $=0;$<c.channels;$++){let te=0;switch(c.type){case 1:V[0]=H,V[1]=V[0]+c.width,H=V[1]+c.width;for(let q=0;q<c.width;++q){const Ve=T[V[0]++]<<8|T[V[1]++];te+=Ve,N[Q]=te,Q++}break;case 2:V[0]=H,V[1]=V[0]+c.width,V[2]=V[1]+c.width,H=V[2]+c.width;for(let q=0;q<c.width;++q){const Ve=T[V[0]++]<<24|T[V[1]++]<<16|T[V[2]++]<<8;te+=Ve,N[Q]=te,Q++}break}}return new DataView(N.buffer)}function vi(c){var p=c.viewer,T={value:c.offset.value},L=new Uint8Array(c.width*c.lines*(c.channels*c.type*2)),N={version:Mt(p,T),unknownUncompressedSize:Mt(p,T),unknownCompressedSize:Mt(p,T),acCompressedSize:Mt(p,T),dcCompressedSize:Mt(p,T),rleCompressedSize:Mt(p,T),rleUncompressedSize:Mt(p,T),rleRawSize:Mt(p,T),totalAcUncompressedCount:Mt(p,T),totalDcUncompressedCount:Mt(p,T),acCompression:Mt(p,T)};if(N.version<2)throw"EXRLoader.parse: "+$t.compression+" version "+N.version+" is unsupported";for(var H=new Array,Q=jn(p,T)-2;Q>0;){var V=or(p.buffer,T),ee=xn(p,T),$=ee>>2&3,te=(ee>>4)-1,q=new Int8Array([te])[0],Ve=xn(p,T);H.push({name:V,index:q,type:Ve,compression:$}),Q-=V.length+3}for(var ue=$t.channels,de=new Array(c.channels),Se=0;Se<c.channels;++Se){var xe=de[Se]={},Fe=ue[Se];xe.name=Fe.name,xe.compression=0,xe.decoded=!1,xe.type=Fe.pixelType,xe.pLinear=Fe.pLinear,xe.width=c.width,xe.height=c.lines}for(var ze={idx:new Array(3)},we=0;we<c.channels;++we)for(var xe=de[we],Se=0;Se<H.length;++Se){var Oe=H[Se];xe.name==Oe.name&&(xe.compression=Oe.compression,Oe.index>=0&&(ze.idx[Oe.index]=we),xe.offset=we)}if(N.acCompressedSize>0)switch(N.acCompression){case 0:var Re=new Uint16Array(N.totalAcUncompressedCount);Lt(c.array,p,T,N.acCompressedSize,Re,N.totalAcUncompressedCount);break;case 1:var De=c.array.slice(T.value,T.value+N.totalAcUncompressedCount),Ge=Es(De),Re=new Uint16Array(Ge.buffer);T.value+=N.totalAcUncompressedCount;break}if(N.dcCompressedSize>0){var Xe={array:c.array,offset:T,size:N.dcCompressedSize},St=new Uint16Array(kr(Xe).buffer);T.value+=N.dcCompressedSize}if(N.rleRawSize>0){var De=c.array.slice(T.value,T.value+N.rleCompressedSize),Ge=Es(De),lt=gi(Ge.buffer);T.value+=N.rleCompressedSize}for(var vt=0,je=new Array(de.length),Se=0;Se<je.length;++Se)je[Se]=new Array;for(var ct=0;ct<c.lines;++ct)for(var We=0;We<de.length;++We)je[We].push(vt),vt+=de[We].width*c.type*2;Us(ze,je,de,Re,St,L);for(var Se=0;Se<de.length;++Se){var xe=de[Se];if(!xe.decoded)switch(xe.compression){case 2:for(var Ae=0,$e=0,ct=0;ct<c.lines;++ct){for(var _n=je[Se][Ae],Pt=0;Pt<xe.width;++Pt){for(var on=0;on<2*xe.type;++on)L[_n++]=lt[$e+on*xe.width*xe.height];$e++}Ae++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(L.buffer)}function or(c,p){for(var T=new Uint8Array(c),L=0;T[p.value+L]!=0;)L+=1;var N=new TextDecoder().decode(T.slice(p.value,p.value+L));return p.value=p.value+L+1,N}function Bs(c,p,T){var L=new TextDecoder().decode(new Uint8Array(c).slice(p.value,p.value+T));return p.value=p.value+T,L}function Zs(c,p){var T=Zn(c,p),L=wt(c,p);return[T,L]}function js(c,p){var T=wt(c,p),L=wt(c,p);return[T,L]}function Zn(c,p){var T=c.getInt32(p.value,!0);return p.value=p.value+4,T}function wt(c,p){var T=c.getUint32(p.value,!0);return p.value=p.value+4,T}function yi(c,p){var T=c[p.value];return p.value=p.value+1,T}function xn(c,p){var T=c.getUint8(p.value);return p.value=p.value+1,T}const Mt=function(c,p){let T;return"getBigInt64"in DataView.prototype?T=Number(c.getBigInt64(p.value,!0)):T=c.getUint32(p.value+4,!0)+Number(c.getUint32(p.value,!0)<<32),p.value+=8,T};function ht(c,p){var T=c.getFloat32(p.value,!0);return p.value+=4,T}function Ys(c,p){return Or.toHalfFloat(ht(c,p))}function se(c){var p=(c&31744)>>10,T=c&1023;return(c>>15?-1:1)*(p?p===31?T?NaN:1/0:Math.pow(2,p-15)*(1+T/1024):6103515625e-14*(T/1024))}function jn(c,p){var T=c.getUint16(p.value,!0);return p.value+=2,T}function Vs(c,p){return se(jn(c,p))}function Ws(c,p,T,L){for(var N=T.value,H=[];T.value<N+L-1;){var Q=or(p,T),V=Zn(c,T),ee=xn(c,T);T.value+=3;var $=Zn(c,T),te=Zn(c,T);H.push({name:Q,pixelType:V,pLinear:ee,xSampling:$,ySampling:te})}return T.value+=1,H}function Ei(c,p){var T=ht(c,p),L=ht(c,p),N=ht(c,p),H=ht(c,p),Q=ht(c,p),V=ht(c,p),ee=ht(c,p),$=ht(c,p);return{redX:T,redY:L,greenX:N,greenY:H,blueX:Q,blueY:V,whiteX:ee,whiteY:$}}function wi(c,p){var T=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],L=xn(c,p);return T[L]}function Gs(c,p){var T=wt(c,p),L=wt(c,p),N=wt(c,p),H=wt(c,p);return{xMin:T,yMin:L,xMax:N,yMax:H}}function Si(c,p){var T=["INCREASING_Y"],L=xn(c,p);return T[L]}function Ti(c,p){var T=ht(c,p),L=ht(c,p);return[T,L]}function Ci(c,p){var T=ht(c,p),L=ht(c,p),N=ht(c,p);return[T,L,N]}function Qs(c,p,T,L,N){if(L==="string"||L==="stringvector"||L==="iccProfile")return Bs(p,T,N);if(L==="chlist")return Ws(c,p,T,N);if(L==="chromaticities")return Ei(c,T);if(L==="compression")return wi(c,T);if(L==="box2i")return Gs(c,T);if(L==="lineOrder")return Si(c,T);if(L==="float")return ht(c,T);if(L==="v2f")return Ti(c,T);if(L==="v3f")return Ci(c,T);if(L==="int")return Zn(c,T);if(L==="rational")return Zs(c,T);if(L==="timecode")return js(c,T);if(L==="preview")return T.value+=N,"skipped";T.value+=N}function Xs(c,p,T){const L={};if(c.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";L.version=c.getUint8(4);const N=c.getUint8(5);L.spec={singleTile:!!(N&2),longName:!!(N&4),deepFormat:!!(N&8),multiPart:!!(N&16)},T.value=8;for(var H=!0;H;){var Q=or(p,T);if(Q==0)H=!1;else{var V=or(p,T),ee=wt(c,T),$=Qs(c,p,T,V,ee);$===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${V}'.`):L[Q]=$}}if(N&-5)throw console.error("EXRHeader:",L),"THREE.EXRLoader: provided file is currently unsupported.";return L}function Ks(c,p,T,L,N){const H={size:0,viewer:p,array:T,offset:L,width:c.dataWindow.xMax-c.dataWindow.xMin+1,height:c.dataWindow.yMax-c.dataWindow.yMin+1,channels:c.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:c.channels[0].pixelType,uncompress:null,getter:null,format:null,[ni?"colorSpace":"encoding"]:null};switch(c.compression){case"NO_COMPRESSION":H.lines=1,H.uncompress=_i;break;case"RLE_COMPRESSION":H.lines=1,H.uncompress=Bn;break;case"ZIPS_COMPRESSION":H.lines=1,H.uncompress=kr;break;case"ZIP_COMPRESSION":H.lines=16,H.uncompress=kr;break;case"PIZ_COMPRESSION":H.lines=32,H.uncompress=Ns;break;case"PXR24_COMPRESSION":H.lines=16,H.uncompress=Hs;break;case"DWAA_COMPRESSION":H.lines=32,H.uncompress=vi;break;case"DWAB_COMPRESSION":H.lines=256,H.uncompress=vi;break;default:throw"EXRLoader.parse: "+c.compression+" is unsupported"}if(H.scanlineBlockSize=H.lines,H.type==1)switch(N){case Cn:H.getter=Vs,H.inputSize=2;break;case qt:H.getter=jn,H.inputSize=2;break}else if(H.type==2)switch(N){case Cn:H.getter=ht,H.inputSize=4;break;case qt:H.getter=Ys,H.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+H.type+" for "+c.compression+".";H.blockCount=(c.dataWindow.yMax+1)/H.scanlineBlockSize;for(var Q=0;Q<H.blockCount;Q++)Mt(p,L);H.outputChannels=H.channels==3?4:H.channels;const V=H.width*H.height*H.outputChannels;switch(N){case Cn:H.byteArray=new Float32Array(V),H.channels<H.outputChannels&&H.byteArray.fill(1,0,V);break;case qt:H.byteArray=new Uint16Array(V),H.channels<H.outputChannels&&H.byteArray.fill(15360,0,V);break;default:console.error("THREE.EXRLoader: unsupported type: ",N);break}return H.bytesPerLine=H.width*H.inputSize*H.channels,H.outputChannels==4?H.format=Rr:H.format=Qf,ni?H.colorSpace="srgb-linear":H.encoding=3e3,H}const Yn=new DataView(r),zr=new Uint8Array(r),Vn={value:0},$t=Xs(Yn,r,Vn),ke=Ks($t,Yn,zr,Vn,this.type),xi={value:0},Js={R:0,G:1,B:2,A:3,Y:0};for(let c=0;c<ke.height/ke.scanlineBlockSize;c++){const p=wt(Yn,Vn);ke.size=wt(Yn,Vn),ke.lines=p+ke.scanlineBlockSize>ke.height?ke.height-p:ke.scanlineBlockSize;const L=ke.size<ke.lines*ke.bytesPerLine?ke.uncompress(ke):_i(ke);Vn.value+=ke.size;for(let N=0;N<ke.scanlineBlockSize;N++){const H=N+c*ke.scanlineBlockSize;if(H>=ke.height)break;for(let Q=0;Q<ke.channels;Q++){const V=Js[$t.channels[Q].name];for(let ee=0;ee<ke.width;ee++){xi.value=(N*(ke.channels*ke.width)+Q*ke.width+ee)*ke.inputSize;const $=(ke.height-1-H)*(ke.width*ke.outputChannels)+ee*ke.outputChannels+V;ke.byteArray[$]=ke.getter(L,xi)}}}}return{header:$t,width:ke.width,height:ke.height,data:ke.byteArray,format:ke.format,[ni?"colorSpace":"encoding"]:ke[ni?"colorSpace":"encoding"],type:this.type}}setDataType(r){return this.type=r,this}load(r,o,u,f){function h(d,_){ni?d.colorSpace=_.colorSpace:d.encoding=_.encoding,d.minFilter=gn,d.magFilter=gn,d.generateMipmaps=!1,d.flipY=!1,o&&o(d,_)}return super.load(r,h,u,f)}}/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const nt={LEFT:1,RIGHT:2,MIDDLE:4},j=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),Er={NONE:0,IN:1,OUT:-1};function er(l){return l.isPerspectiveCamera}function Dn(l){return l.isOrthographicCamera}const wr=Math.PI*2,Vu=Math.PI/2,Hc=1e-5,ri=Math.PI/180;function rn(l,r,o){return Math.max(r,Math.min(o,l))}function Ke(l,r=Hc){return Math.abs(l)<r}function Ye(l,r,o=Hc){return Ke(l-r,o)}function Wu(l,r){return Math.round(l/r)*r}function ii(l){return isFinite(l)?l:l<0?-Number.MAX_VALUE:Number.MAX_VALUE}function si(l){return Math.abs(l)<Number.MAX_VALUE?l:l*(1/0)}function ws(l,r,o,u,f=1/0,h){u=Math.max(1e-4,u);const d=2/u,_=d*h,y=1/(1+_+.48*_*_+.235*_*_*_);let w=l-r;const m=r,g=f*u;w=rn(w,-g,g),r=l-w;const S=(o.value+d*w)*h;o.value=(o.value-d*S)*y;let C=r+(w+S)*y;return m-l>0==C>m&&(C=m,o.value=(C-m)/h),C}function Gu(l,r,o,u,f=1/0,h,d){u=Math.max(1e-4,u);const _=2/u,y=_*h,w=1/(1+y+.48*y*y+.235*y*y*y);let m=r.x,g=r.y,S=r.z,C=l.x-m,P=l.y-g,F=l.z-S;const D=m,E=g,x=S,R=f*u,k=R*R,U=C*C+P*P+F*F;if(U>k){const Pe=Math.sqrt(U);C=C/Pe*R,P=P/Pe*R,F=F/Pe*R}m=l.x-C,g=l.y-P,S=l.z-F;const A=(o.x+_*C)*h,K=(o.y+_*P)*h,Z=(o.z+_*F)*h;o.x=(o.x-_*A)*w,o.y=(o.y-_*K)*w,o.z=(o.z-_*Z)*w,d.x=m+(C+A)*w,d.y=g+(P+K)*w,d.z=S+(F+Z)*w;const Y=D-l.x,re=E-l.y,G=x-l.z,oe=d.x-D,ge=d.y-E,ce=d.z-x;return Y*oe+re*ge+G*ce>0&&(d.x=D,d.y=E,d.z=x,o.x=(d.x-D)/h,o.y=(d.y-E)/h,o.z=(d.z-x)/h),d}function ml(l,r){r.set(0,0),l.forEach(o=>{r.x+=o.clientX,r.y+=o.clientY}),r.x/=l.length,r.y/=l.length}function gl(l,r){return Dn(l)?(console.warn(`${r} is not supported in OrthographicCamera`),!0):!1}class Ch{constructor(){this._listeners={}}addEventListener(r,o){const u=this._listeners;u[r]===void 0&&(u[r]=[]),u[r].indexOf(o)===-1&&u[r].push(o)}hasEventListener(r,o){const u=this._listeners;return u[r]!==void 0&&u[r].indexOf(o)!==-1}removeEventListener(r,o){const f=this._listeners[r];if(f!==void 0){const h=f.indexOf(o);h!==-1&&f.splice(h,1)}}removeAllEventListeners(r){if(!r){this._listeners={};return}Array.isArray(this._listeners[r])&&(this._listeners[r].length=0)}dispatchEvent(r){const u=this._listeners[r.type];if(u!==void 0){r.target=this;const f=u.slice(0);for(let h=0,d=f.length;h<d;h++)f[h].call(this,r)}}}var _l;const xh="2.9.0",Ss=1/8,Oh=/Mac/.test((_l=globalThis==null?void 0:globalThis.navigator)===null||_l===void 0?void 0:_l.platform);let Ee,Qu,Ts,vl,Dt,Me,Ze,Sr,oi,pn,mn,tr,Xu,Ku,Kt,li,Tr,Ju,yl,qu,El,wl,Cs,Sl=class Il extends Ch{static install(r){Ee=r.THREE,Qu=Object.freeze(new Ee.Vector3(0,0,0)),Ts=Object.freeze(new Ee.Vector3(0,1,0)),vl=Object.freeze(new Ee.Vector3(0,0,1)),Dt=new Ee.Vector2,Me=new Ee.Vector3,Ze=new Ee.Vector3,Sr=new Ee.Vector3,oi=new Ee.Vector3,pn=new Ee.Vector3,mn=new Ee.Vector3,tr=new Ee.Vector3,Xu=new Ee.Vector3,Ku=new Ee.Vector3,Kt=new Ee.Spherical,li=new Ee.Spherical,Tr=new Ee.Box3,Ju=new Ee.Box3,yl=new Ee.Sphere,qu=new Ee.Quaternion,El=new Ee.Quaternion,wl=new Ee.Matrix4,Cs=new Ee.Raycaster}static get ACTION(){return j}constructor(r,o){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=j.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Er.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Ee.Vector3,this._focalOffsetVelocity=new Ee.Vector3,this._zoomVelocity={value:0},this._truckInternal=(E,x,R)=>{let k,U;if(er(this._camera)){const A=Me.copy(this._camera.position).sub(this._target),K=this._camera.getEffectiveFOV()*ri,Z=A.length()*Math.tan(K*.5);k=this.truckSpeed*E*Z/this._elementRect.height,U=this.truckSpeed*x*Z/this._elementRect.height}else if(Dn(this._camera)){const A=this._camera;k=E*(A.right-A.left)/A.zoom/this._elementRect.width,U=x*(A.top-A.bottom)/A.zoom/this._elementRect.height}else return;this.verticalDragToForward?(R?this.setFocalOffset(this._focalOffsetEnd.x+k,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(k,0,!0),this.forward(-U,!0)):R?this.setFocalOffset(this._focalOffsetEnd.x+k,this._focalOffsetEnd.y+U,this._focalOffsetEnd.z,!0):this.truck(k,U,!0)},this._rotateInternal=(E,x)=>{const R=wr*this.azimuthRotateSpeed*E/this._elementRect.height,k=wr*this.polarRotateSpeed*x/this._elementRect.height;this.rotate(R,k,!0)},this._dollyInternal=(E,x,R)=>{const k=Math.pow(.95,-E*this.dollySpeed),U=this._sphericalEnd.radius,A=this._sphericalEnd.radius*k,K=rn(A,this.minDistance,this.maxDistance),Z=K-A;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(A,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(Z,!0),this._dollyToNoClamp(K,!0)):this._dollyToNoClamp(K,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?A:K)-U,this._dollyControlCoord.set(x,R)),this._lastDollyDirection=Math.sign(-E)},this._zoomInternal=(E,x,R)=>{const k=Math.pow(.95,E*this.dollySpeed),U=this._zoom,A=this._zoom*k;this.zoomTo(A,!0),this.dollyToCursor&&(this._changedZoom+=A-U,this._dollyControlCoord.set(x,R))},typeof Ee>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=r,this._yAxisUpSpace=new Ee.Quaternion().setFromUnitVectors(this._camera.up,Ts),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=j.NONE,this._target=new Ee.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Ee.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Ee.Spherical().setFromVector3(Me.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Ee.Vector3,new Ee.Vector3,new Ee.Vector3,new Ee.Vector3],this._updateNearPlaneCorners(),this._boundary=new Ee.Box3(new Ee.Vector3(-1/0,-1/0,-1/0),new Ee.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Ee.Vector2,this.mouseButtons={left:j.ROTATE,middle:j.DOLLY,right:j.TRUCK,wheel:er(this._camera)?j.DOLLY:Dn(this._camera)?j.ZOOM:j.NONE},this.touches={one:j.TOUCH_ROTATE,two:er(this._camera)?j.TOUCH_DOLLY_TRUCK:Dn(this._camera)?j.TOUCH_ZOOM_TRUCK:j.NONE,three:j.TOUCH_TRUCK};const u=new Ee.Vector2,f=new Ee.Vector2,h=new Ee.Vector2,d=E=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const k=this._domElement.getBoundingClientRect(),U=E.clientX/k.width,A=E.clientY/k.height;if(U<this._interactiveArea.left||U>this._interactiveArea.right||A<this._interactiveArea.top||A>this._interactiveArea.bottom)return}const x=E.pointerType!=="mouse"?null:(E.buttons&nt.LEFT)===nt.LEFT?nt.LEFT:(E.buttons&nt.MIDDLE)===nt.MIDDLE?nt.MIDDLE:(E.buttons&nt.RIGHT)===nt.RIGHT?nt.RIGHT:null;if(x!==null){const k=this._findPointerByMouseButton(x);k&&this._disposePointer(k)}if((E.buttons&nt.LEFT)===nt.LEFT&&this._lockedPointer)return;const R={pointerId:E.pointerId,clientX:E.clientX,clientY:E.clientY,deltaX:0,deltaY:0,mouseButton:x};this._activePointers.push(R),this._domElement.ownerDocument.removeEventListener("pointermove",_,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",y),this._domElement.ownerDocument.addEventListener("pointermove",_,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",y),this._isDragging=!0,S(E)},_=E=>{E.cancelable&&E.preventDefault();const x=E.pointerId,R=this._lockedPointer||this._findPointerById(x);if(R){if(R.clientX=E.clientX,R.clientY=E.clientY,R.deltaX=E.movementX,R.deltaY=E.movementY,this._state=0,E.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(E.buttons&nt.LEFT)===nt.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(E.buttons&nt.MIDDLE)===nt.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(E.buttons&nt.RIGHT)===nt.RIGHT&&(this._state=this._state|this.mouseButtons.right);C()}},y=E=>{const x=this._findPointerById(E.pointerId);if(!(x&&x===this._lockedPointer)){if(x&&this._disposePointer(x),E.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=j.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=j.NONE;P()}};let w=-1;const m=E=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===j.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const A=this._domElement.getBoundingClientRect(),K=E.clientX/A.width,Z=E.clientY/A.height;if(K<this._interactiveArea.left||K>this._interactiveArea.right||Z<this._interactiveArea.top||Z>this._interactiveArea.bottom)return}if(E.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===j.ROTATE||this.mouseButtons.wheel===j.TRUCK){const A=performance.now();w-A<1e3&&this._getClientRect(this._elementRect),w=A}const x=Oh?-1:-3,R=E.deltaMode===1?E.deltaY/x:E.deltaY/(x*10),k=this.dollyToCursor?(E.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,U=this.dollyToCursor?(E.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case j.ROTATE:{this._rotateInternal(E.deltaX,E.deltaY),this._isUserControllingRotate=!0;break}case j.TRUCK:{this._truckInternal(E.deltaX,E.deltaY,!1),this._isUserControllingTruck=!0;break}case j.OFFSET:{this._truckInternal(E.deltaX,E.deltaY,!0),this._isUserControllingOffset=!0;break}case j.DOLLY:{this._dollyInternal(-R,k,U),this._isUserControllingDolly=!0;break}case j.ZOOM:{this._zoomInternal(-R,k,U),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},g=E=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===Il.ACTION.NONE){const x=E instanceof PointerEvent?E.pointerId:0,R=this._findPointerById(x);R&&this._disposePointer(R),this._domElement.ownerDocument.removeEventListener("pointermove",_,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",y);return}E.preventDefault()}},S=E=>{if(!this._enabled)return;if(ml(this._activePointers,Dt),this._getClientRect(this._elementRect),u.copy(Dt),f.copy(Dt),this._activePointers.length>=2){const R=Dt.x-this._activePointers[1].clientX,k=Dt.y-this._activePointers[1].clientY,U=Math.sqrt(R*R+k*k);h.set(0,U);const A=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,K=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;f.set(A,K)}if(this._state=0,!E)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in E&&E.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(E.buttons&nt.LEFT)===nt.LEFT&&(this._state=this._state|this.mouseButtons.left),(E.buttons&nt.MIDDLE)===nt.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(E.buttons&nt.RIGHT)===nt.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&j.ROTATE)===j.ROTATE||(this._state&j.TOUCH_ROTATE)===j.TOUCH_ROTATE||(this._state&j.TOUCH_DOLLY_ROTATE)===j.TOUCH_DOLLY_ROTATE||(this._state&j.TOUCH_ZOOM_ROTATE)===j.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&j.TRUCK)===j.TRUCK||(this._state&j.TOUCH_TRUCK)===j.TOUCH_TRUCK||(this._state&j.TOUCH_DOLLY_TRUCK)===j.TOUCH_DOLLY_TRUCK||(this._state&j.TOUCH_ZOOM_TRUCK)===j.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&j.DOLLY)===j.DOLLY||(this._state&j.TOUCH_DOLLY)===j.TOUCH_DOLLY||(this._state&j.TOUCH_DOLLY_TRUCK)===j.TOUCH_DOLLY_TRUCK||(this._state&j.TOUCH_DOLLY_OFFSET)===j.TOUCH_DOLLY_OFFSET||(this._state&j.TOUCH_DOLLY_ROTATE)===j.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&j.ZOOM)===j.ZOOM||(this._state&j.TOUCH_ZOOM)===j.TOUCH_ZOOM||(this._state&j.TOUCH_ZOOM_TRUCK)===j.TOUCH_ZOOM_TRUCK||(this._state&j.TOUCH_ZOOM_OFFSET)===j.TOUCH_ZOOM_OFFSET||(this._state&j.TOUCH_ZOOM_ROTATE)===j.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&j.OFFSET)===j.OFFSET||(this._state&j.TOUCH_OFFSET)===j.TOUCH_OFFSET||(this._state&j.TOUCH_DOLLY_OFFSET)===j.TOUCH_DOLLY_OFFSET||(this._state&j.TOUCH_ZOOM_OFFSET)===j.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},C=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,ml(this._activePointers,Dt);const x=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,R=x?-x.deltaX:f.x-Dt.x,k=x?-x.deltaY:f.y-Dt.y;if(f.copy(Dt),((this._state&j.ROTATE)===j.ROTATE||(this._state&j.TOUCH_ROTATE)===j.TOUCH_ROTATE||(this._state&j.TOUCH_DOLLY_ROTATE)===j.TOUCH_DOLLY_ROTATE||(this._state&j.TOUCH_ZOOM_ROTATE)===j.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(R,k),this._isUserControllingRotate=!0),(this._state&j.DOLLY)===j.DOLLY||(this._state&j.ZOOM)===j.ZOOM){const U=this.dollyToCursor?(u.x-this._elementRect.x)/this._elementRect.width*2-1:0,A=this.dollyToCursor?(u.y-this._elementRect.y)/this._elementRect.height*-2+1:0,K=this.dollyDragInverted?-1:1;(this._state&j.DOLLY)===j.DOLLY?(this._dollyInternal(K*k*Ss,U,A),this._isUserControllingDolly=!0):(this._zoomInternal(K*k*Ss,U,A),this._isUserControllingZoom=!0)}if((this._state&j.TOUCH_DOLLY)===j.TOUCH_DOLLY||(this._state&j.TOUCH_ZOOM)===j.TOUCH_ZOOM||(this._state&j.TOUCH_DOLLY_TRUCK)===j.TOUCH_DOLLY_TRUCK||(this._state&j.TOUCH_ZOOM_TRUCK)===j.TOUCH_ZOOM_TRUCK||(this._state&j.TOUCH_DOLLY_OFFSET)===j.TOUCH_DOLLY_OFFSET||(this._state&j.TOUCH_ZOOM_OFFSET)===j.TOUCH_ZOOM_OFFSET||(this._state&j.TOUCH_DOLLY_ROTATE)===j.TOUCH_DOLLY_ROTATE||(this._state&j.TOUCH_ZOOM_ROTATE)===j.TOUCH_ZOOM_ROTATE){const U=Dt.x-this._activePointers[1].clientX,A=Dt.y-this._activePointers[1].clientY,K=Math.sqrt(U*U+A*A),Z=h.y-K;h.set(0,K);const Y=this.dollyToCursor?(f.x-this._elementRect.x)/this._elementRect.width*2-1:0,re=this.dollyToCursor?(f.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&j.TOUCH_DOLLY)===j.TOUCH_DOLLY||(this._state&j.TOUCH_DOLLY_ROTATE)===j.TOUCH_DOLLY_ROTATE||(this._state&j.TOUCH_DOLLY_TRUCK)===j.TOUCH_DOLLY_TRUCK||(this._state&j.TOUCH_DOLLY_OFFSET)===j.TOUCH_DOLLY_OFFSET?(this._dollyInternal(Z*Ss,Y,re),this._isUserControllingDolly=!0):(this._zoomInternal(Z*Ss,Y,re),this._isUserControllingZoom=!0)}((this._state&j.TRUCK)===j.TRUCK||(this._state&j.TOUCH_TRUCK)===j.TOUCH_TRUCK||(this._state&j.TOUCH_DOLLY_TRUCK)===j.TOUCH_DOLLY_TRUCK||(this._state&j.TOUCH_ZOOM_TRUCK)===j.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(R,k,!1),this._isUserControllingTruck=!0),((this._state&j.OFFSET)===j.OFFSET||(this._state&j.TOUCH_OFFSET)===j.TOUCH_OFFSET||(this._state&j.TOUCH_DOLLY_OFFSET)===j.TOUCH_DOLLY_OFFSET||(this._state&j.TOUCH_ZOOM_OFFSET)===j.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(R,k,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},P=()=>{ml(this._activePointers,Dt),f.copy(Dt),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",_,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",y),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",_,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",y),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",F),this._domElement.ownerDocument.addEventListener("pointerlockerror",D),this._domElement.ownerDocument.addEventListener("pointermove",_,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",y),S())},this.unlockPointer=()=>{var E,x,R;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(E=this._domElement)===null||E===void 0||E.ownerDocument.exitPointerLock(),(x=this._domElement)===null||x===void 0||x.ownerDocument.removeEventListener("pointerlockchange",F),(R=this._domElement)===null||R===void 0||R.ownerDocument.removeEventListener("pointerlockerror",D),this.cancel()};const F=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},D=()=>{this.unlockPointer()};this._addAllEventListeners=E=>{this._domElement=E,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",d),this._domElement.addEventListener("pointercancel",y),this._domElement.addEventListener("wheel",m,{passive:!1}),this._domElement.addEventListener("contextmenu",g)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",d),this._domElement.removeEventListener("pointercancel",y),this._domElement.removeEventListener("wheel",m,{passive:!1}),this._domElement.removeEventListener("contextmenu",g),this._domElement.ownerDocument.removeEventListener("pointermove",_,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",y),this._domElement.ownerDocument.removeEventListener("pointerlockchange",F),this._domElement.ownerDocument.removeEventListener("pointerlockerror",D))},this.cancel=()=>{this._state!==j.NONE&&(this._state=j.NONE,this._activePointers.length=0,P())},o&&this.connect(o),this.update(0)}get camera(){return this._camera}set camera(r){this._camera=r,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(r){this._enabled=r,this._domElement&&(r?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(r){this._spherical.radius===r&&this._sphericalEnd.radius===r||(this._spherical.radius=r,this._sphericalEnd.radius=r,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(r){this._spherical.theta===r&&this._sphericalEnd.theta===r||(this._spherical.theta=r,this._sphericalEnd.theta=r,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(r){this._spherical.phi===r&&this._sphericalEnd.phi===r||(this._spherical.phi=r,this._sphericalEnd.phi=r,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(r){this._boundaryEnclosesCamera=r,this._needsUpdate=!0}set interactiveArea(r){this._interactiveArea.width=rn(r.width,0,1),this._interactiveArea.height=rn(r.height,0,1),this._interactiveArea.x=rn(r.x,0,1-this._interactiveArea.width),this._interactiveArea.y=rn(r.y,0,1-this._interactiveArea.height)}addEventListener(r,o){super.addEventListener(r,o)}removeEventListener(r,o){super.removeEventListener(r,o)}rotate(r,o,u=!1){return this.rotateTo(this._sphericalEnd.theta+r,this._sphericalEnd.phi+o,u)}rotateAzimuthTo(r,o=!1){return this.rotateTo(r,this._sphericalEnd.phi,o)}rotatePolarTo(r,o=!1){return this.rotateTo(this._sphericalEnd.theta,r,o)}rotateTo(r,o,u=!1){this._isUserControllingRotate=!1;const f=rn(r,this.minAzimuthAngle,this.maxAzimuthAngle),h=rn(o,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=f,this._sphericalEnd.phi=h,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,u||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const d=!u||Ye(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ye(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(d)}dolly(r,o=!1){return this.dollyTo(this._sphericalEnd.radius-r,o)}dollyTo(r,o=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Er.NONE,this._changedDolly=0,this._dollyToNoClamp(rn(r,this.minDistance,this.maxDistance),o)}_dollyToNoClamp(r,o=!1){const u=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const d=this._collisionTest(),_=Ye(d,this._spherical.radius);if(!(u>r)&&_)return Promise.resolve();this._sphericalEnd.radius=Math.min(r,d)}else this._sphericalEnd.radius=r;this._needsUpdate=!0,o||(this._spherical.radius=this._sphericalEnd.radius);const h=!o||Ye(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(h)}dollyInFixed(r,o=!1){this._targetEnd.add(this._getCameraDirection(oi).multiplyScalar(r)),o||this._target.copy(this._targetEnd);const u=!o||Ye(this._target.x,this._targetEnd.x,this.restThreshold)&&Ye(this._target.y,this._targetEnd.y,this.restThreshold)&&Ye(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(u)}zoom(r,o=!1){return this.zoomTo(this._zoomEnd+r,o)}zoomTo(r,o=!1){this._isUserControllingZoom=!1,this._zoomEnd=rn(r,this.minZoom,this.maxZoom),this._needsUpdate=!0,o||(this._zoom=this._zoomEnd);const u=!o||Ye(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(u)}pan(r,o,u=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(r,o,u)}truck(r,o,u=!1){this._camera.updateMatrix(),pn.setFromMatrixColumn(this._camera.matrix,0),mn.setFromMatrixColumn(this._camera.matrix,1),pn.multiplyScalar(r),mn.multiplyScalar(-o);const f=Me.copy(pn).add(mn),h=Ze.copy(this._targetEnd).add(f);return this.moveTo(h.x,h.y,h.z,u)}forward(r,o=!1){Me.setFromMatrixColumn(this._camera.matrix,0),Me.crossVectors(this._camera.up,Me),Me.multiplyScalar(r);const u=Ze.copy(this._targetEnd).add(Me);return this.moveTo(u.x,u.y,u.z,o)}elevate(r,o=!1){return Me.copy(this._camera.up).multiplyScalar(r),this.moveTo(this._targetEnd.x+Me.x,this._targetEnd.y+Me.y,this._targetEnd.z+Me.z,o)}moveTo(r,o,u,f=!1){this._isUserControllingTruck=!1;const h=Me.set(r,o,u).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,h,this.boundaryFriction),this._needsUpdate=!0,f||this._target.copy(this._targetEnd);const d=!f||Ye(this._target.x,this._targetEnd.x,this.restThreshold)&&Ye(this._target.y,this._targetEnd.y,this.restThreshold)&&Ye(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(d)}lookInDirectionOf(r,o,u,f=!1){const _=Me.set(r,o,u).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(_.x,_.y,_.z,f)}fitToBox(r,o,{cover:u=!1,paddingLeft:f=0,paddingRight:h=0,paddingBottom:d=0,paddingTop:_=0}={}){const y=[],w=r.isBox3?Tr.copy(r):Tr.setFromObject(r);w.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const m=Wu(this._sphericalEnd.theta,Vu),g=Wu(this._sphericalEnd.phi,Vu);y.push(this.rotateTo(m,g,o));const S=Me.setFromSpherical(this._sphericalEnd).normalize(),C=qu.setFromUnitVectors(S,vl),P=Ye(Math.abs(S.y),1);P&&C.multiply(El.setFromAxisAngle(Ts,m)),C.multiply(this._yAxisUpSpaceInverse);const F=Ju.makeEmpty();Ze.copy(w.min).applyQuaternion(C),F.expandByPoint(Ze),Ze.copy(w.min).setX(w.max.x).applyQuaternion(C),F.expandByPoint(Ze),Ze.copy(w.min).setY(w.max.y).applyQuaternion(C),F.expandByPoint(Ze),Ze.copy(w.max).setZ(w.min.z).applyQuaternion(C),F.expandByPoint(Ze),Ze.copy(w.min).setZ(w.max.z).applyQuaternion(C),F.expandByPoint(Ze),Ze.copy(w.max).setY(w.min.y).applyQuaternion(C),F.expandByPoint(Ze),Ze.copy(w.max).setX(w.min.x).applyQuaternion(C),F.expandByPoint(Ze),Ze.copy(w.max).applyQuaternion(C),F.expandByPoint(Ze),F.min.x-=f,F.min.y-=d,F.max.x+=h,F.max.y+=_,C.setFromUnitVectors(vl,S),P&&C.premultiply(El.invert()),C.premultiply(this._yAxisUpSpace);const D=F.getSize(Me),E=F.getCenter(Ze).applyQuaternion(C);if(er(this._camera)){const x=this.getDistanceToFitBox(D.x,D.y,D.z,u);y.push(this.moveTo(E.x,E.y,E.z,o)),y.push(this.dollyTo(x,o)),y.push(this.setFocalOffset(0,0,0,o))}else if(Dn(this._camera)){const x=this._camera,R=x.right-x.left,k=x.top-x.bottom,U=u?Math.max(R/D.x,k/D.y):Math.min(R/D.x,k/D.y);y.push(this.moveTo(E.x,E.y,E.z,o)),y.push(this.zoomTo(U,o)),y.push(this.setFocalOffset(0,0,0,o))}return Promise.all(y)}fitToSphere(r,o){const u=[],h="isObject3D"in r?Il.createBoundingSphere(r,yl):yl.copy(r);if(u.push(this.moveTo(h.center.x,h.center.y,h.center.z,o)),er(this._camera)){const d=this.getDistanceToFitSphere(h.radius);u.push(this.dollyTo(d,o))}else if(Dn(this._camera)){const d=this._camera.right-this._camera.left,_=this._camera.top-this._camera.bottom,y=2*h.radius,w=Math.min(d/y,_/y);u.push(this.zoomTo(w,o))}return u.push(this.setFocalOffset(0,0,0,o)),Promise.all(u)}setLookAt(r,o,u,f,h,d,_=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Er.NONE,this._changedDolly=0;const y=Ze.set(f,h,d),w=Me.set(r,o,u);this._targetEnd.copy(y),this._sphericalEnd.setFromVector3(w.sub(y).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,_||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const m=!_||Ye(this._target.x,this._targetEnd.x,this.restThreshold)&&Ye(this._target.y,this._targetEnd.y,this.restThreshold)&&Ye(this._target.z,this._targetEnd.z,this.restThreshold)&&Ye(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ye(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ye(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(m)}lerpLookAt(r,o,u,f,h,d,_,y,w,m,g,S,C,P=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Er.NONE,this._changedDolly=0;const F=Me.set(f,h,d),D=Ze.set(r,o,u);Kt.setFromVector3(D.sub(F).applyQuaternion(this._yAxisUpSpace));const E=Sr.set(m,g,S),x=Ze.set(_,y,w);li.setFromVector3(x.sub(E).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(F.lerp(E,C));const R=li.theta-Kt.theta,k=li.phi-Kt.phi,U=li.radius-Kt.radius;this._sphericalEnd.set(Kt.radius+U*C,Kt.phi+k*C,Kt.theta+R*C),this.normalizeRotations(),this._needsUpdate=!0,P||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const A=!P||Ye(this._target.x,this._targetEnd.x,this.restThreshold)&&Ye(this._target.y,this._targetEnd.y,this.restThreshold)&&Ye(this._target.z,this._targetEnd.z,this.restThreshold)&&Ye(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ye(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ye(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(A)}setPosition(r,o,u,f=!1){return this.setLookAt(r,o,u,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,f)}setTarget(r,o,u,f=!1){const h=this.getPosition(Me),d=this.setLookAt(h.x,h.y,h.z,r,o,u,f);return this._sphericalEnd.phi=rn(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),d}setFocalOffset(r,o,u,f=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(r,o,u),this._needsUpdate=!0,f||this._focalOffset.copy(this._focalOffsetEnd);const h=!f||Ye(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Ye(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Ye(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(h)}setOrbitPoint(r,o,u){this._camera.updateMatrixWorld(),pn.setFromMatrixColumn(this._camera.matrixWorldInverse,0),mn.setFromMatrixColumn(this._camera.matrixWorldInverse,1),tr.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const f=Me.set(r,o,u),h=f.distanceTo(this._camera.position),d=f.sub(this._camera.position);pn.multiplyScalar(d.x),mn.multiplyScalar(d.y),tr.multiplyScalar(d.z),Me.copy(pn).add(mn).add(tr),Me.z=Me.z+h,this.dollyTo(h,!1),this.setFocalOffset(-Me.x,Me.y,-Me.z,!1),this.moveTo(r,o,u,!1)}setBoundary(r){if(!r){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(r),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(r,o,u,f){if(r===null){this._viewport=null;return}this._viewport=this._viewport||new Ee.Vector4,typeof r=="number"?this._viewport.set(r,o,u,f):this._viewport.copy(r)}getDistanceToFitBox(r,o,u,f=!1){if(gl(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const h=r/o,d=this._camera.getEffectiveFOV()*ri,_=this._camera.aspect;return((f?h>_:h<_)?o:r/_)*.5/Math.tan(d*.5)+u*.5}getDistanceToFitSphere(r){if(gl(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const o=this._camera.getEffectiveFOV()*ri,u=Math.atan(Math.tan(o*.5)*this._camera.aspect)*2,f=1<this._camera.aspect?o:u;return r/Math.sin(f*.5)}getTarget(r,o=!0){return(r&&r.isVector3?r:new Ee.Vector3).copy(o?this._targetEnd:this._target)}getPosition(r,o=!0){return(r&&r.isVector3?r:new Ee.Vector3).setFromSpherical(o?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(o?this._targetEnd:this._target)}getSpherical(r,o=!0){return(r||new Ee.Spherical).copy(o?this._sphericalEnd:this._spherical)}getFocalOffset(r,o=!0){return(r&&r.isVector3?r:new Ee.Vector3).copy(o?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%wr,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=wr),this._spherical.theta+=wr*Math.round((this._sphericalEnd.theta-this._spherical.theta)/wr)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(r=!1){if(!Ye(this._camera.up.x,this._cameraUp0.x)||!Ye(this._camera.up.y,this._cameraUp0.y)||!Ye(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const u=this.getPosition(Me);this.updateCameraUp(),this.setPosition(u.x,u.y,u.z)}const o=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,r),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,r),this.zoomTo(this._zoom0,r)];return Promise.all(o)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Ts),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const r=Me.subVectors(this._target,this._camera.position).normalize(),o=Ze.crossVectors(r,this._camera.up);this._camera.up.crossVectors(o,r).normalize(),this._camera.updateMatrixWorld();const u=this.getPosition(Me);this.updateCameraUp(),this.setPosition(u.x,u.y,u.z)}update(r){const o=this._sphericalEnd.theta-this._spherical.theta,u=this._sphericalEnd.phi-this._spherical.phi,f=this._sphericalEnd.radius-this._spherical.radius,h=Xu.subVectors(this._targetEnd,this._target),d=Ku.subVectors(this._focalOffsetEnd,this._focalOffset),_=this._zoomEnd-this._zoom;if(Ke(o))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const g=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=ws(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,g,1/0,r),this._needsUpdate=!0}if(Ke(u))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const g=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=ws(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,g,1/0,r),this._needsUpdate=!0}if(Ke(f))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const g=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=ws(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,g,this.maxSpeed,r),this._needsUpdate=!0}if(Ke(h.x)&&Ke(h.y)&&Ke(h.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const g=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Gu(this._target,this._targetEnd,this._targetVelocity,g,this.maxSpeed,r,this._target),this._needsUpdate=!0}if(Ke(d.x)&&Ke(d.y)&&Ke(d.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const g=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Gu(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,g,this.maxSpeed,r,this._focalOffset),this._needsUpdate=!0}if(Ke(_))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const g=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=ws(this._zoom,this._zoomEnd,this._zoomVelocity,g,1/0,r)}if(this.dollyToCursor){if(er(this._camera)&&this._changedDolly!==0){const g=this._spherical.radius-this._lastDistance,S=this._camera,C=this._getCameraDirection(oi),P=Me.copy(C).cross(S.up).normalize();P.lengthSq()===0&&(P.x=1);const F=Ze.crossVectors(P,C),D=this._sphericalEnd.radius*Math.tan(S.getEffectiveFOV()*ri*.5),x=(this._sphericalEnd.radius-g-this._sphericalEnd.radius)/this._sphericalEnd.radius,R=Sr.copy(this._targetEnd).add(P.multiplyScalar(this._dollyControlCoord.x*D*S.aspect)).add(F.multiplyScalar(this._dollyControlCoord.y*D)),k=Me.copy(this._targetEnd).lerp(R,x),U=this._lastDollyDirection===Er.IN&&this._spherical.radius<=this.minDistance,A=this._lastDollyDirection===Er.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(U||A)){this._sphericalEnd.radius-=g,this._spherical.radius-=g;const Z=Ze.copy(C).multiplyScalar(-g);k.add(Z)}this._boundary.clampPoint(k,k);const K=Ze.subVectors(k,this._targetEnd);this._targetEnd.copy(k),this._target.add(K),this._changedDolly-=g,Ke(this._changedDolly)&&(this._changedDolly=0)}else if(Dn(this._camera)&&this._changedZoom!==0){const g=this._zoom-this._lastZoom,S=this._camera,C=Me.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(S.near+S.far)/(S.near-S.far)).unproject(S),P=Ze.set(0,0,-1).applyQuaternion(S.quaternion),F=Sr.copy(C).add(P.multiplyScalar(-C.dot(S.up))),E=-(this._zoom-g-this._zoom)/this._zoom,x=this._getCameraDirection(oi),R=this._targetEnd.dot(x),k=Me.copy(this._targetEnd).lerp(F,E),U=k.dot(x),A=x.multiplyScalar(U-R);k.sub(A),this._boundary.clampPoint(k,k);const K=Ze.subVectors(k,this._targetEnd);this._targetEnd.copy(k),this._target.add(K),this._changedZoom-=g,Ke(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const y=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,y),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Ke(this._focalOffset.x)||!Ke(this._focalOffset.y)||!Ke(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),pn.setFromMatrixColumn(this._camera.matrix,0),mn.setFromMatrixColumn(this._camera.matrix,1),tr.setFromMatrixColumn(this._camera.matrix,2),pn.multiplyScalar(this._focalOffset.x),mn.multiplyScalar(-this._focalOffset.y),tr.multiplyScalar(this._focalOffset.z),Me.copy(pn).add(mn).add(tr),this._camera.position.add(Me)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Me.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const m=this._needsUpdate;return m&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):m?(this.dispatchEvent({type:"update"}),Ke(o,this.restThreshold)&&Ke(u,this.restThreshold)&&Ke(f,this.restThreshold)&&Ke(h.x,this.restThreshold)&&Ke(h.y,this.restThreshold)&&Ke(h.z,this.restThreshold)&&Ke(d.x,this.restThreshold)&&Ke(d.y,this.restThreshold)&&Ke(d.z,this.restThreshold)&&Ke(_,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!m&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=m,this._needsUpdate=!1,m}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:ii(this.maxDistance),minZoom:this.minZoom,maxZoom:ii(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:ii(this.maxPolarAngle),minAzimuthAngle:ii(this.minAzimuthAngle),maxAzimuthAngle:ii(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:Me.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(r,o=!1){const u=JSON.parse(r);this.enabled=u.enabled,this.minDistance=u.minDistance,this.maxDistance=si(u.maxDistance),this.minZoom=u.minZoom,this.maxZoom=si(u.maxZoom),this.minPolarAngle=u.minPolarAngle,this.maxPolarAngle=si(u.maxPolarAngle),this.minAzimuthAngle=si(u.minAzimuthAngle),this.maxAzimuthAngle=si(u.maxAzimuthAngle),this.smoothTime=u.smoothTime,this.draggingSmoothTime=u.draggingSmoothTime,this.dollySpeed=u.dollySpeed,this.truckSpeed=u.truckSpeed,this.dollyToCursor=u.dollyToCursor,this.verticalDragToForward=u.verticalDragToForward,this._target0.fromArray(u.target0),this._position0.fromArray(u.position0),this._zoom0=u.zoom0,this._focalOffset0.fromArray(u.focalOffset0),this.moveTo(u.target[0],u.target[1],u.target[2],o),Kt.setFromVector3(Me.fromArray(u.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Kt.theta,Kt.phi,o),this.dollyTo(Kt.radius,o),this.zoomTo(u.zoom,o),this.setFocalOffset(u.focalOffset[0],u.focalOffset[1],u.focalOffset[2],o),this._needsUpdate=!0}connect(r){if(this._domElement){console.warn("camera-controls is already connected.");return}r.setAttribute("data-camera-controls-version",xh),this._addAllEventListeners(r),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(r){return r.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(r){return this._getTargetDirection(r).negate()}_findPointerById(r){return this._activePointers.find(o=>o.pointerId===r)}_findPointerByMouseButton(r){return this._activePointers.find(o=>o.mouseButton===r)}_disposePointer(r){this._activePointers.splice(this._activePointers.indexOf(r),1)}_encloseToBoundary(r,o,u){const f=o.lengthSq();if(f===0)return r;const h=Ze.copy(o).add(r),_=this._boundary.clampPoint(h,Sr).sub(h),y=_.lengthSq();if(y===0)return r.add(o);if(y===f)return r;if(u===0)return r.add(o).add(_);{const w=1+u*y/o.dot(_);return r.add(Ze.copy(o).multiplyScalar(w)).add(_.multiplyScalar(1-u))}}_updateNearPlaneCorners(){if(er(this._camera)){const r=this._camera,o=r.near,u=r.getEffectiveFOV()*ri,f=Math.tan(u*.5)*o,h=f*r.aspect;this._nearPlaneCorners[0].set(-h,-f,0),this._nearPlaneCorners[1].set(h,-f,0),this._nearPlaneCorners[2].set(h,f,0),this._nearPlaneCorners[3].set(-h,f,0)}else if(Dn(this._camera)){const r=this._camera,o=1/r.zoom,u=r.left*o,f=r.right*o,h=r.top*o,d=r.bottom*o;this._nearPlaneCorners[0].set(u,h,0),this._nearPlaneCorners[1].set(f,h,0),this._nearPlaneCorners[2].set(f,d,0),this._nearPlaneCorners[3].set(u,d,0)}}_collisionTest(){let r=1/0;if(!(this.colliderMeshes.length>=1)||gl(this._camera,"_collisionTest"))return r;const u=this._getTargetDirection(oi);wl.lookAt(Qu,u,this._camera.up);for(let f=0;f<4;f++){const h=Ze.copy(this._nearPlaneCorners[f]);h.applyMatrix4(wl);const d=Sr.addVectors(this._target,h);Cs.set(d,u),Cs.far=this._spherical.radius+1;const _=Cs.intersectObjects(this.colliderMeshes);_.length!==0&&_[0].distance<r&&(r=_[0].distance)}return r}_getClientRect(r){if(!this._domElement)return;const o=this._domElement.getBoundingClientRect();return r.x=o.left,r.y=o.top,this._viewport?(r.x+=this._viewport.x,r.y+=o.height-this._viewport.w-this._viewport.y,r.width=this._viewport.z,r.height=this._viewport.w):(r.width=o.width,r.height=o.height),r}_createOnRestPromise(r){return r?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(o=>{const u=()=>{this.removeEventListener("rest",u),o()};this.addEventListener("rest",u)}))}_addAllEventListeners(r){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(r){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(r){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(r,o=new Ee.Sphere){const u=o,f=u.center;Tr.makeEmpty(),r.traverseVisible(d=>{d.isMesh&&Tr.expandByObject(d)}),Tr.getCenter(f);let h=0;return r.traverseVisible(d=>{if(!d.isMesh)return;const _=d,y=_.geometry.clone();y.applyMatrix4(_.matrixWorld);const m=y.attributes.position;for(let g=0,S=m.count;g<S;g++)Me.fromBufferAttribute(m,g),h=Math.max(h,f.distanceToSquared(Me))}),u.radius=Math.sqrt(h),u}};const Mh=W.forwardRef((l,r)=>{W.useMemo(()=>{const U={Box3:Xf,MathUtils:{clamp:Kf.clamp},Matrix4:Jf,Quaternion:qf,Raycaster:Ll,Sphere:bf,Spherical:$f,Vector2:kl,Vector3:sn,Vector4:ed};Sl.install({THREE:U}),Al({CameraControlsImpl:Sl})},[]);const{camera:o,domElement:u,makeDefault:f,onStart:h,onEnd:d,onChange:_,regress:y,...w}=l,m=Bt(U=>U.camera),g=Bt(U=>U.gl),S=Bt(U=>U.invalidate),C=Bt(U=>U.events),P=Bt(U=>U.setEvents),F=Bt(U=>U.set),D=Bt(U=>U.get),E=Bt(U=>U.performance),x=o||m,R=u||C.connected||g.domElement,k=W.useMemo(()=>new Sl(x),[x]);return xc((U,A)=>{k.enabled&&k.update(A)},-1),W.useEffect(()=>(k.connect(R),()=>void k.disconnect()),[R,k]),W.useEffect(()=>{const U=Z=>{S(),y&&E.regress(),_&&_(Z)},A=Z=>{h&&h(Z)},K=Z=>{d&&d(Z)};return k.addEventListener("update",U),k.addEventListener("controlstart",A),k.addEventListener("controlend",K),k.addEventListener("control",U),k.addEventListener("transitionstart",U),k.addEventListener("wake",U),()=>{k.removeEventListener("update",U),k.removeEventListener("controlstart",A),k.removeEventListener("controlend",K),k.removeEventListener("control",U),k.removeEventListener("transitionstart",U),k.removeEventListener("wake",U)}},[k,h,d,S,P,y,_]),W.useEffect(()=>{if(f){const U=D().controls;return F({controls:k}),()=>F({controls:U})}},[f,k]),W.createElement("primitive",Is({ref:r,object:k},w))}),Ph=3e3,Rh=3001,Bc=(l,r,o)=>{let u;switch(l){case Ps:u=new Uint8ClampedArray(r*o*4);break;case qt:u=new Uint16Array(r*o*4);break;case sd:u=new Uint32Array(r*o*4);break;case id:u=new Int8Array(r*o*4);break;case rd:u=new Int16Array(r*o*4);break;case nd:u=new Int32Array(r*o*4);break;case Cn:u=new Float32Array(r*o*4);break;default:throw new Error("Unsupported data type")}return u};let xs;const Ih=(l,r,o,u)=>{if(xs!==void 0)return xs;const f=new rc(1,1,u);r.setRenderTarget(f);const h=new zl(new nc,new od({color:16777215}));r.render(h,o),r.setRenderTarget(null);const d=Bc(l,f.width,f.height);return r.readRenderTargetPixels(f,0,0,f.width,f.height,d),f.dispose(),h.geometry.dispose(),h.material.dispose(),xs=d[0]!==0,xs};class jl{constructor(r){var o,u,f,h,d,_,y,w,m,g,S,C,P,F,D,E;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(R){throw this._renderer.setRenderTarget(null),R}this._renderer.setRenderTarget(null)},this._width=r.width,this._height=r.height,this._type=r.type,this._colorSpace=r.colorSpace;const x={format:Rr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((o=r.renderTargetOptions)===null||o===void 0?void 0:o.anisotropy)!==void 0?(u=r.renderTargetOptions)===null||u===void 0?void 0:u.anisotropy:1,generateMipmaps:((f=r.renderTargetOptions)===null||f===void 0?void 0:f.generateMipmaps)!==void 0?(h=r.renderTargetOptions)===null||h===void 0?void 0:h.generateMipmaps:!1,magFilter:((d=r.renderTargetOptions)===null||d===void 0?void 0:d.magFilter)!==void 0?(_=r.renderTargetOptions)===null||_===void 0?void 0:_.magFilter:gn,minFilter:((y=r.renderTargetOptions)===null||y===void 0?void 0:y.minFilter)!==void 0?(w=r.renderTargetOptions)===null||w===void 0?void 0:w.minFilter:gn,samples:((m=r.renderTargetOptions)===null||m===void 0?void 0:m.samples)!==void 0?(g=r.renderTargetOptions)===null||g===void 0?void 0:g.samples:void 0,wrapS:((S=r.renderTargetOptions)===null||S===void 0?void 0:S.wrapS)!==void 0?(C=r.renderTargetOptions)===null||C===void 0?void 0:C.wrapS:An,wrapT:((P=r.renderTargetOptions)===null||P===void 0?void 0:P.wrapT)!==void 0?(F=r.renderTargetOptions)===null||F===void 0?void 0:F.wrapT:An};if(this._material=r.material,r.renderer?this._renderer=r.renderer:(this._renderer=jl.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Ul,this._camera=new $u,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Ih(this._type,this._renderer,this._camera,x)){let R;switch(this._type){case qt:R=this._renderer.extensions.has("EXT_color_buffer_float")?Cn:void 0;break}R!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Cn}`),this._type=R):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new zl(new nc,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new rc(this.width,this.height,x),this._renderTarget.texture.mapping=((D=r.renderTargetOptions)===null||D===void 0?void 0:D.mapping)!==void 0?(E=r.renderTargetOptions)===null||E===void 0?void 0:E.mapping:Rs}static instantiateRenderer(){const r=new ec;return r.setSize(128,128),r}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const r=Bc(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,r),r}toDataTexture(r){const o=new td(this.toArray(),this.width,this.height,Rr,this._type,(r==null?void 0:r.mapping)||Rs,(r==null?void 0:r.wrapS)||An,(r==null?void 0:r.wrapT)||An,(r==null?void 0:r.magFilter)||gn,(r==null?void 0:r.minFilter)||gn,(r==null?void 0:r.anisotropy)||1,Tl);return o.generateMipmaps=(r==null?void 0:r.generateMipmaps)!==void 0?r==null?void 0:r.generateMipmaps:!1,o}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(r){this.disposeOnDemandRenderer(),r&&this.renderTarget.dispose(),this.material instanceof Dl&&Object.values(this.material.uniforms).forEach(o=>{o.value instanceof Mr&&o.value.dispose()}),Object.values(this.material).forEach(o=>{o instanceof Mr&&o.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(r){this._width=r,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(r){this._height=r,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(r){this._renderTarget=r,this._width=r.width,this._height=r.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const Lh=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Uh=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class kh extends Dl{constructor({gamma:r,offsetHdr:o,offsetSdr:u,gainMapMin:f,gainMapMax:h,maxDisplayBoost:d,hdrCapacityMin:_,hdrCapacityMax:y,sdr:w,gainMap:m}){super({name:"GainMapDecoderMaterial",vertexShader:Lh,fragmentShader:Uh,uniforms:{sdr:{value:w},gainMap:{value:m},gamma:{value:new sn(1/r[0],1/r[1],1/r[2])},offsetHdr:{value:new sn().fromArray(o)},offsetSdr:{value:new sn().fromArray(u)},gainMapMin:{value:new sn().fromArray(f)},gainMapMax:{value:new sn().fromArray(h)},weightFactor:{value:(Math.log2(d)-_)/(y-_)}},blending:cd,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=d,this._hdrCapacityMin=_,this._hdrCapacityMax=y,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(r){this.uniforms.sdr.value=r}get gainMap(){return this.uniforms.gainMap.value}set gainMap(r){this.uniforms.gainMap.value=r}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(r){this.uniforms.offsetHdr.value.fromArray(r)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(r){this.uniforms.offsetSdr.value.fromArray(r)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(r){this.uniforms.gainMapMin.value.fromArray(r)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(r){this.uniforms.gainMapMax.value.fromArray(r)}get gamma(){const r=this.uniforms.gamma.value;return[1/r.x,1/r.y,1/r.z]}set gamma(r){const o=this.uniforms.gamma.value;o.x=1/r[0],o.y=1/r[1],o.z=1/r[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(r){this._hdrCapacityMin=r,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(r){this._hdrCapacityMax=r,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(r){this._maxDisplayBoost=Math.max(1,Math.min(65504,r)),this.calculateWeight()}calculateWeight(){const r=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,r))}}class Zc extends Error{}class jc extends Error{}const ai=(l,r,o)=>{const u=new RegExp(`${r}="([^"]*)"`,"i").exec(l);if(u)return u[1];const f=new RegExp(`<${r}[^>]*>([\\s\\S]*?)</${r}>`,"i").exec(l);if(f){const h=f[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return h&&h.length===3?h.map(d=>d.replace(/<\/?rdf:li>/g,"")):f[1].trim()}if(o!==void 0)return o;throw new Error(`Can't find ${r} in gainmap metadata`)},zh=l=>{let r;typeof TextDecoder<"u"?r=new TextDecoder().decode(l):r=l.toString();let o=r.indexOf("<x:xmpmeta");for(;o!==-1;){const u=r.indexOf("x:xmpmeta>",o),f=r.slice(o,u+10);try{const h=ai(f,"hdrgm:GainMapMin","0"),d=ai(f,"hdrgm:GainMapMax"),_=ai(f,"hdrgm:Gamma","1"),y=ai(f,"hdrgm:OffsetSDR","0.015625"),w=ai(f,"hdrgm:OffsetHDR","0.015625"),m=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(f),g=m?m[1]:"0",S=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(f);if(!S)throw new Error("Incomplete gainmap metadata");const C=S[1];return{gainMapMin:Array.isArray(h)?h.map(P=>parseFloat(P)):[parseFloat(h),parseFloat(h),parseFloat(h)],gainMapMax:Array.isArray(d)?d.map(P=>parseFloat(P)):[parseFloat(d),parseFloat(d),parseFloat(d)],gamma:Array.isArray(_)?_.map(P=>parseFloat(P)):[parseFloat(_),parseFloat(_),parseFloat(_)],offsetSdr:Array.isArray(y)?y.map(P=>parseFloat(P)):[parseFloat(y),parseFloat(y),parseFloat(y)],offsetHdr:Array.isArray(w)?w.map(P=>parseFloat(P)):[parseFloat(w),parseFloat(w),parseFloat(w)],hdrCapacityMin:parseFloat(g),hdrCapacityMax:parseFloat(C)}}catch{}o=r.indexOf("<x:xmpmeta",u)}};class Dh{constructor(r){this.options={debug:r&&r.debug!==void 0?r.debug:!1,extractFII:r&&r.extractFII!==void 0?r.extractFII:!0,extractNonFII:r&&r.extractNonFII!==void 0?r.extractNonFII:!0}}extract(r){return new Promise((o,u)=>{const f=this.options.debug,h=new DataView(r.buffer);if(h.getUint16(0)!==65496){u(new Error("Not a valid jpeg"));return}const d=h.byteLength;let _=2,y=0,w;for(;_<d;){if(++y>250){u(new Error(`Found no marker after ${y} loops `));return}if(h.getUint8(_)!==255){u(new Error(`Not a valid marker at offset 0x${_.toString(16)}, found: 0x${h.getUint8(_).toString(16)}`));return}if(w=h.getUint8(_+1),f&&console.log(`Marker: ${w.toString(16)}`),w===226){f&&console.log("Found APP2 marker (0xffe2)");const m=_+4;if(h.getUint32(m)===1297106432){const g=m+4;let S;if(h.getUint16(g)===18761)S=!1;else if(h.getUint16(g)===19789)S=!0;else{u(new Error("No valid endianness marker found in TIFF header"));return}if(h.getUint16(g+2,!S)!==42){u(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const C=h.getUint32(g+4,!S);if(C<8){u(new Error("Not valid TIFF data! (First offset less than 8)"));return}const P=g+C,F=h.getUint16(P,!S),D=P+2;let E=0;for(let U=D;U<D+12*F;U+=12)h.getUint16(U,!S)===45057&&(E=h.getUint32(U+8,!S));const R=P+2+F*12+4,k=[];for(let U=R;U<R+E*16;U+=16){const A={MPType:h.getUint32(U,!S),size:h.getUint32(U+4,!S),dataOffset:h.getUint32(U+8,!S),dependantImages:h.getUint32(U+12,!S),start:-1,end:-1,isFII:!1};A.dataOffset?(A.start=g+A.dataOffset,A.isFII=!1):(A.start=0,A.isFII=!0),A.end=A.start+A.size,k.push(A)}if(this.options.extractNonFII&&k.length){const U=new Blob([h]),A=[];for(const K of k){if(K.isFII&&!this.options.extractFII)continue;const Z=U.slice(K.start,K.end+1,"image/jpeg");A.push(Z)}o(A)}}}_+=2+h.getUint16(_+2)}})}}const Fh=async l=>{const r=zh(l);if(!r)throw new jc("Gain map XMP metadata not found");const u=await new Dh({extractFII:!0,extractNonFII:!0}).extract(l);if(u.length!==2)throw new Zc("Gain map recovery image not found");return{sdr:new Uint8Array(await u[0].arrayBuffer()),gainMap:new Uint8Array(await u[1].arrayBuffer()),metadata:r}},bu=l=>new Promise((r,o)=>{const u=document.createElement("img");u.onload=()=>{r(u)},u.onerror=f=>{o(f)},u.src=URL.createObjectURL(l)});class Yc extends ld{constructor(r,o){super(o),r&&(this._renderer=r),this._internalLoadingManager=new ad}setRenderer(r){return this._renderer=r,this}setRenderTargetOptions(r){return this._renderTargetOptions=r,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const r=new kh({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Mr,sdr:new Mr});return new jl({width:16,height:16,type:qt,colorSpace:Tl,material:r,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(r,o,u,f){const h=f?new Blob([f],{type:"image/jpeg"}):void 0,d=new Blob([u],{type:"image/jpeg"});let _,y,w=!1;if(typeof createImageBitmap>"u"){const S=await Promise.all([h?bu(h):Promise.resolve(void 0),bu(d)]);y=S[0],_=S[1],w=!0}else{const S=await Promise.all([h?createImageBitmap(h,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(d,{imageOrientation:"flipY"})]);y=S[0],_=S[1]}const m=new Mr(y||new ImageData(2,2),Rs,An,An,gn,Ou,Rr,Ps,1,Tl);m.flipY=w,m.needsUpdate=!0;const g=new Mr(_,Rs,An,An,gn,Ou,Rr,Ps,1,ud);g.flipY=w,g.needsUpdate=!0,r.width=_.width,r.height=_.height,r.material.gainMap=m,r.material.sdr=g,r.material.gainMapMin=o.gainMapMin,r.material.gainMapMax=o.gainMapMax,r.material.offsetHdr=o.offsetHdr,r.material.offsetSdr=o.offsetSdr,r.material.gamma=o.gamma,r.material.hdrCapacityMin=o.hdrCapacityMin,r.material.hdrCapacityMax=o.hdrCapacityMax,r.material.maxDisplayBoost=Math.pow(2,o.hdrCapacityMax),r.material.needsUpdate=!0,r.render()}}class Ah extends Yc{load([r,o,u],f,h,d){const _=this.prepareQuadRenderer();let y,w,m;const g=async()=>{if(y&&w&&m){try{await this.render(_,m,y,w)}catch(Y){this.manager.itemError(r),this.manager.itemError(o),this.manager.itemError(u),typeof d=="function"&&d(Y),_.disposeOnDemandRenderer();return}typeof f=="function"&&f(_),this.manager.itemEnd(r),this.manager.itemEnd(o),this.manager.itemEnd(u),_.disposeOnDemandRenderer()}};let S=!0,C=0,P=0,F=!0,D=0,E=0,x=!0,R=0,k=0;const U=()=>{if(typeof h=="function"){const Y=C+D+R,re=P+E+k,G=S&&F&&x;h(new ProgressEvent("progress",{lengthComputable:G,loaded:re,total:Y}))}};this.manager.itemStart(r),this.manager.itemStart(o),this.manager.itemStart(u);const A=new Os(this._internalLoadingManager);A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setPath(this.path),A.setWithCredentials(this.withCredentials),A.load(r,async Y=>{if(typeof Y=="string")throw new Error("Invalid sdr buffer");y=Y,await g()},Y=>{S=Y.lengthComputable,P=Y.loaded,C=Y.total,U()},Y=>{this.manager.itemError(r),typeof d=="function"&&d(Y)});const K=new Os(this._internalLoadingManager);K.setResponseType("arraybuffer"),K.setRequestHeader(this.requestHeader),K.setPath(this.path),K.setWithCredentials(this.withCredentials),K.load(o,async Y=>{if(typeof Y=="string")throw new Error("Invalid gainmap buffer");w=Y,await g()},Y=>{F=Y.lengthComputable,E=Y.loaded,D=Y.total,U()},Y=>{this.manager.itemError(o),typeof d=="function"&&d(Y)});const Z=new Os(this._internalLoadingManager);return Z.setRequestHeader(this.requestHeader),Z.setPath(this.path),Z.setWithCredentials(this.withCredentials),Z.load(u,async Y=>{if(typeof Y!="string")throw new Error("Invalid metadata string");m=JSON.parse(Y),await g()},Y=>{x=Y.lengthComputable,k=Y.loaded,R=Y.total,U()},Y=>{this.manager.itemError(u),typeof d=="function"&&d(Y)}),_}}class Nh extends Yc{load(r,o,u,f){const h=this.prepareQuadRenderer(),d=new Os(this._internalLoadingManager);return d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setPath(this.path),d.setWithCredentials(this.withCredentials),this.manager.itemStart(r),d.load(r,async _=>{if(typeof _=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const y=new Uint8Array(_);let w,m,g;try{const S=await Fh(y);w=S.sdr,m=S.gainMap,g=S.metadata}catch(S){if(S instanceof jc||S instanceof Zc)console.warn(`Failure to reconstruct an HDR image from ${r}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),g={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},w=y;else throw S}try{await this.render(h,g,w,m)}catch(S){this.manager.itemError(r),typeof f=="function"&&f(S),h.disposeOnDemandRenderer();return}typeof o=="function"&&o(h),this.manager.itemEnd(r),h.disposeOnDemandRenderer()},u,_=>{this.manager.itemError(r),typeof f=="function"&&f(_)}),h}}const di={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Vc="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Pr=l=>Array.isArray(l),Yl=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Ls({files:l=Yl,path:r="",preset:o=void 0,encoding:u=void 0,extensions:f}={}){let h=null,d=!1;o&&(Vl(o),l=di[o],r=Vc),d=Pr(l);const{extension:_,isCubemap:y}=Wl(l);if(h=Gl(_),!h)throw new Error("useEnvironment: Unrecognized file extension: "+l);const w=Bt(C=>C.gl);W.useLayoutEffect(()=>{if(_!=="webp"&&_!=="jpg"&&_!=="jpeg")return;function C(){Ir.clear(h,d?[l]:l)}w.domElement.addEventListener("webglcontextlost",C,{once:!0})},[l,w.domElement]);const m=Ir(h,d?[l]:l,C=>{(_==="webp"||_==="jpg"||_==="jpeg")&&C.setRenderer(w),C.setPath==null||C.setPath(r),f&&f(C)});let g=d?m[0]:m;if(_==="jpg"||_==="jpeg"||_==="webp"){var S;g=(S=g.renderTarget)==null?void 0:S.texture}return g.mapping=y?fd:dd,"colorSpace"in g?g.colorSpace=u??y?"srgb":"srgb-linear":g.encoding=u??y?Rh:Ph,g}const Hh={files:Yl,path:"",preset:void 0,extensions:void 0};Ls.preload=l=>{const r={...Hh,...l};let{files:o,path:u=""}=r;const{preset:f,extensions:h}=r;f&&(Vl(f),o=di[f],u=Vc);const{extension:d}=Wl(o);if(d==="webp"||d==="jpg"||d==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const _=Gl(d);if(!_)throw new Error("useEnvironment: Unrecognized file extension: "+o);Ir.preload(_,Pr(o)?[o]:o,y=>{y.setPath==null||y.setPath(u),h&&h(y)})};const Bh={files:Yl,preset:void 0};Ls.clear=l=>{const r={...Bh,...l};let{files:o}=r;const{preset:u}=r;u&&(Vl(u),o=di[u]);const{extension:f}=Wl(o),h=Gl(f);if(!h)throw new Error("useEnvironment: Unrecognized file extension: "+o);Ir.clear(h,Pr(o)?[o]:o)};function Vl(l){if(!(l in di))throw new Error("Preset must be one of: "+Object.keys(di).join(", "))}function Wl(l){var r;const o=Pr(l)&&l.length===6,u=Pr(l)&&l.length===3&&l.some(d=>d.endsWith("json")),f=Pr(l)?l[0]:l;return{extension:o?"cube":u?"webp":f.startsWith("data:application/exr")?"exr":f.startsWith("data:application/hdr")?"hdr":f.startsWith("data:image/jpeg")?"jpg":(r=f.split(".").pop())==null||(r=r.split("?"))==null||(r=r.shift())==null?void 0:r.toLowerCase(),isCubemap:o,isGainmap:u}}function Gl(l){return l==="cube"?hd:l==="hdr"?Sh:l==="exr"?Th:l==="jpg"||l==="jpeg"?Nh:l==="webp"?Ah:null}const Zh=l=>l.current&&l.current.isScene,jh=l=>Zh(l)?l.current:l;function Ql(l,r,o,u,f={}){var h,d,_,y;f={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...f};const w=jh(r||o),m=w.background,g=w.environment,S={backgroundBlurriness:w.backgroundBlurriness,backgroundIntensity:w.backgroundIntensity,backgroundRotation:(h=(d=w.backgroundRotation)==null||d.clone==null?void 0:d.clone())!==null&&h!==void 0?h:[0,0,0],environmentIntensity:w.environmentIntensity,environmentRotation:(_=(y=w.environmentRotation)==null||y.clone==null?void 0:y.clone())!==null&&_!==void 0?_:[0,0,0]};return l!=="only"&&(w.environment=u),l&&(w.background=u),Fn(w,f),()=>{l!=="only"&&(w.environment=g),l&&(w.background=m),Fn(w,S)}}function Xl({scene:l,background:r=!1,map:o,...u}){const f=Bt(h=>h.scene);return W.useLayoutEffect(()=>{if(o)return Ql(r,l,f,o,u)}),null}function Wc({background:l=!1,scene:r,blur:o,backgroundBlurriness:u,backgroundIntensity:f,backgroundRotation:h,environmentIntensity:d,environmentRotation:_,...y}){const w=Ls(y),m=Bt(g=>g.scene);return W.useLayoutEffect(()=>Ql(l,r,m,w,{backgroundBlurriness:o??u,backgroundIntensity:f,backgroundRotation:h,environmentIntensity:d,environmentRotation:_})),W.useEffect(()=>()=>{w.dispose()},[w]),null}function Yh({children:l,near:r=.1,far:o=1e3,resolution:u=256,frames:f=1,map:h,background:d=!1,blur:_,backgroundBlurriness:y,backgroundIntensity:w,backgroundRotation:m,environmentIntensity:g,environmentRotation:S,scene:C,files:P,path:F,preset:D=void 0,extensions:E}){const x=Bt(Z=>Z.gl),R=Bt(Z=>Z.scene),k=W.useRef(null),[U]=W.useState(()=>new Ul),A=W.useMemo(()=>{const Z=new pd(u);return Z.texture.type=qt,Z},[u]);W.useEffect(()=>()=>{A.dispose()},[A]),W.useLayoutEffect(()=>{if(f===1){const Z=x.autoClear;x.autoClear=!0,k.current.update(x,U),x.autoClear=Z}return Ql(d,C,R,A.texture,{backgroundBlurriness:_??y,backgroundIntensity:w,backgroundRotation:m,environmentIntensity:g,environmentRotation:S})},[l,U,A.texture,C,R,d,f,x]);let K=1;return xc(()=>{if(f===1/0||K<f){const Z=x.autoClear;x.autoClear=!0,k.current.update(x,U),x.autoClear=Z,K++}}),W.createElement(W.Fragment,null,Bd(W.createElement(W.Fragment,null,l,W.createElement("cubeCamera",{ref:k,args:[r,o,A]}),P||D?W.createElement(Wc,{background:!0,files:P,preset:D,path:F,extensions:E}):h?W.createElement(Xl,{background:!0,map:h,extensions:E}):null),U))}function Vh(l){var r,o,u,f;const h=Ls(l),d=l.map||h;W.useMemo(()=>Al({GroundProjectedEnvImpl:wh}),[]),W.useEffect(()=>()=>{h.dispose()},[h]);const _=W.useMemo(()=>[d],[d]),y=(r=l.ground)==null?void 0:r.height,w=(o=l.ground)==null?void 0:o.radius,m=(u=(f=l.ground)==null?void 0:f.scale)!==null&&u!==void 0?u:1e3;return W.createElement(W.Fragment,null,W.createElement(Xl,Is({},l,{map:d})),W.createElement("groundProjectedEnvImpl",{args:_,scale:m,height:y,radius:w}))}function Wh(l){return l.ground?W.createElement(Vh,l):l.map?W.createElement(Xl,l):l.children?W.createElement(Yh,l):W.createElement(Wc,l)}const np=(l,{parameters:r})=>{const o=r.scale||100;return W.useEffect(()=>{il.controls&&r.cameraTarget&&il.controls.setTarget(r.cameraTarget[0],r.cameraTarget[1],r.cameraTarget[2])},[r.cameraTarget]),ot.jsxs(sh,{camera:{near:.1,far:1e3*o,position:r.cameraPosition||[-1*o,1*o,-1*o],fov:30},gl:{logarithmicDepthBuffer:!0,autoClear:!1,stencil:!1},style:{backgroundColor:r.background||"#000",position:"absolute",height:"auto",bottom:0,top:0,left:0,right:0},children:[ot.jsx("ambientLight",{intensity:.2}),ot.jsx("directionalLight",{castShadow:!0,position:[-1,2,-3],intensity:1.2}),ot.jsx(Wh,{preset:"studio",environmentIntensity:1.2,backgroundRotation:[0,oh,0]}),ot.jsx(l,{}),ot.jsx(Mh,{ref:il.setControls,makeDefault:!0})]})};export{np as C,bh as P,Yu as T,Is as _,Bt as a,Ir as b,$h as c,oh as d,Al as e,ep as f,tp as g,Kh as h,Jh as i,qh as j,sh as k,vd as s,xc as u};

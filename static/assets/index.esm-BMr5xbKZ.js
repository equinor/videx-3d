/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var D=function(i,e){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},D(i,e)};function Q(i,e){function t(){this.constructor=i}D(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var q=function(){return q=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++)for(var n in e=arguments[t])Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i},q.apply(this,arguments)};function Z(i,e){for(var t=new Array(i.length),r=0;r<i.length;r++)t[r]=2*i[r]-e[r];return t}function R(i,e,t){var r,n,o,u,a=e.length-1;if(t)r=e[i-1<0?a:i-1],n=e[i%e.length],o=e[(i+1)%e.length],u=e[(i+2)%e.length];else{if(i===a)throw Error("There is no spline segment at this index for a closed curve!");n=e[i],o=e[i+1],r=i>0?e[i-1]:Z(n,o),u=i<a-1?e[i+2]:Z(o,n)}return[r,n,o,u]}function e0(i,e,t){t===void 0&&(t=!1);var r=t?e.length:e.length-1;if(i===1)return{index:r-1,weight:1};var n=r*i,o=Math.floor(n);return{index:o,weight:n-o}}function t0(i,e){for(var t=0;t<i.length;t++)i[t]=e;return i}function r0(i,e){for(var t=0;t<i.length;t++)i[t]=e(i[t],t);return i}function n0(i,e,t){t===void 0&&(t=0);for(var r=0;r<i.length;r++)t=e(t,i[r],r);return t}function I(i,e){e=e||new Array(i.length);for(var t=0;t<i.length;t++)e[t]=i[t];return e}function b(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i<e?e:i>t?t:i}function X(i,e){var t=e[0];if(i>=e[e.length-1])return e.length-1;if(i<=t)return 0;for(var r=0,n=e.length-1;r<=n;){var o=Math.floor((r+n)/2),u=e[o];if(u<i)r=o+1;else{if(!(u>i))return o;n=o-1}}return Math.max(0,n)}var A=Math.pow(2,-42);function G(i){var e=Math.pow(Math.abs(i),.3333333333333333);return i<0?-e:e}function S(i,e,t){if(Math.abs(i)<A)return Math.abs(e)<A?[]:[-t/e];var r=e*e-4*i*t;return Math.abs(r)<A?[-e/(2*i)]:r>0?[(-e+Math.sqrt(r))/(2*i),(-e-Math.sqrt(r))/(2*i)]:[]}function i0(i,e,t,r){if(Math.abs(i)<A)return S(e,t,r);var n,o=(3*i*t-e*e)/(3*i*i),u=(2*e*e*e-9*i*e*t+27*i*i*r)/(27*i*i*i);if(Math.abs(o)<A)n=[G(-u)];else if(Math.abs(u)<A)n=[0].concat(o<0?[Math.sqrt(-o),-Math.sqrt(-o)]:[]);else{var a=u*u/4+o*o*o/27;if(Math.abs(a)<A)n=[-1.5*u/o,3*u/o];else if(a>0)n=[(h=G(-u/2-Math.sqrt(a)))-o/(3*h)];else{var h=2*Math.sqrt(-o/3),s=Math.acos(3*u/o/h)/3,p=2*Math.PI/3;n=[h*Math.cos(s),h*Math.cos(s-p),h*Math.cos(s-2*p)]}}for(var c=0;c<n.length;c++)n[c]-=e/(3*i);return n}function B(i,e){if(i.length!==e.length)throw Error("Vectors must be of equal length!");for(var t=0,r=0;r<i.length;r++)t+=i[r]*e[r];return t}function w(i,e,t){if(!(i.length>3)){t=t||new Array(3);var r=i[0],n=i[1],o=i[2]||0,u=e[0],a=e[1],h=e[2]||0;return t[0]=n*h-o*a,t[1]=o*u-r*h,t[2]=r*a-n*u,t}}function W(i,e){for(var t=0,r=0;r<i.length;r++)t+=(i[r]-e[r])*(i[r]-e[r]);return t}function C(i){for(var e=0,t=0;t<i.length;t++)e+=i[t]*i[t];return Math.sqrt(e)}function U(i,e){var t=W(i,e);return t===0?0:Math.sqrt(t)}function F(i,e){var t=e?I(i,e):i,r=n0(t,function(o,u){return o+Math.pow(u,2)}),n=Math.sqrt(r);return n===0?t0(t,0):r0(t,function(o){return o/n})}function H(i,e,t,r){e===void 0&&(e=[0,1,0]),t===void 0&&(t=0);var n=Math.cos(t),o=Math.sin(t),u=1-n,a=i[0],h=i[1],s=i[2],p=e[0],c=e[1],f=e[2],l=u*p,g=u*c;return(r=r||i)[0]=(l*p+n)*a+(l*c-o*f)*h+(l*f+o*c)*s,r[1]=(l*c+o*f)*a+(g*c+n)*h+(g*f-o*p)*s,r[2]=(l*f-o*c)*a+(g*f+o*p)*h+(u*f*f+n)*s,r}function o0(i,e,t,r,n){if(n===void 0&&(n=0),n===0)return[0,1,2,3];var o=function(h,s){return Math.pow(W(h,s),.5*n)},u=o(e,i),a=o(t,e)+u;return[0,u,a,o(r,t)+a]}function u0(i,e,t,r,n){for(var o=Number.isFinite(n.tension)?n.tension:.5,u=Number.isFinite(n.alpha)?n.alpha:null,a=u>0?o0(i,e,t,r,u):null,h=new Array(i.length),s=0;s<i.length;s++){var p=0,c=0,f=i[s],l=e[s],g=t[s],_=r[s];if(a){var M=a[0],d=a[1],y=a[2],v=a[3];d-y!=0&&(M-d!=0&&M-y!=0&&(p=(1-o)*(y-d)*((f-l)/(M-d)-(f-g)/(M-y)+(l-g)/(d-y))),d-v!=0&&y-v!=0&&(c=(1-o)*(y-d)*((l-g)/(d-y)-(l-_)/(d-v)+(g-_)/(y-v))))}else p=(1-o)*(g-f)*.5,c=(1-o)*(_-l)*.5;var T=2*l-2*g+p+c,O=-3*l+3*g-2*p-c,j=p,L=l;h[s]=[T,O,j,L]}return h}function m(i,e){var t=i*i,r=i*t;return e[0]*r+e[1]*t+e[2]*i+e[3]}function E(i,e){var t=i*i;return 3*e[0]*t+2*e[1]*i+e[2]}function Y(i,e){return 6*e[0]*i+2*e[1]}function a0(i,e){var t=e[0],r=e[1],n=e[2],o=e[3]-i;return t===0&&r===0&&n===0&&o===0?[0]:i0(t,r,n,o).filter(function(u){return u>-A&&u<=1+A}).map(function(u){return b(u,0,1)})}function z(i,e,t,r){r===void 0&&(r=null),r=r||new Array(t.length);for(var n=0;n<t.length;n++)r[n]=i(e,t[n]);return r}var $=function(){function i(e){e===void 0&&(e=null),this._alpha=0,this._tension=.5,this._closed=!1,this._onInvalidateCache=null,this._onInvalidateCache=e,this._cache={arcLengths:null,coefficients:null}}return i.prototype._invalidateCache=function(){this.points&&(this._cache={arcLengths:null,coefficients:null},this._onInvalidateCache&&this._onInvalidateCache())},Object.defineProperty(i.prototype,"alpha",{get:function(){return this._alpha},set:function(e){Number.isFinite(e)&&e!==this._alpha&&(this._invalidateCache(),this._alpha=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tension",{get:function(){return this._tension},set:function(e){Number.isFinite(e)&&e!==this._tension&&(this._invalidateCache(),this._tension=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"points",{get:function(){return this._points},set:function(e){if(!e||e.length<2)throw Error("At least 2 control points are required!");this._points=e,this._invalidateCache()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"closed",{get:function(){return this._closed},set:function(e){e=!!e,this._closed!==e&&(this._invalidateCache(),this._closed=e)},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this._invalidateCache()},i.prototype.evaluateForT=function(e,t,r){var n=e0(t,this.points,this.closed),o=n.index;return z(e,n.weight,this.getCoefficients(o),r)},i.prototype.getCoefficients=function(e){if(this.points){if(this._cache.coefficients||(this._cache.coefficients=new Map),!this._cache.coefficients.has(e)){var t=R(e,this.points,this.closed),r=u0(t[0],t[1],t[2],t[3],{tension:this.tension,alpha:this.alpha});this._cache.coefficients.set(e,r)}return this._cache.coefficients.get(e)}},i}(),h0=function(i){function e(t,r){t===void 0&&(t=300),r===void 0&&(r=null);var n=i.call(this,r)||this;return n._subDivisions=t,n}return Q(e,i),Object.defineProperty(e.prototype,"arcLengths",{get:function(){return this._cache.arcLengths||(this._cache.arcLengths=this.computeArcLengths()),this._cache.arcLengths},enumerable:!1,configurable:!0}),e.prototype._invalidateCache=function(){i.prototype._invalidateCache.call(this),this._cache.arcLengths=null},e.prototype.computeArcLengths=function(){var t,r=[],n=this.evaluateForT(m,0),o=0;r.push(0);for(var u=1;u<=this._subDivisions;u++)o+=U(t=this.evaluateForT(m,u/this._subDivisions),n),r.push(o),n=t;return r},e.prototype.lengthAt=function(t){var r=this.arcLengths;return t*r[r.length-1]},e.prototype.getT=function(t){var r=this.arcLengths,n=r.length,o=t*r[n-1],u=X(o,r);if(r[u]===o)return u/(n-1);var a=r[u];return(u+(o-a)/(r[u+1]-a))/(n-1)},e.prototype.getU=function(t){if(t===0)return 0;if(t===1)return 1;var r=this.arcLengths,n=r.length-1,o=r[n],u=t*n,a=Math.floor(u),h=r[a];if(u===a)return h/o;var s=a/n;return(h+U(this.evaluateForT(m,s),this.evaluateForT(m,t)))/o},e}($),V=[[[-.906179845938664,.23692688505618908],[-.5384693101056831,.47862867049936647],[0,.5688888888888889],[.5384693101056831,.47862867049936647],[.906179845938664,.23692688505618908]],[[-.932469514203152,.17132449237917036],[-.6612093864662645,.3607615730481386],[-.2386191860831969,.46791393457269104],[.2386191860831969,.46791393457269104],[.6612093864662645,.3607615730481386],[.932469514203152,.17132449237917036]],[[-.9491079123427585,.1294849661688697],[-.7415311855993945,.27970539148927664],[-.4058451513773972,.3818300505051189],[0,.4179591836734694],[.4058451513773972,.3818300505051189],[.7415311855993945,.27970539148927664],[.9491079123427585,.1294849661688697]],[[-.9602898564975363,.10122853629037626],[-.7966664774136267,.22238103445337448],[-.525532409916329,.31370664587788727],[-.1834346424956498,.362683783378362],[.1834346424956498,.362683783378362],[.525532409916329,.31370664587788727],[.7966664774136267,.22238103445337448],[.9602898564975363,.10122853629037626]],[[-.9681602395076261,.08127438836157441],[-.8360311073266358,.1806481606948574],[-.6133714327005904,.26061069640293544],[-.3242534234038089,.31234707704000286],[0,.3302393550012598],[.3242534234038089,.31234707704000286],[.6133714327005904,.26061069640293544],[.8360311073266358,.1806481606948574],[.9681602395076261,.08127438836157441]],[[-.9739065285171717,.06667134430868814],[-.8650633666889845,.1494513491505806],[-.6794095682990244,.21908636251598204],[-.4333953941292472,.26926671930999635],[-.14887433898163122,.29552422471475287],[.14887433898163122,.29552422471475287],[.4333953941292472,.26926671930999635],[.6794095682990244,.21908636251598204],[.8650633666889845,.1494513491505806],[.9739065285171717,.06667134430868814]],[[-.978228658146056,.0556685671161736],[-.887062599768095,.125580369464904],[-.730152005574049,.186290210927734],[-.519096129206811,.23319376459199],[-.269543155952344,.262804544510246],[0,.2729250867779],[.269543155952344,.262804544510246],[.519096129206811,.23319376459199],[.730152005574049,.186290210927734],[.887062599768095,.125580369464904],[.978228658146056,.0556685671161736]],[[-.981560634246719,.0471753363865118],[-.904117256370474,.106939325995318],[-.769902674194304,.160078328543346],[-.587317954286617,.203167426723065],[-.36783149899818,.233492536538354],[-.125233408511468,.249147045813402],[.125233408511468,.249147045813402],[.36783149899818,.233492536538354],[.587317954286617,.203167426723065],[.769902674194304,.160078328543346],[.904117256370474,.106939325995318],[.981560634246719,.0471753363865118]],[[-.984183054718588,.0404840047653158],[-.917598399222977,.0921214998377284],[-.801578090733309,.138873510219787],[-.64234933944034,.178145980761945],[-.448492751036446,.207816047536888],[-.230458315955134,.226283180262897],[0,.232551553230873],[.230458315955134,.226283180262897],[.448492751036446,.207816047536888],[.64234933944034,.178145980761945],[.801578090733309,.138873510219787],[.917598399222977,.0921214998377284],[.984183054718588,.0404840047653158]],[[-.986283808696812,.0351194603317518],[-.928434883663573,.0801580871597602],[-.827201315069764,.121518570687903],[-.687292904811685,.157203167158193],[-.515248636358154,.185538397477937],[-.319112368927889,.205198463721295],[-.108054948707343,.215263853463157],[.108054948707343,.215263853463157],[.319112368927889,.205198463721295],[.515248636358154,.185538397477937],[.687292904811685,.157203167158193],[.827201315069764,.121518570687903],[.928434883663573,.0801580871597602],[.986283808696812,.0351194603317518]],[[-.987992518020485,.0307532419961172],[-.937273392400705,.0703660474881081],[-.848206583410427,.107159220467171],[-.72441773136017,.139570677926154],[-.570972172608538,.166269205816993],[-.394151347077563,.186161000015562],[-.201194093997434,.198431485327111],[0,.202578241925561],[.201194093997434,.198431485327111],[.394151347077563,.186161000015562],[.570972172608538,.166269205816993],[.72441773136017,.139570677926154],[.848206583410427,.107159220467171],[.937273392400705,.0703660474881081],[.987992518020485,.0307532419961172]],[[-.989400934991649,.027152459411754],[-.944575023073232,.0622535239386478],[-.865631202387831,.0951585116824927],[-.755404408355003,.124628971255533],[-.617876244402643,.149595988816576],[-.458016777657227,.169156519395002],[-.281603550779258,.182603415044923],[-.0950125098376374,.189450610455068],[.0950125098376374,.189450610455068],[.281603550779258,.182603415044923],[.458016777657227,.169156519395002],[.617876244402643,.149595988816576],[.755404408355003,.124628971255533],[.865631202387831,.0951585116824927],[.944575023073232,.0622535239386478],[.989400934991649,.027152459411754]],[[-.990575475314417,.0241483028685479],[-.950675521768767,.0554595293739872],[-.880239153726985,.0850361483171791],[-.781514003896801,.111883847193403],[-.65767115921669,.135136368468525],[-.512690537086476,.15404576107681],[-.351231763453876,.16800410215645],[-.178484181495847,.176562705366992],[0,.179446470356206],[.178484181495847,.176562705366992],[.351231763453876,.16800410215645],[.512690537086476,.15404576107681],[.65767115921669,.135136368468525],[.781514003896801,.111883847193403],[.880239153726985,.0850361483171791],[.950675521768767,.0554595293739872],[.990575475314417,.0241483028685479]],[[-.99156516842093,.0216160135264833],[-.955823949571397,.0497145488949698],[-.892602466497555,.076425730254889],[-.803704958972523,.100942044106287],[-.691687043060353,.122555206711478],[-.559770831073947,.14064291467065],[-.411751161462842,.154684675126265],[-.251886225691505,.164276483745832],[-.0847750130417353,.169142382963143],[.0847750130417353,.169142382963143],[.251886225691505,.164276483745832],[.411751161462842,.154684675126265],[.559770831073947,.14064291467065],[.691687043060353,.122555206711478],[.803704958972523,.100942044106287],[.892602466497555,.076425730254889],[.955823949571397,.0497145488949697],[.99156516842093,.0216160135264833]],[[-.992406843843584,.0194617882297264],[-.96020815213483,.0448142267656996],[-.903155903614817,.0690445427376412],[-.822714656537142,.0914900216224499],[-.720966177335229,.111566645547333],[-.600545304661681,.128753962539336],[-.46457074137596,.142606702173606],[-.316564099963629,.152766042065859],[-.160358645640225,.158968843393954],[0,.161054449848783],[.160358645640225,.158968843393954],[.316564099963629,.152766042065859],[.46457074137596,.142606702173606],[.600545304661681,.128753962539336],[.720966177335229,.111566645547333],[.822714656537142,.0914900216224499],[.903155903614817,.0690445427376412],[.96020815213483,.0448142267656996],[.992406843843584,.0194617882297264]],[[-.993128599185094,.0176140071391521],[-.963971927277913,.0406014298003869],[-.912234428251325,.062672048334109],[-.839116971822218,.0832767415767047],[-.74633190646015,.10193011981724],[-.636053680726515,.118194531961518],[-.510867001950827,.131688638449176],[-.373706088715419,.142096109318382],[-.227785851141645,.149172986472603],[-.0765265211334973,.152753387130725],[.0765265211334973,.152753387130725],[.227785851141645,.149172986472603],[.373706088715419,.142096109318382],[.510867001950827,.131688638449176],[.636053680726515,.118194531961518],[.74633190646015,.10193011981724],[.839116971822218,.0832767415767047],[.912234428251325,.062672048334109],[.963971927277913,.0406014298003869],[.993128599185094,.0176140071391521]],[[-.993752170620389,.0160172282577743],[-.967226838566306,.0369537897708524],[-.9200993341504,.0571344254268572],[-.853363364583317,.0761001136283793],[-.768439963475677,.0934444234560338],[-.667138804197412,.108797299167148],[-.551618835887219,.121831416053728],[-.424342120207438,.132268938633337],[-.288021316802401,.139887394791073],[-.145561854160895,.14452440398997],[0,.14608113364969],[.145561854160895,.14452440398997],[.288021316802401,.139887394791073],[.424342120207438,.132268938633337],[.551618835887219,.121831416053728],[.667138804197412,.108797299167148],[.768439963475677,.0934444234560338],[.853363364583317,.0761001136283793],[.9200993341504,.0571344254268572],[.967226838566306,.0369537897708524],[.993752170620389,.0160172282577743]],[[-.994294585482399,.0146279952982722],[-.970060497835428,.0337749015848141],[-.926956772187174,.0522933351526832],[-.8658125777203,.0697964684245204],[-.787816805979208,.0859416062170677],[-.694487263186682,.10041414444288],[-.587640403506911,.112932296080539],[-.469355837986757,.123252376810512],[-.341935820892084,.131173504787062],[-.207860426688221,.136541498346015],[-.0697392733197222,.139251872855631],[.0697392733197222,.139251872855631],[.207860426688221,.136541498346015],[.341935820892084,.131173504787062],[.469355837986757,.123252376810512],[.587640403506911,.112932296080539],[.694487263186682,.10041414444288],[.787816805979208,.0859416062170677],[.8658125777203,.0697964684245204],[.926956772187174,.0522933351526832],[.970060497835428,.0337749015848141],[.994294585482399,.0146279952982722]],[[-.994769334997552,.0134118594871417],[-.972542471218115,.0309880058569794],[-.932971086826016,.0480376717310846],[-.876752358270441,.0642324214085258],[-.804888401618839,.0792814117767189],[-.71866136313195,.0929157660600351],[-.619609875763646,.104892091464541],[-.509501477846007,.114996640222411],[-.39030103803029,.123049084306729],[-.264135680970344,.128905722188082],[-.133256824298466,.132462039404696],[0,.133654572186106],[.133256824298466,.132462039404696],[.264135680970344,.128905722188082],[.39030103803029,.123049084306729],[.509501477846007,.114996640222411],[.619609875763646,.104892091464541],[.71866136313195,.0929157660600351],[.804888401618839,.0792814117767189],[.876752358270441,.0642324214085258],[.932971086826016,.0480376717310846],[.972542471218115,.0309880058569794],[.994769334997552,.0134118594871417]],[[-.995187219997021,.0123412297999872],[-.974728555971309,.0285313886289336],[-.938274552002732,.0442774388174198],[-.886415527004401,.0592985849154367],[-.820001985973902,.0733464814110803],[-.740124191578554,.0861901615319532],[-.648093651936975,.0976186521041138],[-.545421471388839,.107444270115965],[-.433793507626045,.115505668053725],[-.315042679696163,.121670472927803],[-.191118867473616,.125837456346828],[-.0640568928626056,.127938195346752],[.0640568928626056,.127938195346752],[.191118867473616,.125837456346828],[.315042679696163,.121670472927803],[.433793507626045,.115505668053725],[.545421471388839,.107444270115965],[.648093651936975,.0976186521041138],[.740124191578554,.0861901615319532],[.820001985973902,.0733464814110803],[.886415527004401,.0592985849154367],[.938274552002732,.0442774388174198],[.974728555971309,.0285313886289336],[.995187219997021,.0123412297999872]],[[-.995556969790498,.0113937985010262],[-.976663921459517,.0263549866150321],[-.942974571228974,.0409391567013063],[-.894991997878275,.0549046959758351],[-.833442628760834,.0680383338123569],[-.759259263037357,.080140700335001],[-.673566368473468,.0910282619829636],[-.577662930241222,.10053594906705],[-.473002731445714,.108519624474263],[-.361172305809387,.114858259145711],[-.243866883720988,.119455763535784],[-.12286469261071,.12224244299031],[0,.123176053726715],[.12286469261071,.12224244299031],[.243866883720988,.119455763535784],[.361172305809387,.114858259145711],[.473002731445714,.108519624474263],[.577662930241222,.10053594906705],[.673566368473468,.0910282619829636],[.759259263037357,.080140700335001],[.833442628760834,.0680383338123569],[.894991997878275,.0549046959758351],[.942974571228974,.0409391567013063],[.976663921459517,.0263549866150321],[.995556969790498,.0113937985010262]],[[-.995885701145616,.010551372617343],[-.97838544595647,.0244178510926319],[-.947159066661714,.0379623832943627],[-.902637861984307,.0509758252971478],[-.845445942788498,.0632740463295748],[-.776385948820678,.0746841497656597],[-.696427260419957,.0850458943134852],[-.606692293017618,.0942138003559141],[-.508440714824505,.102059161094425],[-.403051755123486,.108471840528576],[-.292004839485956,.113361816546319],[-.17685882035689,.116660443485296],[-.0592300934293132,.118321415279262],[.0592300934293132,.118321415279262],[.17685882035689,.116660443485296],[.292004839485956,.113361816546319],[.403051755123486,.108471840528576],[.508440714824505,.102059161094425],[.606692293017618,.0942138003559141],[.696427260419957,.0850458943134852],[.776385948820678,.0746841497656597],[.845445942788498,.0632740463295748],[.902637861984307,.0509758252971478],[.947159066661714,.0379623832943627],[.97838544595647,.0244178510926319],[.995885701145616,.010551372617343]],[[-.996179262888988,.00979899605129436],[-.979923475961501,.0226862315961806],[-.950900557814705,.0352970537574197],[-.909482320677491,.047449412520615],[-.856207908018294,.0589835368598335],[-.791771639070508,.0697488237662455],[-.717013473739423,.0796048677730577],[-.632907971946495,.0884231585437569],[-.540551564579456,.0960887273700285],[-.441148251750026,.102501637817745],[-.335993903638508,.107578285788533],[-.226459365439536,.111252488356845],[-.113972585609529,.113476346108965],[0,.114220867378956],[.113972585609529,.113476346108965],[.226459365439536,.111252488356845],[.335993903638508,.107578285788533],[.441148251750026,.102501637817745],[.540551564579456,.0960887273700285],[.632907971946495,.0884231585437569],[.717013473739423,.0796048677730577],[.791771639070508,.0697488237662455],[.856207908018294,.0589835368598336],[.909482320677491,.047449412520615],[.950900557814705,.0352970537574197],[.979923475961501,.0226862315961806],[.996179262888988,.00979899605129436]],[[-.996442497573954,.00912428259309452],[-.981303165370872,.0211321125927712],[-.954259280628938,.0329014277823043],[-.915633026392132,.0442729347590042],[-.865892522574395,.0551073456757167],[-.805641370917179,.0652729239669995],[-.735610878013631,.0746462142345687],[-.656651094038864,.0831134172289012],[-.569720471811401,.0905717443930328],[-.475874224955118,.0969306579979299],[-.376251516089078,.10211296757806],[-.272061627635178,.106055765922846],[-.16456928213338,.108711192258294],[-.0550792898840342,.110047013016475],[.0550792898840342,.110047013016475],[.16456928213338,.108711192258294],[.272061627635178,.106055765922846],[.376251516089078,.10211296757806],[.475874224955118,.0969306579979299],[.569720471811401,.0905717443930328],[.656651094038864,.0831134172289012],[.735610878013631,.0746462142345687],[.805641370917179,.0652729239669995],[.865892522574395,.0551073456757167],[.915633026392132,.0442729347590042],[.954259280628938,.0329014277823043],[.981303165370872,.0211321125927712],[.996442497573954,.00912428259309452]],[[-.996679442260596,.00851690387874641],[-.982545505261413,.0197320850561227],[-.957285595778087,.0307404922020936],[-.921180232953058,.0414020625186828],[-.874637804920102,.0515948269024979],[-.818185487615252,.0612030906570791],[-.752462851734477,.0701179332550512],[-.678214537602686,.0782383271357637],[-.596281797138227,.0854722573661725],[-.507592955124227,.0917377571392587],[-.413152888174008,.0969638340944086],[-.314031637867639,.101091273759914],[-.211352286166001,.104073310077729],[-.106278230132679,.10587615509732],[0,.106479381718314],[.106278230132679,.10587615509732],[.211352286166001,.104073310077729],[.314031637867639,.101091273759914],[.413152888174008,.0969638340944086],[.507592955124227,.0917377571392587],[.596281797138227,.0854722573661725],[.678214537602686,.0782383271357637],[.752462851734477,.0701179332550512],[.818185487615252,.0612030906570791],[.874637804920102,.0515948269024979],[.921180232953058,.0414020625186828],[.957285595778087,.0307404922020936],[.982545505261413,.0197320850561227],[.996679442260596,.00851690387874641]],[[-.996893484074649,.0079681924961666],[-.983668123279747,.0184664683110909],[-.960021864968307,.0287847078833233],[-.926200047429274,.038799192569627],[-.882560535792052,.048402672830594],[-.829565762382768,.057493156217619],[-.767777432104826,.0659742298821805],[-.697850494793315,.0737559747377052],[-.620526182989242,.0807558952294202],[-.536624148142019,.0868997872010829],[-.447033769538089,.0921225222377861],[-.352704725530878,.0963687371746442],[-.254636926167889,.0995934205867952],[-.153869913608583,.101762389748405],[-.0514718425553176,.102852652893558],[.0514718425553176,.102852652893558],[.153869913608583,.101762389748405],[.254636926167889,.0995934205867952],[.352704725530878,.0963687371746442],[.447033769538089,.0921225222377861],[.536624148142019,.0868997872010829],[.620526182989242,.0807558952294202],[.697850494793315,.0737559747377052],[.767777432104826,.0659742298821805],[.829565762382768,.057493156217619],[.882560535792052,.048402672830594],[.926200047429274,.038799192569627],[.960021864968307,.0287847078833233],[.983668123279747,.0184664683110909],[.996893484074649,.0079681924961666]]],J=V.length+5,s0=function(i){function e(t,r,n){t===void 0&&(t=24),r===void 0&&(r=21);var o=i.call(this,n)||this;return o._nSamples=21,o._gauss=function(u){if(u<5||u>J)throw Error("Order for Gaussian Quadrature must be in the range of ".concat(5," and ").concat(J,"."));return V[u-5]}(t),o._nSamples=r,o}return Q(e,i),e.prototype._invalidateCache=function(){i.prototype._invalidateCache.call(this),this._cache.arcLengths=null,this._cache.samples=null},Object.defineProperty(e.prototype,"arcLengths",{get:function(){return this._cache.arcLengths||(this._cache.arcLengths=this.computeArcLengths()),this._cache.arcLengths},enumerable:!1,configurable:!0}),e.prototype.getSamples=function(t){if(this.points){if(this._cache.samples||(this._cache.samples=new Map),!this._cache.samples.has(t)){for(var r=this._nSamples,n=[],o=[],u=this.getCoefficients(t),a=0;a<r;++a){var h=a/(r-1);n.push(this.computeArcLength(t,0,h));var s=C(z(E,h,u)),p=s===0?0:1/s;this.tension>.95&&(p=b(p,-1,1)),o.push(p)}var c=r-1,f=[],l=[],g=n[0],_=o[0],M=1/c;for(a=0;a<c;++a){var d=g,y=(g=n[a+1])-d,v=_,T=o[a+1];_=T;var O=M/y,j=(v+T-2*O)/(y*y),L=(3*O-2*v-T)/y;f.push(j),l.push(L)}this._cache.samples.set(t,[n,o,l,f])}return this._cache.samples.get(t)}},e.prototype.computeArcLength=function(t,r,n){if(r===void 0&&(r=0),n===void 0&&(n=1),r===n)return 0;for(var o=this.getCoefficients(t),u=.5*(n-r),a=0,h=0;h<this._gauss.length;h++){var s=this._gauss[h],p=s[0];a+=s[1]*C(z(E,u*p+u+r,o))}return u*a},e.prototype.computeArcLengths=function(){if(this.points){var t=[];t.push(0);for(var r=this.closed?this.points.length:this.points.length-1,n=0,o=0;o<r;o++)n+=this.computeArcLength(o),t.push(n);return t}},e.prototype.inverse=function(t,r){var n=1/(this._nSamples-1),o=this.getSamples(t),u=o[0],a=o[1],h=o[2],s=o[3];if(r>=u[u.length-1])return 1;if(r<=0)return 0;var p=Math.max(0,X(r,u)),c=p*n;if(u[p]===r)return c;var f=a[p],l=s[p],g=h[p],_=r-u[p];return((l*_+g)*_+f)*_+c},e.prototype.lengthAt=function(t){return t*this.arcLengths[this.arcLengths.length-1]},e.prototype.getT=function(t){var r=this.arcLengths,n=r.length,o=t*r[n-1],u=X(o,r),a=u/(n-1);if(r[u]===o)return a;var h=o-r[u];return(u+this.inverse(u,h))/(n-1)},e.prototype.getU=function(t){if(t===0)return 0;if(t===1)return 1;var r=this.arcLengths,n=r.length-1,o=r[n],u=t*n,a=Math.floor(u),h=r[a];if(u===a)return h/o;var s=u-a;return(h+this.computeArcLength(a,0,s))/o},e}($),c0=function(){function i(e,t){t===void 0&&(t={});var r=this;this._cache=new Map;var n=(t=q({tension:.5,alpha:0,closed:!1},t)).arcDivisions?new h0(t.arcDivisions,function(){return r._invalidateCache()}):new s0(t.numericalApproximationOrder,t.numericalInverseSamples,function(){return r._invalidateCache()});n.alpha=t.alpha,n.tension=t.tension,n.closed=t.closed,n.points=e,this._lmargin=t.lmargin||1-n.tension,this._curveMapper=n}return i.prototype.getTimeFromPosition=function(e,t){return t===void 0&&(t=!1),this._curveMapper.getT(t?b(e,0,1):e)},i.prototype.getPositionFromTime=function(e,t){return t===void 0&&(t=!1),this._curveMapper.getU(t?b(e,0,1):e)},i.prototype.getPositionFromLength=function(e,t){t===void 0&&(t=!1);var r=t?b(e,0,this.length):e;return this._curveMapper.getU(r/this.length)},i.prototype.getLengthAt=function(e,t){return e===void 0&&(e=1),t===void 0&&(t=!1),this._curveMapper.lengthAt(t?b(e,0,1):e)},i.prototype.getTimeAtKnot=function(e){if(e<0||e>this.points.length-1)throw Error("Invalid index!");return e===0?0:this.closed||e!==this.points.length-1?e/(this.closed?this.points.length:this.points.length-1):1},i.prototype.getPositionAtKnot=function(e){return this.getPositionFromTime(this.getTimeAtKnot(e))},i.prototype.getPointAtTime=function(e,t){return(e=b(e,0,1))===0?I(this.points[0],t):e===1?I(this.closed?this.points[0]:this.points[this.points.length-1],t):this._curveMapper.evaluateForT(m,e,t)},i.prototype.getPointAt=function(e,t){return this.getPointAtTime(this.getTimeFromPosition(e),t)},i.prototype.getTangentAt=function(e,t){var r=b(this.getTimeFromPosition(e),0,1);return this.getTangentAtTime(r,t)},i.prototype.getTangentAtTime=function(e,t){return F(this._curveMapper.evaluateForT(E,e,t))},i.prototype.getNormalAt=function(e,t){var r=b(this.getTimeFromPosition(e),0,1);return this.getNormalAtTime(r,t)},i.prototype.getNormalAtTime=function(e,t){var r=F(this._curveMapper.evaluateForT(E,e));if(!(r.length<2||r.length>3)){var n=t||new Array(r.length);if(r.length===2)return n[0]=-r[1],n[1]=r[0],n;var o=F(this._curveMapper.evaluateForT(Y,e));return F(w(w(r,o),r),n)}},i.prototype.getFrenetFrames=function(e,t,r){if(t===void 0&&(t=0),r===void 0&&(r=1),!(t<0||r>1||r<t)){for(var n=new Array(e+1),o=new Array(e+1),u=0;u<=e;u++){var a=t===0&&r===1?u/e:t+u/e*(r-t);n[u]=this.getTangentAt(a)}if(this.dim===2){for(u=0;u<n.length;u++)o[u]=[-n[u][1],n[u][0]];return{tangents:n,normals:o}}if(this.dim===3){var h=new Array(e+1),s=void 0,p=Number.MAX_VALUE,c=Math.abs(n[0][0]),f=Math.abs(n[0][1]);c<=p&&(p=c,s=[1,0,0]),f<=p&&(p=f,s=[0,1,0]),Math.abs(n[0][2])<=p&&(s=[0,0,1]);var l=F(w(n[0],s));for(o[0]=w(n[0],l),h[0]=w(n[0],o[0]),u=1;u<=e;u++){if(l=w(n[u-1],n[u]),o[u]=I(o[u-1]),C(l)>A){F(l);var g=Math.acos(b(B(n[u-1],n[u]),-1,1));H(o[u-1],l,g,o[u])}h[u]=w(n[u],o[u])}if(this.closed===!0)for(g=Math.acos(b(B(o[0],o[e]),-1,1))/e,B(n[0],w(o[0],o[e]))>0&&(g=-g),u=1;u<=e;u++)H(o[u],n[u],g*u,o[u]),h[u]=w(n[u],o[u]);return{tangents:n,normals:o,binormals:h}}}},i.prototype.getCurvatureAt=function(e){var t=b(this.getTimeFromPosition(e),0,1);return this.getCurvatureAtTime(t)},i.prototype.getCurvatureAtTime=function(e){var t=this._curveMapper.evaluateForT(E,e),r=this._curveMapper.evaluateForT(Y,e),n=F(t,[]),o=0,u=void 0;if(t.length===2){if((c=Math.pow(t[0]*t[0]+t[1]*t[1],1.5))!==0){var a=(t[0]*r[1]-t[1]*r[0])/c;u=a<0?[n[1],-n[0]]:[-n[1],n[0]],o=Math.abs(a)}}else if(t.length===3){var h=C(t),s=w(t,r);u=F(w(s,t)),h!==0&&(o=C(s)/Math.pow(h,3))}else{h=C(t);var p=C(r),c=Math.pow(h,3),f=B(t,r);c!==0&&(o=Math.sqrt(Math.pow(h,2)*Math.pow(p,2)-Math.pow(f,2))/c)}return{curvature:o,radius:o!==0?1/o:0,tangent:n,direction:u}},i.prototype.getDerivativeAt=function(e,t){var r=b(this.getTimeFromPosition(e),0,1);return this._curveMapper.evaluateForT(E,r,t)},i.prototype.getSecondDerivativeAt=function(e,t){var r=b(this.getTimeFromPosition(e),0,1);return this._curveMapper.evaluateForT(Y,r,t)},i.prototype.getBoundingBox=function(e,t){if(e===void 0&&(e=0),t===void 0&&(t=1),e===0&&t===1&&this._cache.has("bbox"))return this._cache.get("bbox");for(var r=[],n=[],o=this.getTimeFromPosition(e),u=this.getTimeFromPosition(t),a=this.getPointAtTime(o),h=this.getPointAtTime(u),s=this.closed?this.points.length:this.points.length-1,p=Math.floor(s*o),c=Math.ceil(s*u),f=0;f<a.length;f++)r[f]=Math.min(a[f],h[f]),n[f]=Math.max(a[f],h[f]);for(var l=function(d){var y=R(d-1,g.points,g.closed)[2];if(d<c)for(var v=0;v<y.length;v++)y[v]<r[v]&&(r[v]=y[v]),y[v]>n[v]&&(n[v]=y[v]);if(g.tension<1){var T=s*o-(d-1),O=s*u-(d-1),j=function(P){return P>-A&&P<=1+A&&(d-1!==p||P>T)&&(d!==c||P<O)},L=g._curveMapper.getCoefficients(d-1),x=function(P){var K=L[P];S(3*K[0],2*K[1],K[2]).filter(j).forEach(function(k){var N=m(k,L[P]);N<r[P]&&(r[P]=N),N>n[P]&&(n[P]=N)})};for(v=0;v<L.length;v++)x(v)}},g=this,_=p+1;_<=c;_++)l(_);var M={min:r,max:n};return e===0&&t===1&&this._cache.set("bbox",M),M},i.prototype.getPoints=function(e,t,r,n){if(e===void 0&&(e=100),r===void 0&&(r=0),n===void 0&&(n=1),!e||e<=0)throw Error("Invalid arguments passed to getPoints(). You must specify at least 1 sample/segment.");if(!(r<0||n>1||n<r)){for(var o=[],u=0;u<=e;u++){var a=r===0&&n===1?u/e:r+u/e*(n-r);o.push(this.getPointAt(a,t&&new t))}return o}},i.prototype.getNearestPosition=function(e,t,r){var n=this;if(t===void 0&&(t=1e-5),t<=0||!Number.isFinite(t))throw Error("Invalid threshold. Must be a number greater than zero!");r=r||10*this.points.length-1;var o=new Array(e.length),u=1/0,a=0,h=this.createLookupTable(function(f){return n.getPointAt(f)},r,{cacheKey:"lut_nearest_".concat(r)});Array.from(h.keys()).forEach(function(f){var l=h.get(f),g=U(e,l);if(g<u)return u=g,a=f,!0});for(var s=this.getTimeFromPosition(a),p=function(f){if(f>=0&&f<=1){n.getPointAtTime(f,o);var l=U(e,o);if(l<u)return u=l,s=f,!0}},c=.005;c>t;)p(s-c)||p(s+c)||(c/=2);return{u:a=this._curveMapper.getU(s),distance:u,point:o}},i.prototype.getIntersects=function(e,t,r,n){var o=this;t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=this._lmargin);var u=this.getIntersectsAsTime(e,t,r,n).map(function(a){return o.getPointAtTime(a)});return Math.abs(r)===1?u.length===1?u[0]:null:u},i.prototype.getIntersectsAsPositions=function(e,t,r,n){var o=this;return t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=this._lmargin),this.getIntersectsAsTime(e,t,r,n).map(function(u){return o.getPositionFromTime(u)})},i.prototype.getIntersectsAsTime=function(e,t,r,n){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=this._lmargin);for(var o=t,u=new Set,a=this.closed?this.points.length:this.points.length-1,h=0;h<a&&(r===0||u.size<Math.abs(r));h+=1){var s=r<0?a-(h+1):h,p=R(s,this.points,this.closed),c=p[1],f=p[2],l=this._curveMapper.getCoefficients(s),g=void 0,_=void 0;if(c[o]<f[o]?(g=c[o],_=f[o]):(g=f[o],_=c[o]),e-n<=_&&e+n>=g){var M=a0(e,l[o]);r<0?M.sort(function(v,T){return T-v}):r>=0&&M.sort(function(v,T){return v-T});for(var d=0;d<M.length;d++){var y=(M[d]+s)/a;if(u.add(y),r!==0&&u.size===Math.abs(r))break}}}return Array.from(u)},i.prototype.createLookupTable=function(e,t,r){if(!t||t<=1)throw Error("Invalid arguments passed to createLookupTable(). You must specify at least 2 samples.");var n=q({from:0,to:1,cacheForceUpdate:!1},r),o=n.from,u=n.to,a=n.cacheKey,h=n.cacheForceUpdate;if(!(o<0||u>1||u<o)){var s=null;if(a&&!h&&this._cache.has(a))a&&this._cache.has(a)&&(s=this._cache.get(a));else{s=new Map;for(var p=0;p<t;p++){var c=o===0&&u===1?p/(t-1):o+p/(t-1)*(u-o),f=e(c);s.set(c,f)}a&&this._cache.set(a,s)}return s}},i.prototype.forEach=function(e,t,r,n){var o=this;r===void 0&&(r=0),n===void 0&&(n=1);var u=[];if(Number.isFinite(t)){var a=t;if(a<=1)throw Error("Invalid arguments passed to forEach(). You must specify at least 2 samples.");for(var h=0;h<a;h++){var s=r===0&&n===1?h/(a-1):r+h/(a-1)*(n-r);u.push(s)}}else Array.isArray(t)&&(u=t);var p=null;u.forEach(function(c,f){if(!Number.isFinite(c)||c<0||c>1)throw Error("Invalid position (u) for sample in forEach!");var l=o.getTimeFromPosition(c),g=e({u:c,t:l,i:f,prev:p});p={u:c,t:l,i:f,value:g}})},i.prototype.map=function(e,t,r,n){var o=this;r===void 0&&(r=0),n===void 0&&(n=1);var u=[];if(Number.isFinite(t)){var a=t;if(a<=1)throw Error("Invalid arguments passed to map(). You must specify at least 2 samples.");for(var h=0;h<a;h++){var s=r===0&&n===1?h/(a-1):r+h/(a-1)*(n-r);u.push(s)}}else Array.isArray(t)&&(u=t);var p=null;return u.map(function(c,f){if(!Number.isFinite(c)||c<0||c>1)throw Error("Invalid position (u) for sample in map()!");var l=o.getTimeFromPosition(c),g=e({u:c,t:l,i:f,prev:p});return p={u:c,t:l,i:f,value:g},g})},i.prototype.reduce=function(e,t,r,n,o){var u=this;n===void 0&&(n=0),o===void 0&&(o=1);var a=[];if(Number.isFinite(r)){var h=r;if(h<=1)throw Error("Invalid arguments passed to map(). You must specify at least 2 samples.");for(var s=0;s<h;s++){var p=n===0&&o===1?s/(h-1):n+s/(h-1)*(o-n);a.push(p)}}else Array.isArray(r)&&(a=r);return a.reduce(function(c,f,l){if(!Number.isFinite(f)||f<0||f>1)throw Error("Invalid position (u) for sample in map()!");var g=u.getTimeFromPosition(f);return e({acc:c,u:f,t:g,i:l})},t)},i.prototype._invalidateCache=function(){return this._cache=new Map,this},i.prototype.reset=function(){this._curveMapper.reset()},Object.defineProperty(i.prototype,"points",{get:function(){return this._curveMapper.points},set:function(e){this._curveMapper.points=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tension",{get:function(){return this._curveMapper.tension},set:function(e){this._curveMapper.tension=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this._curveMapper.alpha},set:function(e){this._curveMapper.alpha=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"closed",{get:function(){return this._curveMapper.closed},set:function(e){this._curveMapper.closed=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._curveMapper.lengthAt(1)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minX",{get:function(){return this.getBoundingBox().min[0]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxX",{get:function(){return this.getBoundingBox().max[0]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minY",{get:function(){return this.getBoundingBox().min[1]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxY",{get:function(){return this.getBoundingBox().max[1]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minZ",{get:function(){return this.getBoundingBox().min[2]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxZ",{get:function(){return this.getBoundingBox().max[2]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dim",{get:function(){var e;return((e=this.points[0])===null||e===void 0?void 0:e.length)||void 0},enumerable:!1,configurable:!0}),i}();export{c0 as C,A as E,I as a,b,w as c,B as d,C as m,F as n,H as r};
